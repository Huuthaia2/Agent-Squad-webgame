System.register("chunks:///CameraFollow.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./GameManager.js"],(function(t,e){var o,s,i,n,r,a,l,c,h,u,p,d,g;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){o=t.inherits,s=t.classCallCheck,i=t.possibleConstructorReturn,n=t.getPrototypeOf,r=t.createClass},function(t){a=t.cclegacy,l=t._decorator,c=t.Vec3,h=t.Component},function(t){u=t.GameManager}],execute:function(){a._RF.push({},"d6e88BbQZJK2I+F1n7E7os6","CameraFollow",void 0),g=l.ccclass,l.property,t("CameraFollow",(p=g("CameraFollow"),p(d=function(t){function e(){var t,o;s(this,e);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return(o=i(this,(t=n(e)).call.apply(t,[this].concat(a)))).endMovePos=new c(0,150.5,78.5),o.out=new c,o}return o(e,t),r(e,[{key:"setTarget",value:function(t){this.pos=this.node.position.clone(),this.rot=this.node.eulerAngles.clone(),this.target=t}},{key:"update",value:function(t){t>2||(this.target&&(this.out.x=this.pos.x+this.target.position.x,this.out.y=this.pos.y+this.target.position.y,this.out.z=this.pos.z+this.target.position.z,c.distance(this.out,this.node.position)>30?c.lerp(this.out,this.node.position,this.out,1):c.lerp(this.out,this.node.position,this.out,.1),this.node.position=this.out),this.innerPlayer())}},{key:"innerPlayer",value:function(){u.instance&&u.instance.isGameOver&&u.instance.isWin&&c.lerp(this.pos,this.pos,this.endMovePos,.05)}}]),e}(h))||d)),a._RF.pop()}}}));

System.register("chunks:///UITip.js",["./_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var i,n,r,o,s,c,l,a,u,p,d,h,v,f,y,_,b,g,m,C,I;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inherits,r=e.classCallCheck,o=e.possibleConstructorReturn,s=e.getPrototypeOf,c=e.initializerDefineProperty,l=e.assertThisInitialized,a=e.createClass},function(e){u=e.cclegacy,p=e._decorator,d=e.LabelComponent,h=e.Vec3,v=e.tween,f=e.Component}],execute:function(){u._RF.push({},"12c73L/jsxL0YbLlqYLRRGt","UITip",void 0),C=p.ccclass,I=p.property,e("UITip",(y=C("UITip"),_=I(d),y((m=i((g=function(e){function t(){var e,i;r(this,t);for(var n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return i=o(this,(e=s(t)).call.apply(e,[this].concat(a))),c(i,"label",m,l(i)),i}return n(t,e),a(t,[{key:"init",value:function(e){var t=this;this.label.string=e,this.node.scale=new h(0,0,0),v(this.node).to(.1,{scale:new h(1,1,1)},{easing:"elasticInOut"}).union().start(),this.scheduleOnce((function(){t.node.removeFromParent(),t.node.destroy()}),1.5)}}]),t}(f)).prototype,"label",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=g))||b)),u._RF.pop()}}}));

System.register("chunks:///Config.js",["cc"],(function(o,e){var l,n,a,t,d,u;return o("GetEnemySkillCD",(function(o){return o==n.JUMP?4:o==n.THROW?6:o==n.CALL?6:0})),{setters:[function(o){l=o.cclegacy}],execute:function(){l._RF.push({},"72c26bshjZBVL/FT7HMfHvf","Config",void 0),o("TT_VERSION","1.2"),o("QQ_VERSION","1.1"),o("WX_VERSION","1.6"),o("BOX_EQUIP_PRICE",50),o("BOX_OPEN_DIAMOND_COUNT",.1),o("AIR_DROP_COUNT",5),o("REWARD_STAGE_TIME",60),o("REWARD_STAGE_BOX_COUNT",10),o("REWARD_STAGE_GOLD_MIN",3),o("REWARD_STAGE_GOLD_MAX",4),o("CHEAT_OPEN",!1),o("SHADOW_OPEN",!0),o("STAGE_LV",[{id:0,name:"Normal",desc:"",enemyBloodRate:1,goldRate:1},{id:0,name:"Hard",desc:"Reward  +100%",enemyBloodRate:2,goldRate:2},{id:0,name:"Hell",desc:"Reward  +200%",enemyBloodRate:5,goldRate:3}]),o("ENEMY_ATT_TYPE",n={NORMAL:1,THROW:2,JUMP:3,CALL:4,ZIBAO:5}),o("PLAYER_ATT_TYPE",a={JIQIANG:1,SANDAN:2,FLASH:3,TOUDAN:4,WURENJI:5,DAODAN:6}),o("PLAYER_PROPERTY",[{id:0,moveSpeed:60,att:100,attScale:.1,attRatio:100,blood:100,attCD:.1,attType:a.JIQIANG},{id:1,moveSpeed:60,att:150,attScale:1,attRatio:60,blood:100,attCD:1,attType:a.SANDAN},{id:2,moveSpeed:60,att:120,attScale:.25,attRatio:120,blood:200,attCD:.2,attType:a.FLASH},{id:3,moveSpeed:60,att:150,attScale:1,attRatio:100,blood:200,attCD:1,attType:a.TOUDAN},{id:4,moveSpeed:60,att:200,attScale:.1,attRatio:80,blood:500,attCD:.1,attType:a.WURENJI},{id:5,moveSpeed:60,att:300,attScale:1,attRatio:140,blood:1e3,attCD:2,attType:a.DAODAN}]),o("PLAYER_SKILL_DATA",[{id:0,skillCD:10,duration:5,attScale:2,attSpeedScale:2},{id:1,skillCD:12,duration:5,attScale:2,attSpeedScale:2},{id:2,skillCD:15,duration:5,attScale:1,attSpeedScale:1,bloodAdd:5,bloodDuration:5,bloodAddCD:20},{id:3,skillCD:13,duration:5,attScale:2,attSpeedScale:2},{id:4,skillCD:10,duration:5,attScale:2,attSpeedScale:2},{id:5,skillCD:14,duration:5,attScale:2,attSpeedScale:2}]),o("ENEMY_PROPERTY",[{id:1,moveSpeed:30,att:5,attRatio:15,blood:100,attCD:1,attType:n.NORMAL},{id:2,moveSpeed:50,att:5,attRatio:15,blood:80,attCD:1,attType:n.NORMAL},{id:3,moveSpeed:25,att:3,attRatio:15,blood:500,attCD:.5,attType:n.NORMAL},{id:4,moveSpeed:35,att:5,attRatio:50,blood:200,attCD:1,attType:n.JUMP},{id:5,moveSpeed:30,att:8,attRatio:60,blood:300,attCD:.5,attType:n.THROW},{id:6,moveSpeed:35,att:5,attRatio:50,blood:200,attCD:1,attType:n.ZIBAO}]),o("BOSS_PROPERTY",[{id:7,moveSpeed:35,att:3,attRatio:70,blood:300,attCD:1,attType:n.JUMP},{id:8,moveSpeed:30,att:3,attRatio:80,blood:200,attCD:1,attType:n.THROW},{id:9,moveSpeed:30,att:2,attRatio:60,blood:200,attCD:1,attType:n.CALL}]),o("ITEMTYPE",t={NONE:0,GOLD:1,DIAMOND:2,EXP:3,CARD:4,BOX:5,EQUIP:6,SKILL:7}),o("EQUIP_ATT_TYPE_DESC",["None","Attack","Health","Attack Speed","Attack Range","Duration","Health Return","Number of mines","Number of drones","Number of missiles"]),o("EQUIP_ADD_TYPE",{att:1,blood:2,attSpeed:3,attRatio:4,time:5,returnBlood:6,boom:7,wurenji:8,daodan:9}),o("EQUIP_INFO",[{id:1,ownerID:0,index:0,name:"Tactical Gloves",addType:[1,1,1,1,1,1,1,1,1,1],addValue:[20,28,39,55,77,108,151,211,295,413]},{id:2,ownerID:0,index:1,name:"Vest",addType:[2,2,2,2,2,2,2,2,2,2],addValue:[20,28,39,55,77,108,151,211,295,413]},{id:3,ownerID:0,index:2,name:"Bullet Chain",addType:[1,2,1,2,1,2,1,2,1,2],addValue:[24,6,24,6,24,6,24,6,24,6]},{id:4,ownerID:1,index:0,name:"Leather Jacket",addType:[2,2,2,2,2,2,2,2,2,2],addValue:[20,28,39,55,77,108,151,211,295,413]},{id:5,ownerID:1,index:1,name:"Cigar",addType:[1,1,1,1,1,1,1,1,1,1],addValue:[20,28,39,55,77,108,151,211,295,413]},{id:6,ownerID:1,index:2,name:"Spiked Wrist Band",addType:[3,4,3,4,3,4,3,4,3,4],addValue:[24,.6,24,.6,24,.6,24,.6,24,.6]},{id:7,ownerID:2,index:0,name:"Nurse's cap",addType:[1,1,1,1,1,1,1,1,1,1],addValue:[20,28,39,55,77,108,151,211,295,413]},{id:8,ownerID:2,index:1,name:"Medical Backpack",addType:[6,6,6,6,6,6,6,6,6,6],addValue:[20,28,39,55,77,108,151,211,295,413]},{id:9,ownerID:2,index:2,name:"Energy Core",addType:[5,5,5,5,5,5,5,5,5,5],addValue:[.3,.3,.3,.3,.3,.3,.3,.3,.3,.3]},{id:10,ownerID:3,index:0,name:"Pirate Hat",addType:[1,1,1,1,1,1,1,1,1,1],addValue:[20,28,39,55,77,108,151,211,295,413]},{id:11,ownerID:3,index:1,name:"Black Eye Mask",addType:[2,2,2,2,2,2,2,2,2,2],addValue:[20,28,39,55,77,108,151,211,295,413]},{id:12,ownerID:3,index:2,name:"Devil Bomb",addType:[1,1,7,1,1,7,1,1,1,7],addValue:[12,12,1,12,12,2,12,12,12,3]},{id:13,ownerID:4,index:0,name:"Intelligent Chip",addType:[1,1,1,1,1,1,1,1,1,1],addValue:[20,28,39,55,77,108,151,211,295,413]},{id:14,ownerID:4,index:1,name:"Control Handle",addType:[1,1,1,1,1,1,1,1,1,1],addValue:[20,28,39,55,77,108,151,211,295,413]},{id:15,ownerID:4,index:2,name:"Drone",addType:[1,1,8,1,1,8,1,1,1,8],addValue:[12,12,1,12,12,1,12,12,12,1]},{id:16,ownerID:5,index:0,name:"Inspector Hat",addType:[2,2,2,2,2,2,2,2,2,2],addValue:[20,28,39,55,77,108,151,211,295,413]},{id:17,ownerID:5,index:1,name:"Honor Belt",addType:[1,1,1,1,1,1,1,1,1,1],addValue:[20,28,39,55,77,108,151,211,295,413]},{id:18,ownerID:5,index:2,name:"Rocket",addType:[1,1,9,1,1,9,1,1,1,9],addValue:[12,12,1,12,12,2,12,12,12,3]}]),o("LV_REWARD",[{lv:0,exp:100,rewardType:[2,1,6,2],rewardID:[0,0,3,0],rewardCount:[20,5e3,1,20]},{lv:1,exp:120,rewardType:[4,1,1,5],rewardID:[1,0,0,3],rewardCount:[1,5e3,5e3,1]},{lv:2,exp:140,rewardType:[5,1,5,2],rewardID:[2,0,3,0],rewardCount:[1,5e3,1,20]},{lv:3,exp:160,rewardType:[4,6,5,2],rewardID:[2,1,3,0],rewardCount:[1,1,1,20]},{lv:4,exp:180,rewardType:[5,1,1,2],rewardID:[4,0,0,0],rewardCount:[1,5e3,5e3,20]},{lv:5,exp:200,rewardType:[6,1,5,2],rewardID:[6,0,4,0],rewardCount:[1,5e3,1,20]},{lv:6,exp:220,rewardType:[5,1,1,2],rewardID:[2,0,0,0],rewardCount:[1,5e3,5e3,20]},{lv:7,exp:240,rewardType:[4,6,5,2],rewardID:[3,5,3,0],rewardCount:[1,1,1,20]},{lv:8,exp:260,rewardType:[5,2,1,2],rewardID:[2,0,0,0],rewardCount:[1,20,5e3,20]},{lv:9,exp:280,rewardType:[6,1,5,2],rewardID:[9,0,4,0],rewardCount:[1,5e3,1,20]},{lv:10,exp:300,rewardType:[2,5,1,2],rewardID:[0,3,0,0],rewardCount:[20,1,5e3,20]},{lv:11,exp:320,rewardType:[4,5,1,2],rewardID:[4,4,0,0],rewardCount:[1,1,5e3,20]},{lv:12,exp:340,rewardType:[5,1,6,2],rewardID:[3,0,8,0],rewardCount:[1,5e3,1,20]},{lv:13,exp:360,rewardType:[5,2,1,2],rewardID:[4,0,0,0],rewardCount:[1,20,5e3,20]},{lv:14,exp:380,rewardType:[6,2,1,2],rewardID:[12,0,0,0],rewardCount:[1,20,5e3,20]},{lv:15,exp:400,rewardType:[5,1,2,5],rewardID:[2,0,0,3],rewardCount:[1,5e3,20,1]},{lv:16,exp:420,rewardType:[4,1,6,5],rewardID:[5,0,10,3],rewardCount:[1,5e3,1,1]},{lv:17,exp:440,rewardType:[5,2,1,2],rewardID:[1,0,0,0],rewardCount:[1,20,5e3,20]},{lv:18,exp:460,rewardType:[5,2,1,5],rewardID:[3,0,0,4],rewardCount:[1,20,5e3,1]},{lv:19,exp:480,rewardType:[6,2,1,2],rewardID:[15,0,0,0],rewardCount:[1,20,5e3,20]},{lv:20,exp:520,rewardType:[5,2,1,2],rewardID:[3,0,0,0],rewardCount:[1,20,5e3,20]},{lv:21,exp:540,rewardType:[6,2,1,2],rewardID:[18,0,0,0],rewardCount:[1,20,5e3,20]},{lv:22,exp:560,rewardType:[5,2,6,5],rewardID:[2,0,4,4],rewardCount:[1,20,1,1]},{lv:23,exp:580,rewardType:[5,2,1,2],rewardID:[3,0,0,0],rewardCount:[1,20,5e3,20]},{lv:24,exp:600,rewardType:[6,2,1,2],rewardID:[1,0,0,0],rewardCount:[1,20,5e3,20]},{lv:25,exp:620,rewardType:[2,5,1,2],rewardID:[0,3,0,0],rewardCount:[20,1,5e3,20]},{lv:26,exp:640,rewardType:[5,2,6,2],rewardID:[1,0,16,0],rewardCount:[1,20,1,20]},{lv:27,exp:680,rewardType:[2,5,1,2],rewardID:[0,4,0,0],rewardCount:[20,1,5e3,20]},{lv:28,exp:700,rewardType:[6,2,1,5],rewardID:[4,0,0,3],rewardCount:[1,20,5e3,1]},{lv:29,exp:720,rewardType:[5,2,1,2],rewardID:[4,0,0,0],rewardCount:[1,20,5e3,20]},{lv:30,exp:2e3,rewardType:[2,1,5,5],rewardID:[0,0,3,3],rewardCount:[20,5e3,1,1]},{lv:31,exp:2e3,rewardType:[1,5,2,1],rewardID:[0,4,0,0],rewardCount:[5e3,1,20,5e3]},{lv:32,exp:2e3,rewardType:[2,6,1,5],rewardID:[0,7,0,3],rewardCount:[20,1,5e3,1]},{lv:33,exp:2e3,rewardType:[2,5,1,2],rewardID:[0,3,0,0],rewardCount:[30,1,5e3,20]},{lv:34,exp:2e3,rewardType:[5,2,1,6],rewardID:[4,0,0,11],rewardCount:[1,20,5e3,1]},{lv:35,exp:2e3,rewardType:[3,6,1,2],rewardID:[0,2,0,0],rewardCount:[200,1,5e3,20]},{lv:36,exp:2e3,rewardType:[5,5,1,2],rewardID:[3,4,0,0],rewardCount:[1,1,5e3,20]},{lv:37,exp:2e3,rewardType:[1,2,1,5],rewardID:[0,0,0,4],rewardCount:[5e3,20,5e3,1]},{lv:38,exp:2e3,rewardType:[6,5,1,2],rewardID:[14,3,0,0],rewardCount:[1,1,5e3,20]},{lv:39,exp:2e3,rewardType:[2,5,1,6],rewardID:[0,4,0,17],rewardCount:[20,1,5e3,1]},{lv:40,exp:100,rewardType:[5,2,1,5],rewardID:[3,0,0,4],rewardCount:[1,20,5e3,1]},{lv:41,exp:100,rewardType:[6,5,1,2],rewardID:[16,3,0,0],rewardCount:[1,1,5e3,20]},{lv:42,exp:100,rewardType:[1,5,1,2],rewardID:[0,3,0,0],rewardCount:[5e3,1,5e3,20]},{lv:43,exp:100,rewardType:[6,5,1,1],rewardID:[11,4,0,0],rewardCount:[1,1,5e3,5e3]},{lv:44,exp:100,rewardType:[2,1,5,2],rewardID:[0,0,3,0],rewardCount:[20,5e3,1,20]},{lv:45,exp:100,rewardType:[6,1,1,5],rewardID:[16,0,0,3],rewardCount:[1,5e3,5e3,1]},{lv:46,exp:100,rewardType:[3,5,1,2],rewardID:[0,4,0,0],rewardCount:[250,1,5e3,20]},{lv:47,exp:100,rewardType:[6,5,1,5],rewardID:[12,3,0,4],rewardCount:[1,1,5e3,1]},{lv:48,exp:100,rewardType:[2,5,1,2],rewardID:[0,3,0,0],rewardCount:[20,1,5e3,20]},{lv:49,exp:100,rewardType:[6,2,1,5],rewardID:[14,0,0,4],rewardCount:[1,20,5e3,1]}]),o("TASK_JUMP_TYPE",d={TASK:0,PLAYER:1,GAME:2,BOX:3,SHOP:4}),o("CHENGJIU_REWARD",[{id:0,desc:"Watch the video ",timesDesc:" times",limit:[5,10,15,20,25,50,100],rewardType:3,rewardID:0,rewardCount:[100,150,200,250,300,400,500],jump:d.SHOP},{id:1,desc:"Rescue soldiers ",timesDesc:"",limit:[2,10,50,100,200,500,1e3],rewardType:3,rewardID:0,rewardCount:[100,150,200,250,300,400,500],jump:d.GAME},{id:2,desc:"Pass level ",timesDesc:" times",limit:[1,10,20,30,40,50,60],rewardType:3,rewardID:0,rewardCount:[100,150,200,250,300,400,500],jump:d.GAME},{id:3,desc:"Open chest ",timesDesc:" times",limit:[5,20,50,200,500,1e3],rewardType:3,rewardID:0,rewardCount:[100,150,200,250,300,400],jump:d.BOX},{id:4,desc:"Success pass ",timesDesc:" chapter",limit:[1,2,3],rewardType:3,rewardID:0,rewardCount:[100,300,500],jump:d.GAME},{id:5,desc:"Kill ",timesDesc:" elite monsters in total",limit:[50,200,500,1e3,5e3],rewardType:3,rewardID:0,rewardCount:[100,150,200,300,500],jump:d.GAME},{id:6,desc:"Kill ",timesDesc:" bosses in total",limit:[1,4,10,20,50,100,500,1e3],rewardType:3,rewardID:0,rewardCount:[100,150,200,250,300,400,500,600],jump:d.GAME},{id:7,desc:"Rogers killed ",timesDesc:" monsters",limit:[100,500,2e3,5e3,1e4],rewardType:3,rewardID:0,rewardCount:[100,150,200,300,500],jump:d.GAME},{id:8,desc:"Logan killed ",timesDesc:" monsters",limit:[100,500,2e3,5e3,1e4],rewardType:3,rewardID:0,rewardCount:[100,150,200,300,500],jump:d.GAME},{id:9,desc:"Ali killed ",timesDesc:" monsters",limit:[100,500,2e3,5e3,1e4],rewardType:3,rewardID:0,rewardCount:[100,150,200,300,500],jump:d.GAME},{id:10,desc:"Mike killed ",timesDesc:" monsters",limit:[100,500,2e3,5e3,1e4],rewardType:3,rewardID:0,rewardCount:[100,150,200,300,500],jump:d.GAME},{id:11,desc:"Bea killed ",timesDesc:" monsters",limit:[100,500,2e3,5e3,1e4],rewardType:3,rewardID:0,rewardCount:[100,150,200,300,500],jump:d.GAME},{id:12,desc:"Brock killed ",timesDesc:" monsters",limit:[100,500,2e3,5e3,1e4],rewardType:3,rewardID:0,rewardCount:[100,150,200,300,500],jump:d.GAME},{id:13,desc:"Rogers is ",timesDesc:" levels",limit:[5,10,15,20,25,30,35,40,45,50],rewardType:3,rewardID:0,rewardCount:[100,150,200,250,300,350,400,450,500,550],jump:d.PLAYER},{id:14,desc:"Logan is ",timesDesc:" levels",limit:[5,10,15,20,25,30,35,40,45,50],rewardType:3,rewardID:0,rewardCount:[100,150,200,250,300,350,400,450,500,550],jump:d.PLAYER},{id:15,desc:"Ali is ",timesDesc:" levels",limit:[5,10,15,20,25,30,35,40,45,50],rewardType:3,rewardID:0,rewardCount:[100,150,200,250,300,350,400,450,500,550],jump:d.PLAYER},{id:16,desc:"Mike is ",timesDesc:" levels",limit:[5,10,15,20,25,30,35,40,45,50],rewardType:3,rewardID:0,rewardCount:[100,150,200,250,300,350,400,450,500,550],jump:d.PLAYER},{id:17,desc:"Bea is ",timesDesc:" levels",limit:[5,10,15,20,25,30,35,40,45,50],rewardType:3,rewardID:0,rewardCount:[100,150,200,250,300,350,400,450,500,550],jump:d.PLAYER},{id:18,desc:"Brock is ",timesDesc:" levels",limit:[5,10,15,20,25,30,35,40,45,50],rewardType:3,rewardID:0,rewardCount:[100,150,200,250,300,350,400,450,500,550],jump:d.PLAYER},{id:19,desc:"Collect bonus ",timesDesc:" times per day",limit:[10,20,50,100,200,500,1e3],rewardType:3,rewardID:0,rewardCount:[100,150,200,250,300,400,500],jump:d.TASK},{id:20,desc:"Complete ",timesDesc:" achievements",limit:[5,10,20,50,100,200,500],rewardType:3,rewardID:0,rewardCount:[100,150,200,250,300,400,500],jump:d.TASK}]),o("TASK_REWARD",[{id:0,desc:"Watch the video ",timesDesc:" times",limit:3,rewardType:[3,1],rewardID:[0,0],rewardCount:[50,500],jump:d.SHOP},{id:1,desc:"Rescue ",timesDesc:" soldiers",limit:2,rewardType:[3,1],rewardID:[0,0],rewardCount:[20,200],jump:d.GAME},{id:2,desc:"Pass the level ",timesDesc:" times",limit:1,rewardType:[3,1],rewardID:[0,0],rewardCount:[20,300],jump:d.GAME},{id:3,desc:"Upgrade Rogers ",timesDesc:" times",limit:2,rewardType:[3,1],rewardID:[0,0],rewardCount:[40,200],jump:d.PLAYER},{id:4,desc:"Upgrade Logan ",timesDesc:" times",limit:2,rewardType:[3,1],rewardID:[0,0],rewardCount:[40,200],jump:d.PLAYER},{id:5,desc:"Upgrade Ali ",timesDesc:" times",limit:2,rewardType:[3,1],rewardID:[0,0],rewardCount:[40,200],jump:d.PLAYER},{id:6,desc:"Upgrade Mike ",timesDesc:" times",limit:2,rewardType:[3,1],rewardID:[0,0],rewardCount:[40,200],jump:d.PLAYER},{id:7,desc:"Upgrade Bea ",timesDesc:" times",limit:2,rewardType:[3,1],rewardID:[0,0],rewardCount:[40,200],jump:d.PLAYER},{id:8,desc:"Upgrade Brock ",timesDesc:" times",limit:2,rewardType:[3,1],rewardID:[0,0],rewardCount:[40,200],jump:d.PLAYER},{id:9,desc:"Rogers killed ",timesDesc:" monsters",limit:100,rewardType:[3,1],rewardID:[0,0],rewardCount:[40,300],jump:d.GAME},{id:10,desc:"Logan killed ",timesDesc:" monsters",limit:100,rewardType:[3,1],rewardID:[0,0],rewardCount:[40,300],jump:d.GAME},{id:11,desc:"Ali killed ",timesDesc:" monsters",limit:100,rewardType:[3,1],rewardID:[0,0],rewardCount:[40,300],jump:d.GAME},{id:12,desc:"Mike killed ",timesDesc:" monsters",limit:100,rewardType:[3,1],rewardID:[0,0],rewardCount:[40,300],jump:d.GAME},{id:13,desc:"Bea killed ",timesDesc:" monsters",limit:100,rewardType:[3,1],rewardID:[0,0],rewardCount:[40,300],jump:d.GAME},{id:14,desc:"Brock killed ",timesDesc:" monsters",limit:100,rewardType:[3,1],rewardID:[0,0],rewardCount:[40,300],jump:d.GAME},{id:15,desc:"Kill ",timesDesc:" elite monsters",limit:2,rewardType:[3,1],rewardID:[0,0],rewardCount:[30,250],jump:d.GAME},{id:16,desc:"Kill ",timesDesc:" bosses",limit:1,rewardType:[3,1],rewardID:[0,0],rewardCount:[50,500],jump:d.GAME},{id:17,desc:"Open the chest ",timesDesc:" times",limit:3,rewardType:[3,1],rewardID:[0,0],rewardCount:[30,200],jump:d.BOX},{id:18,desc:"Collect bonus ",timesDesc:" times per day",limit:2,rewardType:[3,1],rewardID:[0,0],rewardCount:[40,400],jump:d.TASK},{id:19,desc:"Complete ",timesDesc:" tasks",limit:1,rewardType:[3,1],rewardID:[0,0],rewardCount:[20,200],jump:d.TASK}]),o("PLAYER_INFO",[{id:0,name:"Rogers",desc:"Armed with a machine gun, he can fire continuously to suppress the enemy with strong firepower!",unlockLv:0,lvupCount:2,quality:1,lvupGold:2e3,skillDesc:"Burst of potential, a short period of time to increase the size, attributes greatly increased",cardWeight:5},{id:1,name:"Logan",desc:"Logan's shotgun can do a lot of damage at close range!",unlockLv:1,lvupCount:2,quality:1,lvupGold:2e3,skillDesc:"Bloodline awakens. Attack speed increases for a short time, doubling repelling effect",cardWeight:5},{id:2,name:"Ali",desc:"Pulse the electric current from the stun gun. No one can dodge it!",unlockLv:3,lvupCount:3,quality:2,lvupGold:3e3,skillDesc:"Energy activation protects friendly forces from any damage for a short time",cardWeight:3},{id:3,name:"Mike",desc:"Blaster Mike can plant bombs that will blow up any enemy in its path!",unlockLv:7,lvupCount:3,quality:2,lvupGold:3e3,skillDesc:"Ready to fire, instantly fire a giant cannonball, inflicting massive damage",cardWeight:3},{id:4,name:"Bea",desc:"The hovering drone is one of Beya's proud designs!",unlockLv:11,lvupCount:4,quality:3,lvupGold:4e3,skillDesc:"Artificial intelligence, more drones in the fight",cardWeight:2},{id:5,name:"Brock",desc:"Brock can fire high-explosive rockets against enemies at great distances!",unlockLv:16,lvupCount:5,quality:4,lvupGold:5e3,skillDesc:"Full fire, multiple rockets fired at the target area in an instant",cardWeight:1},{id:6,name:"",desc:"",unlockLv:19,lvupCount:5,quality:4,lvupGold:5e3,skillDesc:"",cardWeight:1},{id:7,name:"",desc:"",unlockLv:24,lvupCount:5,quality:3,lvupGold:5e3,skillDesc:"",cardWeight:1},{id:8,name:"",desc:"",unlockLv:29,lvupCount:5,quality:2,lvupGold:5e3,skillDesc:"",cardWeight:1},{id:9,name:"",desc:"",unlockLv:34,lvupCount:5,quality:4,lvupGold:5e3,skillDesc:"",cardWeight:1},{id:10,name:"",desc:"",unlockLv:39,lvupCount:5,quality:3,lvupGold:5e3,skillDesc:"",cardWeight:1},{id:11,name:"",desc:"",unlockLv:49,lvupCount:5,quality:4,lvupGold:5e3,skillDesc:"",cardWeight:1}]),o("BOX_INFO",[{id:1,rewardType:t.GOLD,minCount:800,maxCount:1200,openSec:0},{id:2,rewardType:t.DIAMOND,minCount:8,maxCount:12,openSec:0},{id:3,rewardType:t.CARD,minCount:4,maxCount:6,minCardCount:2,maxCardCount:3,openSec:180},{id:4,rewardType:t.CARD,minCount:12,maxCount:18,minCardCount:3,maxCardCount:4,openSec:600},{id:5,rewardType:t.EQUIP,minCount:1,maxCount:1,openSec:0}]),o("PLAYER_DATA",[[{blood:8,att:10,unlockWeapon:1},{blood:8,att:11,unlockWeapon:null},{blood:9,att:12,unlockWeapon:null},{blood:10,att:13,unlockWeapon:null},{blood:12,att:14,unlockWeapon:null},{blood:13,att:16,unlockWeapon:null},{blood:14,att:17,unlockWeapon:null},{blood:16,att:19,unlockWeapon:null},{blood:18,att:21,unlockWeapon:null},{blood:20,att:23,unlockWeapon:2},{blood:22,att:25,unlockWeapon:null},{blood:24,att:28,unlockWeapon:null},{blood:27,att:31,unlockWeapon:null},{blood:30,att:34,unlockWeapon:null},{blood:33,att:37,unlockWeapon:null},{blood:37,att:41,unlockWeapon:null},{blood:40,att:45,unlockWeapon:null},{blood:45,att:50,unlockWeapon:null},{blood:50,att:55,unlockWeapon:null},{blood:55,att:61,unlockWeapon:3},{blood:61,att:67,unlockWeapon:null},{blood:68,att:74,unlockWeapon:null},{blood:75,att:81,unlockWeapon:null},{blood:83,att:89,unlockWeapon:null},{blood:92,att:98,unlockWeapon:null},{blood:102,att:108,unlockWeapon:null},{blood:113,att:119,unlockWeapon:null},{blood:126,att:131,unlockWeapon:null},{blood:139,att:144,unlockWeapon:null},{blood:154,att:158,unlockWeapon:3},{blood:171,att:174,unlockWeapon:null},{blood:189,att:191,unlockWeapon:null},{blood:209,att:211,unlockWeapon:null},{blood:232,att:232,unlockWeapon:null},{blood:257,att:255,unlockWeapon:null},{blood:285,att:281,unlockWeapon:null},{blood:315,att:309,unlockWeapon:null},{blood:349,att:340,unlockWeapon:null},{blood:387,att:374,unlockWeapon:null},{blood:429,att:411,unlockWeapon:4},{blood:475,att:452,unlockWeapon:null},{blood:526,att:497,unlockWeapon:null},{blood:582,att:547,unlockWeapon:null},{blood:645,att:602,unlockWeapon:null},{blood:714,att:662,unlockWeapon:null},{blood:791,att:728,unlockWeapon:null},{blood:876,att:801,unlockWeapon:null},{blood:971,att:881,unlockWeapon:null},{blood:1075,att:970,unlockWeapon:null},{blood:1191,att:1067,unlockWeapon:5}],[{blood:8,att:9,unlockWeapon:1},{blood:8,att:9,unlockWeapon:null},{blood:9,att:10,unlockWeapon:null},{blood:10,att:12,unlockWeapon:null},{blood:12,att:13,unlockWeapon:null},{blood:13,att:14,unlockWeapon:null},{blood:14,att:16,unlockWeapon:null},{blood:16,att:18,unlockWeapon:null},{blood:18,att:20,unlockWeapon:null},{blood:20,att:22,unlockWeapon:2},{blood:22,att:24,unlockWeapon:null},{blood:24,att:26,unlockWeapon:null},{blood:27,att:29,unlockWeapon:null},{blood:30,att:32,unlockWeapon:null},{blood:33,att:36,unlockWeapon:null},{blood:37,att:40,unlockWeapon:null},{blood:40,att:44,unlockWeapon:null},{blood:45,att:49,unlockWeapon:null},{blood:50,att:54,unlockWeapon:null},{blood:55,att:59,unlockWeapon:3},{blood:61,att:66,unlockWeapon:null},{blood:68,att:73,unlockWeapon:null},{blood:75,att:80,unlockWeapon:null},{blood:83,att:89,unlockWeapon:null},{blood:92,att:98,unlockWeapon:null},{blood:102,att:109,unlockWeapon:null},{blood:113,att:120,unlockWeapon:null},{blood:126,att:133,unlockWeapon:null},{blood:139,att:147,unlockWeapon:null},{blood:154,att:162,unlockWeapon:3},{blood:171,att:179,unlockWeapon:null},{blood:189,att:198,unlockWeapon:null},{blood:209,att:219,unlockWeapon:null},{blood:232,att:242,unlockWeapon:null},{blood:257,att:268,unlockWeapon:null},{blood:285,att:296,unlockWeapon:null},{blood:315,att:327,unlockWeapon:null},{blood:349,att:361,unlockWeapon:null},{blood:387,att:399,unlockWeapon:null},{blood:429,att:441,unlockWeapon:4},{blood:475,att:488,unlockWeapon:null},{blood:526,att:539,unlockWeapon:null},{blood:582,att:596,unlockWeapon:null},{blood:645,att:658,unlockWeapon:null},{blood:714,att:728,unlockWeapon:null},{blood:791,att:804,unlockWeapon:null},{blood:876,att:889,unlockWeapon:null},{blood:971,att:982,unlockWeapon:null},{blood:1075,att:1085,unlockWeapon:null},{blood:1191,att:1199,unlockWeapon:5}],[{blood:12,att:12,unlockWeapon:1},{blood:13,att:13,unlockWeapon:null},{blood:15,att:15,unlockWeapon:null},{blood:16,att:16,unlockWeapon:null},{blood:18,att:18,unlockWeapon:null},{blood:20,att:20,unlockWeapon:null},{blood:22,att:22,unlockWeapon:null},{blood:25,att:24,unlockWeapon:null},{blood:27,att:27,unlockWeapon:null},{blood:30,att:29,unlockWeapon:2},{blood:33,att:33,unlockWeapon:null},{blood:37,att:36,unlockWeapon:null},{blood:41,att:40,unlockWeapon:null},{blood:45,att:44,unlockWeapon:null},{blood:50,att:49,unlockWeapon:null},{blood:56,att:54,unlockWeapon:null},{blood:61,att:59,unlockWeapon:null},{blood:68,att:66,unlockWeapon:null},{blood:75,att:72,unlockWeapon:null},{blood:84,att:80,unlockWeapon:3},{blood:92,att:88,unlockWeapon:null},{blood:102,att:98,unlockWeapon:null},{blood:113,att:108,unlockWeapon:null},{blood:126,att:119,unlockWeapon:null},{blood:139,att:132,unlockWeapon:null},{blood:154,att:146,unlockWeapon:null},{blood:171,att:161,unlockWeapon:null},{blood:189,att:178,unlockWeapon:null},{blood:209,att:196,unlockWeapon:null},{blood:232,att:217,unlockWeapon:3},{blood:257,att:240,unlockWeapon:null},{blood:284,att:265,unlockWeapon:null},{blood:315,att:293,unlockWeapon:null},{blood:349,att:324,unlockWeapon:null},{blood:386,att:358,unlockWeapon:null},{blood:428,att:395,unlockWeapon:null},{blood:474,att:437,unlockWeapon:null},{blood:525,att:483,unlockWeapon:null},{blood:581,att:533,unlockWeapon:null},{blood:644,att:589,unlockWeapon:4},{blood:713,att:651,unlockWeapon:null},{blood:789,att:720,unlockWeapon:null},{blood:874,att:795,unlockWeapon:null},{blood:968,att:879,unlockWeapon:null},{blood:1072,att:971,unlockWeapon:null},{blood:1188,att:1073,unlockWeapon:null},{blood:1315,att:1185,unlockWeapon:null},{blood:1457,att:1310,unlockWeapon:null},{blood:1613,att:1447,unlockWeapon:null},{blood:1787,att:1599,unlockWeapon:5}],[{blood:14,att:18,unlockWeapon:1},{blood:15,att:20,unlockWeapon:null},{blood:17,att:22,unlockWeapon:null},{blood:19,att:25,unlockWeapon:null},{blood:21,att:27,unlockWeapon:null},{blood:23,att:30,unlockWeapon:null},{blood:25,att:34,unlockWeapon:null},{blood:28,att:37,unlockWeapon:null},{blood:31,att:41,unlockWeapon:null},{blood:34,att:46,unlockWeapon:2},{blood:38,att:51,unlockWeapon:null},{blood:42,att:57,unlockWeapon:null},{blood:46,att:63,unlockWeapon:null},{blood:51,att:70,unlockWeapon:null},{blood:57,att:78,unlockWeapon:null},{blood:63,att:86,unlockWeapon:null},{blood:69,att:96,unlockWeapon:null},{blood:76,att:106,unlockWeapon:null},{blood:84,att:118,unlockWeapon:null},{blood:93,att:131,unlockWeapon:3},{blood:103,att:145,unlockWeapon:null},{blood:114,att:161,unlockWeapon:null},{blood:126,att:179,unlockWeapon:null},{blood:139,att:198,unlockWeapon:null},{blood:154,att:220,unlockWeapon:null},{blood:170,att:245,unlockWeapon:null},{blood:188,att:271,unlockWeapon:null},{blood:207,att:301,unlockWeapon:null},{blood:229,att:334,unlockWeapon:null},{blood:253,att:371,unlockWeapon:3},{blood:280,att:412,unlockWeapon:null},{blood:309,att:457,unlockWeapon:null},{blood:342,att:508,unlockWeapon:null},{blood:378,att:564,unlockWeapon:null},{blood:417,att:626,unlockWeapon:null},{blood:461,att:694,unlockWeapon:null},{blood:510,att:771,unlockWeapon:null},{blood:563,att:856,unlockWeapon:null},{blood:622,att:950,unlockWeapon:null},{blood:687,att:1054,unlockWeapon:4},{blood:760,att:1170,unlockWeapon:null},{blood:839,att:1299,unlockWeapon:null},{blood:928,att:1442,unlockWeapon:null},{blood:1025,att:1600,unlockWeapon:null},{blood:1133,att:1776,unlockWeapon:null},{blood:1251,att:1972,unlockWeapon:null},{blood:1383,att:2188,unlockWeapon:null},{blood:1528,att:2429,unlockWeapon:null},{blood:1689,att:2696,unlockWeapon:null},{blood:1866,att:2993,unlockWeapon:5}],[{blood:25,att:20,unlockWeapon:1},{blood:28,att:22,unlockWeapon:null},{blood:30,att:24,unlockWeapon:null},{blood:33,att:27,unlockWeapon:null},{blood:37,att:29,unlockWeapon:null},{blood:40,att:32,unlockWeapon:null},{blood:44,att:35,unlockWeapon:null},{blood:49,att:39,unlockWeapon:null},{blood:54,att:43,unlockWeapon:null},{blood:59,att:47,unlockWeapon:2},{blood:65,att:52,unlockWeapon:null},{blood:71,att:57,unlockWeapon:null},{blood:78,att:63,unlockWeapon:null},{blood:86,att:69,unlockWeapon:null},{blood:95,att:76,unlockWeapon:null},{blood:104,att:84,unlockWeapon:null},{blood:115,att:92,unlockWeapon:null},{blood:126,att:101,unlockWeapon:null},{blood:139,att:111,unlockWeapon:null},{blood:153,att:122,unlockWeapon:3},{blood:168,att:135,unlockWeapon:null},{blood:185,att:148,unlockWeapon:null},{blood:204,att:163,unlockWeapon:null},{blood:224,att:179,unlockWeapon:null},{blood:246,att:197,unlockWeapon:null},{blood:271,att:217,unlockWeapon:null},{blood:298,att:238,unlockWeapon:null},{blood:328,att:262,unlockWeapon:null},{blood:361,att:288,unlockWeapon:null},{blood:397,att:317,unlockWeapon:3},{blood:436,att:349,unlockWeapon:null},{blood:480,att:384,unlockWeapon:null},{blood:528,att:422,unlockWeapon:null},{blood:581,att:465,unlockWeapon:null},{blood:639,att:511,unlockWeapon:null},{blood:703,att:562,unlockWeapon:null},{blood:773,att:618,unlockWeapon:null},{blood:850,att:680,unlockWeapon:null},{blood:935,att:748,unlockWeapon:null},{blood:1029,att:823,unlockWeapon:4},{blood:1131,att:905,unlockWeapon:null},{blood:1245,att:996,unlockWeapon:null},{blood:1369,att:1095,unlockWeapon:null},{blood:1506,att:1205,unlockWeapon:null},{blood:1657,att:1325,unlockWeapon:null},{blood:1822,att:1458,unlockWeapon:null},{blood:2004,att:1604,unlockWeapon:null},{blood:2205,att:1764,unlockWeapon:null},{blood:2425,att:1940,unlockWeapon:null},{blood:2668,att:2134,unlockWeapon:5}],[{blood:35,att:80,unlockWeapon:1},{blood:38,att:86,unlockWeapon:null},{blood:42,att:93,unlockWeapon:null},{blood:45,att:101,unlockWeapon:null},{blood:49,att:109,unlockWeapon:null},{blood:54,att:118,unlockWeapon:null},{blood:59,att:127,unlockWeapon:null},{blood:64,att:137,unlockWeapon:null},{blood:70,att:148,unlockWeapon:null},{blood:76,att:160,unlockWeapon:2},{blood:83,att:173,unlockWeapon:null},{blood:90,att:187,unlockWeapon:null},{blood:98,att:201,unlockWeapon:null},{blood:107,att:218,unlockWeapon:null},{blood:117,att:235,unlockWeapon:null},{blood:127,att:254,unlockWeapon:null},{blood:139,att:274,unlockWeapon:null},{blood:151,att:296,unlockWeapon:null},{blood:165,att:320,unlockWeapon:null},{blood:180,att:345,unlockWeapon:3},{blood:196,att:373,unlockWeapon:null},{blood:214,att:403,unlockWeapon:null},{blood:233,att:435,unlockWeapon:null},{blood:254,att:470,unlockWeapon:null},{blood:277,att:507,unlockWeapon:null},{blood:302,att:548,unlockWeapon:null},{blood:329,att:592,unlockWeapon:null},{blood:359,att:639,unlockWeapon:null},{blood:391,att:690,unlockWeapon:null},{blood:426,att:745,unlockWeapon:3},{blood:464,att:805,unlockWeapon:null},{blood:506,att:869,unlockWeapon:null},{blood:552,att:939,unlockWeapon:null},{blood:601,att:1014,unlockWeapon:null},{blood:655,att:1095,unlockWeapon:null},{blood:714,att:1183,unlockWeapon:null},{blood:779,att:1277,unlockWeapon:null},{blood:849,att:1380,unlockWeapon:null},{blood:925,att:1490,unlockWeapon:null},{blood:1009,att:1609,unlockWeapon:4},{blood:1099,att:1738,unlockWeapon:null},{blood:1198,att:1877,unlockWeapon:null},{blood:1306,att:2027,unlockWeapon:null},{blood:1424,att:2189,unlockWeapon:null},{blood:1552,att:2364,unlockWeapon:null},{blood:1691,att:2554,unlockWeapon:null},{blood:1844,att:2758,unlockWeapon:null},{blood:2010,att:2979,unlockWeapon:null},{blood:2190,att:3217,unlockWeapon:null},{blood:2388,att:3474,unlockWeapon:5}]]),o("STAGE_MODE",u={NORMAL:1,PURSUE:2,REWARD:3}),o("STAGE_INFO",[{id:1,mode:u.NORMAL,name:"SceneGuide",boxBlood:0,bossID:0,enemyIDs:[1,2],enemyCounts:[[20,30],[5,10]],bloodScale:[.5,.5,20],attScale:[.1,.1,1],gold:10},{id:2,mode:u.NORMAL,name:"Scene1ENV2",boxBlood:0,bossID:0,enemyIDs:[1,2],enemyCounts:[[30,40],[15,20]],bloodScale:[1,2,20],attScale:[1,2,10],gold:10},{id:3,mode:u.REWARD,name:"SceneReward",boxBlood:1e3,bossID:0,enemyIDs:[1,2],enemyCounts:[[10,15],[10,15]],bloodScale:[1.4,4,20],attScale:[1.4,4,10],gold:10},{id:4,mode:u.NORMAL,name:"Scene1ENV3",boxBlood:0,bossID:0,enemyIDs:[1,2],enemyCounts:[[50,60],[20,30]],bloodScale:[1.6,6,20],attScale:[1.6,6,10],gold:10},{id:5,mode:u.NORMAL,name:"Scene1ENV4",boxBlood:0,bossID:3,enemyIDs:[1,2],enemyCounts:[[60,70],[15,20]],bloodScale:[2,8,20],attScale:[2,8,10],gold:10},{id:6,mode:u.NORMAL,name:"Scene1ENV5",boxBlood:0,bossID:0,enemyIDs:[1,2,3],enemyCounts:[[60,80],[10,15],[10,15]],bloodScale:[2.5,12,40],attScale:[2.5,12,30],gold:15},{id:7,mode:u.NORMAL,name:"Scene1ENV6",boxBlood:0,bossID:0,enemyIDs:[1,2,3],enemyCounts:[[60,80],[10,15],[10,15]],bloodScale:[3,16,40],attScale:[3,16,30],gold:15},{id:8,mode:u.PURSUE,name:"Scene1Pursue",boxBlood:0,bossID:0,enemyIDs:[1,2,3],enemyCounts:[[10,15],[5,10],[5,10]],bloodScale:[3.5,20,40],attScale:[3.5,20,30],gold:15},{id:9,mode:u.NORMAL,name:"Scene1ENV7",boxBlood:0,bossID:0,enemyIDs:[1,2,3],enemyCounts:[[60,80],[10,15],[10,15]],bloodScale:[4,24,40],attScale:[4,24,30],gold:15},{id:10,mode:u.NORMAL,name:"Scene1ENV8",boxBlood:0,bossID:4,enemyIDs:[1,2,3],enemyCounts:[[60,80],[10,15],[10,15]],bloodScale:[5,28,40],attScale:[5,28,30],gold:15},{id:11,mode:u.NORMAL,name:"Scene1ENV9",boxBlood:0,bossID:0,enemyIDs:[1,2,3,4],enemyCounts:[[60,80],[10,15],[10,15],[10,15]],bloodScale:[5.5,30,60],attScale:[5.5,30,50],gold:20},{id:12,mode:u.NORMAL,name:"Scene1ENV10",boxBlood:0,bossID:0,enemyIDs:[1,2,3,4],enemyCounts:[[60,80],[10,15],[10,15],[10,15]],bloodScale:[6,32,60],attScale:[6,32,50],gold:20},{id:13,mode:u.REWARD,name:"SceneReward",boxBlood:5e3,bossID:0,enemyIDs:[1,2,3,4],enemyCounts:[[60,80],[10,15],[10,15],[10,15]],bloodScale:[6.5,34,60],attScale:[6.5,34,50],gold:20},{id:14,mode:u.NORMAL,name:"Scene1ENV1",boxBlood:0,bossID:0,enemyIDs:[1,2,3,4],enemyCounts:[[60,80],[10,15],[10,15],[10,15]],bloodScale:[7,36,60],attScale:[7,36,50],gold:20},{id:15,mode:u.NORMAL,name:"Scene1ENV2",boxBlood:0,bossID:7,enemyIDs:[1,2,3,4],enemyCounts:[[60,80],[10,15],[10,15],[10,15]],bloodScale:[8,38,60],attScale:[8,38,50],gold:20},{id:16,mode:u.NORMAL,name:"Scene1ENV3",boxBlood:0,bossID:0,enemyIDs:[1,2,3,4],enemyCounts:[[70,90],[10,15],[10,15],[10,15]],bloodScale:[8.5,40,80],attScale:[8.5,40,70],gold:25},{id:17,mode:u.NORMAL,name:"Scene1ENV4",boxBlood:0,bossID:0,enemyIDs:[1,2,3,4],enemyCounts:[[70,90],[10,15],[10,15],[10,15]],bloodScale:[9,42,80],attScale:[9,42,70],gold:25},{id:18,mode:u.PURSUE,name:"Scene1Pursue",boxBlood:0,bossID:0,enemyIDs:[1,2,3,4],enemyCounts:[[10,15],[5,10],[5,10],[5,10]],bloodScale:[9.5,44,80],attScale:[9.5,44,70],gold:25},{id:19,mode:u.NORMAL,name:"Scene1ENV5",boxBlood:0,bossID:0,enemyIDs:[1,2,3,4],enemyCounts:[[70,90],[10,15],[10,15],[10,15]],bloodScale:[10,46,80],attScale:[10,46,70],gold:25},{id:20,mode:u.NORMAL,name:"Scene1ENV6",boxBlood:0,bossID:8,enemyIDs:[1,2,3,4],enemyCounts:[[70,90],[10,15],[10,15],[10,15]],bloodScale:[12,48,80],attScale:[12,48,70],gold:25},{id:21,mode:u.NORMAL,name:"Scene2ENV1",boxBlood:0,bossID:0,enemyIDs:[1,2,3,4],enemyCounts:[[70,90],[10,15],[10,15],[10,15]],bloodScale:[13,50,100],attScale:[13,50,90],gold:30},{id:22,mode:u.NORMAL,name:"Scene2ENV2",boxBlood:0,bossID:0,enemyIDs:[1,2,3,4],enemyCounts:[[70,90],[10,15],[10,15],[10,15]],bloodScale:[14,52,100],attScale:[14,52,90],gold:30},{id:23,mode:u.REWARD,name:"SceneReward",boxBlood:2e4,bossID:0,enemyIDs:[1,2,3,4],enemyCounts:[[70,90],[10,15],[10,15],[10,15]],bloodScale:[15,54,100],attScale:[15,54,90],gold:30},{id:24,mode:u.NORMAL,name:"Scene2ENV3",boxBlood:0,bossID:0,enemyIDs:[1,2,3,4],enemyCounts:[[70,90],[10,15],[10,15],[10,15]],bloodScale:[16,56,100],attScale:[16,56,90],gold:30},{id:25,mode:u.NORMAL,name:"Scene2ENV4",boxBlood:0,bossID:5,enemyIDs:[1,2,3,4],enemyCounts:[[70,90],[10,15],[10,15],[10,15]],bloodScale:[18,58,100],attScale:[18,58,90],gold:30},{id:26,mode:u.NORMAL,name:"Scene2ENV5",boxBlood:0,bossID:0,enemyIDs:[1,2,3,5],enemyCounts:[[80,100],[10,15],[10,15],[10,15]],bloodScale:[19,60,140],attScale:[19,60,130],gold:35},{id:27,mode:u.NORMAL,name:"Scene2ENV6",boxBlood:0,bossID:0,enemyIDs:[1,3,4,5],enemyCounts:[[80,100],[10,15],[10,15],[10,15]],bloodScale:[20,62,140],attScale:[20,62,130],gold:35},{id:28,mode:u.PURSUE,name:"Scene1Pursue",boxBlood:0,bossID:0,enemyIDs:[1,2,3,4],enemyCounts:[[10,15],[5,10],[5,10],[7,12]],bloodScale:[21,64,140],attScale:[21,64,130],gold:35},{id:29,mode:u.NORMAL,name:"Scene2ENV7",boxBlood:0,bossID:0,enemyIDs:[1,2,3,5],enemyCounts:[[80,100],[10,15],[10,15],[10,15]],bloodScale:[22,66,140],attScale:[22,66,130],gold:35},{id:30,mode:u.NORMAL,name:"Scene2ENV8",boxBlood:0,bossID:6,enemyIDs:[1,2,4,5],enemyCounts:[[80,100],[10,15],[10,15],[10,15]],bloodScale:[25,68,140],attScale:[25,68,130],gold:35},{id:31,mode:u.NORMAL,name:"Scene2ENV9",boxBlood:0,bossID:0,enemyIDs:[1,2,3,6],enemyCounts:[[80,100],[10,15],[10,15],[10,15]],bloodScale:[26,70,180],attScale:[26,70,170],gold:40},{id:32,mode:u.NORMAL,name:"Scene2ENV10",boxBlood:0,bossID:0,enemyIDs:[1,2,5,6],enemyCounts:[[80,100],[10,15],[10,15],[10,15]],bloodScale:[27,72,180],attScale:[27,72,170],gold:40},{id:33,mode:u.REWARD,name:"SceneReward",boxBlood:5e4,bossID:0,enemyIDs:[1,2,3,6],enemyCounts:[[80,100],[10,15],[10,15],[10,15]],bloodScale:[28,74,180],attScale:[28,74,170],gold:40},{id:34,mode:u.NORMAL,name:"Scene2ENV1",boxBlood:0,bossID:0,enemyIDs:[1,2,3,5],enemyCounts:[[80,100],[10,15],[10,15],[10,15]],bloodScale:[29,76,180],attScale:[29,76,170],gold:40},{id:35,mode:u.NORMAL,name:"Scene2ENV2",boxBlood:0,bossID:9,enemyIDs:[1,2,3,6],enemyCounts:[[80,100],[10,15],[10,15],[10,15]],bloodScale:[32,78,180],attScale:[32,78,170],gold:40},{id:36,mode:u.NORMAL,name:"Scene2ENV3",boxBlood:0,bossID:0,enemyIDs:[1,2,3,4],enemyCounts:[[100,120],[10,15],[10,15],[10,15]],bloodScale:[33,80,220],attScale:[33,80,210],gold:45},{id:37,mode:u.NORMAL,name:"Scene2ENV4",boxBlood:0,bossID:0,enemyIDs:[1,3,4,5],enemyCounts:[[100,120],[10,15],[10,15],[10,15]],bloodScale:[34,82,220],attScale:[34,82,210],gold:45},{id:38,mode:u.PURSUE,name:"Scene1Pursue",boxBlood:0,bossID:0,enemyIDs:[1,2,4,6],enemyCounts:[[10,15],[7,12],[7,12],[7,12]],bloodScale:[35,84,220],attScale:[35,84,210],gold:45},{id:39,mode:u.NORMAL,name:"Scene2ENV5",boxBlood:0,bossID:0,enemyIDs:[1,4,5,6],enemyCounts:[[100,120],[10,15],[10,15],[10,15]],bloodScale:[36,86,220],attScale:[36,86,210],gold:45},{id:40,mode:u.NORMAL,name:"Scene2ENV6",boxBlood:0,bossID:7,enemyIDs:[1,2,4,5],enemyCounts:[[100,120],[10,15],[10,15],[10,15]],bloodScale:[40,88,220],attScale:[40,88,210],gold:45}]),o("SHOP_FREE_TIME_LIMIT",3),o("SHOP_FREE_REWARD",[{type:t.BOX,id:4,count:3},{type:t.GOLD,id:0,count:5e3},{type:t.DIAMOND,id:0,count:30}]),o("SHOP_DAY_REWARD",[[{type:t.GOLD,id:0,count:500},{type:t.DIAMOND,id:0,count:5}],[{type:t.GOLD,id:0,count:500},{type:t.DIAMOND,id:0,count:5}],[{type:t.GOLD,id:0,count:1e3},{type:t.DIAMOND,id:0,count:10},{type:t.BOX,id:4,count:1}],[{type:t.GOLD,id:0,count:1500},{type:t.DIAMOND,id:0,count:15},{type:t.BOX,id:5,count:1}]]),o("SHOP_DAY_TIME",[60,300,900,1800]),o("SHOP_GOLD_PRICE",[{type:t.GOLD,id:0,count:1e3,price:10},{type:t.GOLD,id:0,count:7500,price:50},{type:t.GOLD,id:0,count:2e4,price:100},{type:t.GOLD,id:0,count:5e4,price:200}]),o("SOUND_TYPE",{BUTTON:"sounds/button",GAMEBGM:"sounds/gamebgm",MAINBGM:"sounds/mainbgm",ENEMYDEAD:"sounds/enemydead",BOSSSHOW:"sounds/bossshow",MAINPAGE:"sounds/mainpage",WEAPONSOUND:"sounds/weaponsound",PLAYERHURT:"sounds/playerhurt",LVUP:"sounds/lvup",WIN:"sounds/win",LOSE:"sounds/lose",BOOMEXP:"sounds/boomExplode",HUOJIANEXP:"sounds/huojianExplode",HUOJIAN:"sounds/huojiian",BOOMFLY:"sounds/boomFly"}),o("SIGN_INFO",[{id:0,reward:[{type:t.GOLD,id:0,count:1e4}]},{id:1,reward:[{type:t.DIAMOND,id:0,count:50}]},{id:2,reward:[{type:t.BOX,id:4,count:2}]},{id:3,reward:[{type:t.GOLD,id:0,count:2e4}]},{id:4,reward:[{type:t.DIAMOND,id:0,count:100}]},{id:5,reward:[{type:t.BOX,id:4,count:3}]},{id:6,reward:[{type:t.BOX,id:5,count:5}]}]),o("GUIDE_INFO",[{id:0,playerID:1,word:"Captain, help is on the way. Please stay calm!",location:0,posType:0,posY:-300},{id:1,playerID:0,word:"Roger that!",location:1,posType:0,posY:-300},{id:2},{id:3},{id:4,posType:2,maskX:-300,maskY:70,handX:-220,handY:40,handScale:1,wordX:-300,wordY:160,word:"Click the Achievements TAB"},{id:5,posType:1,maskX:235,maskY:-730,handX:160,handY:-790,handScale:-1,wordX:130,wordY:-880,word:"Receive achievement reward"},{id:6,posType:1,maskX:275,maskY:-450,handX:190,handY:-490,handScale:-1,wordX:130,wordY:-550,word:"Receive rank award"},{id:7,posType:2,maskX:0,maskY:220,handX:100,handY:160,handScale:1,wordX:-95,wordY:320,word:"Click to continue fighting"},{id:8,posType:2,maskX:170,maskY:70,handX:250,handY:40,handScale:1,wordX:100,wordY:160,word:"Click on the Treasure Chest TAB"},{id:9,posType:2,maskX:-250,maskY:600,handX:-160,handY:550,handScale:1,wordX:-200,wordY:450,word:"Click to open the treasure chest"},{id:10,posType:2,maskX:-165,maskY:70,handX:-70,handY:40,handScale:1,wordX:-230,wordY:160,word:"Click the Roles TAB"},{id:11,posType:1,maskX:-235,maskY:-350,handX:-220,handY:-400,handScale:1,wordX:-220,wordY:-500,word:"Enter the role screen"},{id:12,posType:0,maskX:0,maskY:-450,handX:100,handY:-500,handScale:1,wordX:-100,wordY:-600,word:"Click to upgrade the role"},{id:13,posType:2,maskX:0,maskY:220,handX:100,handY:160,handScale:1,wordX:-95,wordY:320,word:"Click to continue fighting"}]),o("PURSUE_STAGE_INFO",[{id:0,playerID:2,word:"Captain, the enemy is too strong here. What do we do?",location:0,posType:0,posY:-300},{id:1,playerID:0,word:"Don't panic! Our safe camp is ahead!",location:1,posType:0,posY:-300},{id:0,playerID:2,word:"Let's avoid fighting and head to camp as soon as possible",location:0,posType:0,posY:-300}]),o("REWARD_STAGE_INFO",[{id:0,playerID:1,word:"Captain, I don't think there's an enemy here?",location:0,posType:0,posY:-300},{id:1,playerID:0,word:"Looks like we're in an enemy vault",location:1,posType:0,posY:-300},{id:0,playerID:1,word:"Watch me do it! Destroy it all!!",location:0,posType:0,posY:-300}]),o("XIANSHI_REWARDS",[{type:t.GOLD,id:0,count:1e3},{type:t.DIAMOND,id:0,count:10},{type:t.CARD,id:0,count:1}]),o("STAGE_TASK_INFO",[{id:0,type:[1,2,4],count:[60,0,10]},{id:1,type:[2,3,4],count:[0,1,20]},{id:2,type:[2,3,5],count:[0,3,5]},{id:3,type:[1,3,5],count:[60,3,5]},{id:4,type:[1,3,4],count:[60,5,40]},{id:5,type:[5,3,2],count:[5,3,0]},{id:6,type:[3,2,1],count:[5,0,60]},{id:7,type:[1,3,4],count:[60,2,20]},{id:8,type:[3,5,2],count:[3,5,0]},{id:9,type:[5,3,2],count:[8,5,0]},{id:10,type:[2,1,3],count:[0,60,3]},{id:11,type:[1,3,5],count:[60,5,5]},{id:12,type:[2,1,3],count:[0,60,5]},{id:13,type:[1,2,3],count:[60,0,3]},{id:14,type:[2,3,5],count:[0,5,10]},{id:15,type:[3,2,1],count:[3,0,60]},{id:16,type:[5,2,3],count:[8,0,5]},{id:17,type:[1,2,4],count:[60,0,15]},{id:18,type:[3,5,2],count:[3,10,0]},{id:19,type:[2,3,5],count:[0,5,10]},{id:20,type:[2,1,3],count:[0,60,3]},{id:21,type:[1,3,5],count:[60,5,5]},{id:22,type:[2,1,3],count:[0,60,5]},{id:23,type:[1,2,3],count:[60,0,3]},{id:24,type:[2,3,5],count:[0,5,10]},{id:25,type:[5,3,2],count:[5,3,0]},{id:26,type:[3,2,1],count:[5,0,60]},{id:27,type:[1,3,4],count:[60,2,20]},{id:28,type:[3,5,2],count:[3,5,0]},{id:29,type:[5,3,2],count:[8,5,0]},{id:30,type:[3,2,1],count:[3,0,60]},{id:31,type:[5,2,3],count:[8,0,5]},{id:32,type:[1,2,4],count:[60,0,15]},{id:33,type:[3,5,2],count:[3,10,0]},{id:34,type:[2,3,5],count:[0,5,10]},{id:35,type:[1,2,4],count:[60,0,10]},{id:36,type:[2,3,4],count:[0,1,20]},{id:37,type:[2,3,5],count:[0,3,5]},{id:38,type:[1,3,5],count:[60,3,5]},{id:39,type:[1,3,4],count:[60,5,40]}]),l._RF.pop()}}}));

System.register("chunks:///UIGuideCover.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./Tools.js"],(function(e,o){var t,n,s,i,a,d,r,c,h,l,u,m,C,p,v;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){t=e.inherits,n=e.classCallCheck,s=e.possibleConstructorReturn,i=e.getPrototypeOf,a=e.createClass},function(e){d=e.cclegacy,r=e._decorator,c=e.ButtonComponent,h=e.LabelComponent,l=e.Component},function(e){u=e.GUIDE_INFO},function(e){m=e.Tools}],execute:function(){d._RF.push({},"84c55zuNetNqpOBcC6qLecF","UIGuideCover",void 0),v=r.ccclass,r.property,e("UIGuideCover",(C=v("UIGuideCover"),C(p=function(e){function o(){var e,t;n(this,o);for(var a=arguments.length,d=new Array(a),r=0;r<a;r++)d[r]=arguments[r];return(t=s(this,(e=i(o)).call.apply(e,[this].concat(d)))).closeCb=null,t._timer=0,t}return t(o,e),a(o,[{key:"init",value:function(e,o){this.closeCb=o;var t=u[e],n=this.node.getChildByName("Mask"),s=this.node.getChildByName("Btn").getComponent(c);m.addClickEvent(this.node,s,"onBtnClick","UIGuideCover");var i=this.node.getChildByName("Hand");this.handNode=i.getChildByName("Body");var a=this.node.getChildByName("Word").getComponent(h);a.string=t.word;var d=cc.winSize.height;i.setScale(t.handScale,1,1),0==t.posType?(n.setPosition(t.maskX,t.maskY,0),s.node.setPosition(t.maskX,t.maskY,0),i.setPosition(t.handX,t.handY,0),a.node.setPosition(t.wordX,t.wordY,0)):1==t.posType?(n.setPosition(t.maskX,d/2+t.maskY,0),s.node.setPosition(t.maskX,d/2+t.maskY,0),i.setPosition(t.handX,d/2+t.handY,0),a.node.setPosition(t.wordX,d/2+t.wordY,0)):2==t.posType&&(n.setPosition(t.maskX,t.maskY-d/2,0),s.node.setPosition(t.maskX,t.maskY-d/2,0),i.setPosition(t.handX,t.handY-d/2,0),a.node.setPosition(t.wordX,t.wordY-d/2,0))}},{key:"onBtnClick",value:function(){this.closeCb&&this.closeCb(),this.node.removeFromParent(),this.node.destroy()}},{key:"update",value:function(e){this._timer+=3*e,this.handNode.setPosition(-10*Math.sin(this._timer),10*Math.sin(this._timer),0)}}]),o}(l))||p)),d._RF.pop()}}}));

System.register("chunks:///AdsMgr.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Tools.js"],(function(e,n){var o,s,i,r,t,a;return{setters:[function(e){o=e.createClass,s=e.classCallCheck},function(e){i=e.cclegacy},function(e){r=e.Tools}],execute:function(){i._RF.push({},"2196aRtU1pMaaUwtUmeI1IZ","AdsMgr",void 0),t=cc._decorator,t.ccclass,t.property,a=function(){function e(){s(this,e)}return o(e,null,[{key:"showVideoAd",value:function(e){r.playSounds(!1),MiniGameAds.isRewardvideoReady()?MiniGameAds.showRewardedVideo().then((function(){console.info("====> show RewardedVideo success"),e(),r.playSounds(!0)})).catch((function(e){console.error("====> show RewardedVideo error: "+e.message)})):console.info("====> RewardedVideo not ready")}},{key:"showInterAd",value:function(){var e=window.MiniGameAds.isInterstitialReady();console.log("############showInterAd"+e),e?window.MiniGameAds.showInterstitial().then((function(){console.info("====> show interstitial success")})).catch((function(e){console.error("====> show interstitial error: "+e.message)})):console.info("====> interstitial not ready")}},{key:"showBannerAd",value:function(){var e=MiniGameAds.isBannerReady();console.log("############showBannerAd"+e),e?MiniGameAds.showBanner().then((function(){console.info("====> show banner success")})).catch((function(e){console.error("====> show banner error: "+e.message)})):console.info("====> banner not ready")}}]),e}(),i._RF.pop(),e("default",a)}}}));

System.register("chunks:///UIReward.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./AdsMgr.js","./DataManager.js","./Tools.js"],(function(e,t){var n,o,i,r,s,a,c,u,d,l,h,g,p,m,C,y,f,w,I;return e({_dec:void 0,_class:void 0}),{setters:[function(e){n=e.inherits,o=e.createClass,i=e.classCallCheck,r=e.possibleConstructorReturn,s=e.getPrototypeOf,a=e.asyncToGenerator},function(e){c=e.cclegacy,u=e._decorator,d=e.Component,l=e.SpriteComponent,h=e.LabelComponent},function(e){g=e.SOUND_TYPE,p=e.ITEMTYPE},function(e){m=e.default},function(e){C=e.default},function(e){y=e.Tools}],execute:function(){c._RF.push({},"f2357AYUJxFz5RuBUyvJgfH","UIReward",void 0),I=u.ccclass,u.property,e("UIReward",(f=I("UIReward"),f(w=function(e){function t(){return i(this,t),r(this,s(t).apply(this,arguments))}var c;return n(t,e),o(t,[{key:"init",value:(c=a(regeneratorRuntime.mark((function e(t,n,o){var i,r,s,a,c,u,d,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.rewardType=t,this.rewardID=n,this.rewardCount=o,y.showBanner(!0),(i=this.node.getChildByName("BG")).width=cc.winSize.width,i.height=cc.winSize.height,r=this.node.getChildByName("Action"),s=r.getChildByName("Icon").getComponent(l),a=r.getChildByName("Icon1").getComponent(l),c=r.getChildByName("Count").getComponent(h),u=r.getChildByName("AllCount").getComponent(h),d=r.getChildByName("Desc").getComponent(h),g=r.getChildByName("Name").getComponent(h),c.string=""+o,g.string=C.instance.getItemName(t,n),d.string="Your "+g.string+":",t==p.GOLD?u.string=C.instance.gold.toString():t==p.DIAMOND?u.string=C.instance.diamond.toString():u.string=""+o,C.instance.setItemIcon(s,t,n),C.instance.setItemIcon(a,t,n);case 20:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return c.apply(this,arguments)})},{key:"btnDoubleClick",value:function(){var e=function(){C.instance.sendReward(this.rewardType,this.rewardID,this.rewardCount),y.ShowTip("Double reward"),this.closeMine(),y.reportAnalytics("观看视频_等级奖励双倍_完成")}.bind(this);m.showVideoAd(e)}},{key:"closeMine",value:function(){y.playSound(g.BUTTON),this.node.removeFromParent(),this.node.destroy(),y.showBanner(!1)}}]),t}(d))||w)),c._RF.pop()}}}));

System.register("chunks:///UIUnlockPlayer.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./DataManager.js","./Tools.js"],(function(e,t){var n,o,i,c,s,l,a,r,u,h,d,p,C,g,m,f,y,B,k,v;return e({_dec:void 0,_class:void 0}),{setters:[function(e){n=e.inherits,o=e.createClass,i=e.classCallCheck,c=e.possibleConstructorReturn,s=e.getPrototypeOf},function(e){l=e.cclegacy,a=e._decorator,r=e.ButtonComponent,u=e.LabelComponent,h=e.SpriteComponent,d=e.tween,p=e.Vec3,C=e.Component},function(e){g=e.ITEMTYPE,m=e.PLAYER_INFO},function(e){f=e.default},function(e){y=e.Tools}],execute:function(){l._RF.push({},"3bf29cl0qpKf7PvGTiBEmDC","UIUnlockPlayer",void 0),v=a.ccclass,a.property,e("UIUnlockPlayer",(B=v("UIUnlockPlayer"),B(k=function(e){function t(){return i(this,t),c(this,s(t).apply(this,arguments))}return n(t,e),o(t,[{key:"init",value:function(e){var t=this,n=this.node.getChildByName("BG"),o=n.getComponent(r);n.width=cc.winSize.width,n.height=cc.winSize.height;var i=this.node.getChildByName("Left"),c=this.node.getChildByName("Right"),s=i.getChildByName("Name").getComponent(u),l=i.getChildByName("Icon").getComponent(h);f.instance.setItemIcon(l,g.CARD,e),s.string=m[e].name,d(i).to(.3,{position:new p(-375,0,0)}).start(),d(c).to(.3,{position:new p(375,89,0)}).start(),this.scheduleOnce((function(){y.addClickEvent(t.node,o,"onBtnBgClick","UIUnlockPlayer")}),1)}},{key:"onBtnBgClick",value:function(){this.node.removeFromParent(),this.node.destroy()}}]),t}(C))||k)),l._RF.pop()}}}));

System.register("chunks:///UITest.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./AdsMgr.js","./DataManager.js","./Tools.js"],(function(e,t){var i,n,o,s,r,a,c,l,u,d,h,p,y,f,v,g,C,I,T,_,D,m,B,k,P,U;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inherits,o=e.classCallCheck,s=e.possibleConstructorReturn,r=e.getPrototypeOf,a=e.initializerDefineProperty,c=e.assertThisInitialized,l=e.createClass},function(e){u=e.cclegacy,d=e._decorator,h=e.SpriteComponent,p=e.director,y=e.Texture2D,f=e.Component},function(e){v=e.PLAYER_INFO,g=e.SOUND_TYPE},function(e){C=e.default},function(e){I=e.default},function(e){T=e.Tools}],execute:function(){u._RF.push({},"1809dHZwmNOEpr4KtSj2331","UITest",void 0),P=d.ccclass,U=d.property,e("UITest",(_=P("UITest"),D=U(h),_((k=i((B=function(e){function t(){var e,i;o(this,t);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return i=s(this,(e=r(t)).call.apply(e,[this].concat(l))),a(i,"icon",k,c(i)),i.playerID=-1,i}return n(t,e),l(t,[{key:"init",value:function(e){var t=this.node.getChildByName("BG");t.width=p.getWinSize().width,t.height=p.getWinSize().height,this.closeCB=e;for(var i=[],n=0;n<6;n++)I.instance.isUnlockPlayer(n)||i.push(n);i=i.sort((function(e,t){return Math.random()>.5?1:-1}));var o=v[i[0]];this.playerID=i[0],T.setImage(this.icon,"icons/player/playericon"+(o.id+1),y)}},{key:"onBtnVideoClick",value:function(){T.playSound(g.BUTTON);var e=function(){I.instance.testPlayerID=this.playerID,this.destroyMine()}.bind(this);C.showVideoAd(e)}},{key:"onBtnNoClick",value:function(){if(T.playSound(g.BUTTON),I.instance.isWhiteUser()){var e=function(){I.instance.testPlayerID=this.playerID,this.destroyMine()}.bind(this);(function(){this.destroyMine()}).bind(this);C.showVideoAd(e)}else this.destroyMine()}},{key:"destroyMine",value:function(){this.closeCB&&this.closeCB(),this.node.removeFromParent(),this.node.destroy()}}]),t}(f)).prototype,"icon",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=B))||m)),u._RF.pop()}}}));

System.register("chunks:///UIEmpty.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./UIMain.js","./Tools.js"],(function(t,e){var i,n,o,c,s,a,r,l,u,h,p,v,y,d,m,C;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){i=t.inherits,n=t.classCallCheck,o=t.possibleConstructorReturn,c=t.getPrototypeOf,s=t.createClass},function(t){a=t.cclegacy,r=t._decorator,l=t.director,u=t.Component},function(t){h=t.ITEMTYPE,p=t.SOUND_TYPE},function(t){v=t.UIMain},function(t){y=t.Tools}],execute:function(){a._RF.push({},"4c45ajCC0REvKLPjQtJpMOz","UIEmpty",void 0),C=r.ccclass,r.property,t("UIEmpty",(d=C("UIEmpty"),d(m=function(t){function e(){var t,i;n(this,e);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(i=o(this,(t=c(e)).call.apply(t,[this].concat(a)))).type=-1,i}return i(e,t),s(e,[{key:"init",value:function(t,e){this.type=t,this.jumpCB=e;var i=this.node.getChildByName("BG");i.width=l.getWinSize().width,i.height=l.getWinSize().height;var n=this.node.getChildByName("type1"),o=this.node.getChildByName("type2"),c=this.node.getChildByName("type3");t==h.GOLD?(n.active=!0,o.active=!1,c.active=!1):t==h.DIAMOND?(n.active=!1,o.active=!0,c.active=!1):t==h.CARD?(n.active=!1,o.active=!1,c.active=!0):(n.active=!0,o.active=!1,c.active=!1)}},{key:"onBtnCloseClick",value:function(){y.playSound(p.BUTTON),this.node.removeFromParent(),this.node.destroy()}},{key:"onBtnJumpClick",value:function(){y.playSound(p.BUTTON),this.jumpCB&&this.jumpCB(),this.type==h.GOLD||this.type==h.DIAMOND?v.instance.onBtnBottomClick(null,"4"):v.instance.onBtnBottomClick(null,"3"),this.node.removeFromParent(),this.node.destroy()}}]),e}(u))||m)),a._RF.pop()}}}));

System.register("chunks:///UIMain.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./AdsMgr.js","./UIReward.js","./UIUnlockPlayer.js","./UITest.js","./UIEmpty.js","./DataManager.js","./Tools.js"],(function(e,t){var i,n,o,a,s,r,c,h,g,u,l,d,S,f,m,p,v,I,b,y,C,B,w,k,D,N,T,x,_,R,G,U,P,M,E,O,z,L,A,K,J,Y,j,H,F,X,W,V,q,Q,Z,$,ee,te,ie,ne,oe,ae,se,re,ce,he,ge,ue,le,de,Se,fe,me,pe,ve,Ie,be,ye,Ce,Be,we,ke,De,Ne,Te,xe,_e,Re,Ge;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_dec9:void 0,_dec10:void 0,_dec11:void 0,_dec12:void 0,_dec13:void 0,_dec14:void 0,_dec15:void 0,_dec16:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_descriptor8:void 0,_descriptor9:void 0,_descriptor10:void 0,_descriptor11:void 0,_descriptor12:void 0,_descriptor13:void 0,_descriptor14:void 0,_descriptor15:void 0,_class3:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inherits,o=e.classCallCheck,a=e.possibleConstructorReturn,s=e.getPrototypeOf,r=e.initializerDefineProperty,c=e.assertThisInitialized,h=e.createClass,g=e.asyncToGenerator},function(e){u=e.cclegacy,l=e._decorator,d=e.Node,S=e.CameraComponent,f=e.SpriteComponent,m=e.ButtonComponent,p=e.ModelComponent,v=e.tween,I=e.Vec3,b=e.SpriteFrame,y=e.LabelComponent,C=e.EventHandler,B=e.Vec4,w=e.director,k=e.systemEvent,D=e.Component,N=e.Texture2D,T=e.Size,x=e.ToggleContainerComponent,_=e.ToggleComponent,R=e.Prefab,G=e.instantiate},function(e){U=e.SOUND_TYPE,P=e.LV_REWARD,M=e.CHENGJIU_REWARD,E=e.TASK_REWARD,O=e.PLAYER_INFO,z=e.BOX_INFO,L=e.ITEMTYPE,A=e.STAGE_INFO,K=e.STAGE_TASK_INFO,J=e.SHOP_DAY_TIME},function(e){Y=e.default},function(e){j=e.UIReward},function(e){H=e.UIUnlockPlayer},function(e){F=e.UITest},function(e){X=e.UIEmpty},function(e){W=e.default},function(e){V=e.Tools}],execute:function(){u._RF.push({},"13b53H0iT5IEqr/kCiRQSiW","UIMain",void 0),Re=l.ccclass,Ge=l.property,e("UIMain",(q=Re("UIMain"),Q=Ge(d),Z=Ge(d),$=Ge(d),ee=Ge(d),te=Ge(d),ie=Ge(d),ne=Ge(d),oe=Ge(S),ae=Ge(f),se=Ge(S),re=Ge(d),ce=Ge(d),he=Ge(m),ge=Ge(m),ue=Ge(p),q((_e=xe=function(e){function t(){var e,i;o(this,t);for(var n=arguments.length,h=new Array(n),g=0;g<n;g++)h[g]=arguments[g];return i=a(this,(e=s(t)).call.apply(e,[this].concat(h))),r(i,"btnStageLeft",Se,c(i)),r(i,"btnStageRight",fe,c(i)),i.uiSet=null,r(i,"d3",me,c(i)),r(i,"move",pe,c(i)),r(i,"uiNode",ve,c(i)),r(i,"uiTopNode",Ie,c(i)),r(i,"uiGuideNode",be,c(i)),r(i,"camera",ye,c(i)),r(i,"title",Ce,c(i)),r(i,"playerCamera",Be,c(i)),r(i,"playerShowNode",we,c(i)),r(i,"touchNode",ke,c(i)),r(i,"btnKongTou",De,c(i)),r(i,"startBtn",Ne,c(i)),r(i,"bg3ds",Te,c(i)),i.topBgs=[],i.bottomBgs=[],i.bottomBtns=[],i.bottomIcons=[],i.bottomHigh=null,i.stageUIs=[],i.btnInfo=[[-270,-98,37,172,307],[-307,-135,37,172,307],[-307,-172,0,172,307],[-307,-172,-37,135,307],[-307,-172,-37,98,270]],i.reddots=[],i.isDead=!1,i.chooseStage=0,i.isTweeningPage=!1,i.bottomNode=null,i.curSubStagePage=-1,i.curPageIndex=2,i.offset=0,i.isMove=!1,i.testoffset=0,i._isShowSign=!1,i._isCanTouchStartGame=!0,i._isAutoRefres=!0,i._isCanShowKongTou=!0,i}var i,u,l,S,p,D,q,Q,Z,$;return n(t,e),h(t,[{key:"onLoad",value:function(){t.instance=this}},{key:"start",value:($=g(regeneratorRuntime.mark((function e(){var t,i,n,o,a,s,r,c,h,g,u,l,d,S;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(W.instance.isReportGoMain||(W.instance.isReportGoMain=!0,W.instance.umatrackEvent("进入首页")),this.initBottomBtns(),k.on(cc.SystemEventType.KEY_UP,this.onKeyUp,this),W.instance.isWhiteUser()?(t=Math.random()>W.instance.whiteInfo.KONGTOU,this.btnKongTou.node.active=!!t):this.btnKongTou.node.active=!1,i=this.node.getChildByName("Top"),this.bottomNode=this.node.getChildByName("Bottom"),this.center=this.node.getChildByName("Center"),n=this.center.getChildByName("ToggleGroup").getComponent(x),o=i.getChildByName("Lv"),a=o.getComponent(m),this.topExpBar=o.getChildByName("Bar"),this.btnSetNode=i.getChildByName("BtnSet"),this.uiSet=this.btnSetNode.getChildByName("UISet"),s=this.uiSet.getChildByName("Sound").getComponent(_),r=this.uiSet.getChildByName("Shake").getComponent(_),this.btnSignNode=i.getChildByName("BtnSign"),this.signReddot=this.btnSignNode.getChildByName("reddot"),this.stageNode=this.bottomNode.getChildByName("Stage"),this.stageDesc=this.bottomNode.getChildByName("StageDesc").getComponent(y),this.topLv=o.getChildByName("Lv").getComponent(y),this.topExp=o.getChildByName("exp").getComponent(y),this.topGold=i.getChildByName("Gold").getChildByName("value").getComponent(y),this.topDiammond=i.getChildByName("Diamond").getChildByName("value").getComponent(y),c=i.getChildByName("Gold").getComponent(m),h=i.getChildByName("Diamond").getComponent(m),this.uiStageInfo=this.center.getChildByName("StageInfo"),(g=this.uiStageInfo.getChildByName("BG")).width=cc.winSize.width,g.height=cc.winSize.height,this.uiStageInfo.active=!1,this.schedule(this.refreshMainTop,.5),cc.winSize.height/cc.winSize.width>2?(i.setPosition(0,cc.winSize.height/2-35,0),this.uiNode.position=new I(0,-35,0)):i.setPosition(0,cc.winSize.height/2,0),s.isChecked=1!=W.instance.soundOpen,r.isChecked=1!=W.instance.shakeOpen,u=this.node.parent.getChildByName("BGTop"),l=this.node.parent.getChildByName("BGBottom"),u.setPosition(0,cc.winSize.height/2,0),l.setPosition(0,-cc.winSize.height/2,0),d=1;d<=3;d++)this.topBgs.push(u.getChildByName("BG"+d)),this.bottomBgs.push(l.getChildByName("BG"+d));return V.addClickEvent(this.node,a,"cheatLv","UIMain"),V.addClickEvent(this.node,c,"cheatGold","UIMain"),V.addClickEvent(this.node,h,"cheatDiamond","UIMain"),this.isTweeningPage=!1,n.toggleItems[W.instance.curStageLv].isChecked=!0,n.updateToggles(n.toggleItems[W.instance.curStageLv]),this.showGuide(),this.showSignUI(),S=null,e.next=51,V.loadRes("prefabs/ui/UIShengYa",R);case 51:return S=e.sent,this.uiNode&&(this.cellShengYa=G(S),this.uiNode.addChild(this.cellShengYa),this.cellShengYa.active=!1),e.next=55,V.loadRes("prefabs/ui/UIJiaoSe",R);case 55:return S=e.sent,this.uiNode&&(this.cellJiaose=G(S),this.uiNode.addChild(this.cellJiaose),this.cellJiaose.active=!1),W.instance.jumpPlayerPage&&(W.instance.jumpPlayerPage=!1,this.onBtnBottomClick(null,"1")),e.next=60,V.loadRes("prefabs/ui/UIBox",R);case 60:return S=e.sent,this.uiNode&&(this.cellBox=G(S),this.uiNode.addChild(this.cellBox),this.cellBox.active=!1),e.next=64,V.loadRes("prefabs/ui/UIShop",R);case 64:if(S=e.sent,this.uiNode&&(this.cellShop=G(S),this.uiNode.addChild(this.cellShop),this.cellShop.active=!1),this.isDead||!this){e.next=70;break}return e.next=69,V.playBGMusic(U.MAINBGM);case 69:this.mainBgm=e.sent;case 70:this.schedule(this.updateReddot,1);case 71:case"end":return e.stop()}}),e,this)}))),function(){return $.apply(this,arguments)})},{key:"initStageInfo",value:function(e){var t=this.center.getChildByName("Logo"),i=this.center.getChildByName("BtnLeft"),n=this.center.getChildByName("BtnRight"),o=this.isTweeningPage?.3:0;0==e?(v(t).to(o,{position:new I(0,0,0)}).start(),i.active=!1,n.active=!0,this.move.active=!0,this.stageDesc.node.active=!1,this.stageDesc.string="Mission completed",V.setImage(this.title,"textures/ui/main_title1",b)):1==e?(v(t).to(o,{position:new I(-750,0,0)}).start(),i.active=!0,n.active=!0,this.move.active=W.instance.getSubStageID()>19,this.stageDesc.node.active=W.instance.getSubStageID()<20,this.stageDesc.string="Unlock after clearing Chapter 1",V.setImage(this.title,"textures/ui/main_title2",b)):2==e?(v(t).to(o,{position:new I(-1500,0,0)}).start(),i.active=!0,n.active=!0,this.move.active=!1,this.stageDesc.node.active=!0,this.stageDesc.string="Unlock after clearing Chapter 2",V.setImage(this.title,"textures/ui/main_title3",b)):3==e?(v(t).to(o,{position:new I(-2250,0,0)}).start(),i.active=!0,n.active=!0,this.move.active=!1,this.stageDesc.node.active=!0,this.stageDesc.string="Unlock after clearing Chapter 3",V.setImage(this.title,"textures/ui/main_title4",b)):4==e?(v(t).to(o,{position:new I(-3e3,0,0)}).start(),i.active=!0,n.active=!0,this.move.active=!1,this.stageDesc.node.active=!0,this.stageDesc.string="Unlock after clearing Chapter 4",V.setImage(this.title,"textures/ui/main_title5",b)):console.error("纳尼"),this.isTweeningPage=!0;var a=0;this.chooseStage;a=(W.instance.getSubStageID()+1)%20>=10?1:0,this.curSubStagePage>-1&&(a=this.curSubStagePage);for(var s=10*a,r=1;r<=10;r++){var c=Math.floor(s+r-1),h=this.stageNode.getChildByName("Stage"+r),g=h.getComponent(m),u=h.getChildByName("Cur"),l=h.getChildByName("Done"),d=h.getChildByName("Num").getComponent(y),S=h.getChildByName("Choose");S.active=!1;for(var f=W.instance.getStageStarInfo(20*this.chooseStage+c+1),p=0;p<3;p++){var C=h.getChildByName("HighStar"+(p+1));C.active=!!f&&1==f.stars[p]}S.active=W.instance.getSubStageID()==20*this.chooseStage+c,d.string=s>19?Math.floor(c-19).toString():Math.floor(c+1).toString(),u.active=c==W.instance.getSubStageID(),l.active=W.instance.getSubStageID()>c,W.instance.getSubStageID()>19&&0==e?(u.active=!1,l.active=!0):W.instance.getSubStageID()<20&&1==e?(u.active=!1,l.active=!1):e>1&&(u.active=!1,l.active=!1),0==g.clickEvents.length&&V.addClickEvent(this.node,g,"onBtnChooseStageClick","UIMain",""+r)}var B=this.stageNode.getChildByName("Stage1").getChildByName("Num").getComponent(y);this.btnStageRight.active=B.string.length<2,this.btnStageLeft.active=!this.btnStageRight.active}},{key:"initBottomBtns",value:function(){var e=this.node.getChildByName("Bottom");this.bottomHigh=e.getChildByName("High");for(var t=1;t<=5;t++)this.bottomBtns.push(e.getChildByName("Btn"+t).getComponent(m)),this.bottomIcons.push(e.getChildByName("Icon"+t)),this.reddots.push(e.getChildByName("Icon"+t).getChildByName("reddot"));for(var i=0;i<this.bottomBtns.length;i++){var n=this.bottomBtns[i],o=new C;o.target=this.node,o.handler="onBtnBottomClick",o.component="UIMain",o.customEventData=""+i,n.clickEvents.push(o)}}},{key:"onBtnBottomClick",value:function(e,t){for(var i=parseInt(t),n=0;n<this.bottomBtns.length;n++){var o=this.bottomBtns[n];if(o.node.width=n==i?209:135,o.node.position=new I(this.btnInfo[i][n],o.node.position.y,0),n==i){var a=new I(o.node.position.x,o.node.position.y+20,o.node.position.z);v(this.bottomIcons[n]).to(.2,{position:a}).start(),v(this.bottomIcons[n]).to(.2,{scale:new I(1,1,1)}).start()}else v(this.bottomIcons[n]).to(.2,{position:o.node.position}).start(),v(this.bottomIcons[n]).to(.2,{scale:new I(.8,.8,.8)}).start()}var s=new I(this.bottomBtns[i].node.position.x,this.bottomHigh.position.y,0);v(this.bottomHigh).to(.2,{position:s}).start(),this.handlePageChange(i)}},{key:"handlePageChange",value:(Z=g(regeneratorRuntime.mark((function e(t){var i,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V.playSound(U.MAINPAGE),this.curPageIndex!=t){e.next=3;break}return e.abrupt("return");case 3:w.getScene().emit("hidePopPanel"),this.cellShengYa&&(this.cellShengYa.active=!1),this.cellJiaose&&(this.cellJiaose.active=!1),this.cellBox&&(this.cellBox.active=!1),this.cellShop&&(this.cellShop.active=!1),i=t,0==t?this.cellShengYa?(i=t,this.cellShengYa.active=!0,w.getScene().emit("refreshShengya")):i=2:1==t?this.cellJiaose?(i=t,this.cellJiaose.active=!0,w.getScene().emit("refreshJiaoSe")):i=2:2==t?(i=t,7==W.instance.guideID?(n=function(){W.instance.guideID=8,this.onBtnStartGame(),localStorage.setItem("guideID",W.instance.guideID.toString())}.bind(this),W.instance.guideGo(n)):13==W.instance.guideID&&(o=function(){W.instance.guideID=14,this.onBtnStartGame(),localStorage.setItem("guideID",W.instance.guideID.toString())}.bind(this),W.instance.guideGo(o))):3==t?this.cellBox?(i=t,this.cellBox.active=!0,w.getScene().emit("refreshBox")):i=2:4==t&&(this.cellShop?(i=t,this.cellShop.active=!0,w.getScene().emit("refreshShop")):i=2),this.curPageIndex=i,this.center.active=2==i,this.move.active=2==i,this.btnSetNode.active=2==i,this.btnSignNode.active=2==i,this.stageNode.active=2==i;case 16:case"end":return e.stop()}}),e,this)}))),function(e){return Z.apply(this,arguments)})},{key:"update",value:function(e){if(!(e>2)){this.offset+=.1*e,this.testoffset+=1;for(var t=0;t<3;t++)this.bg3ds[t].material.setProperty("tilingOffset",new B(4,9,-this.offset/2,this.offset))}}},{key:"onBtnPrePage",value:function(){V.playSound(U.BUTTON),W.instance.chooseStageID=-1,W.instance.chooseSubStageID=-1,this.curSubStagePage=-1,this.chooseStage=V.clampf(this.chooseStage-1,0,99),this.initStageInfo(this.chooseStage)}},{key:"onBtnNextPage",value:function(){V.playSound(U.BUTTON),4!=this.chooseStage?(W.instance.chooseStageID=-1,W.instance.chooseSubStageID=-1,this.curSubStagePage=-1,this.chooseStage=V.clampf(this.chooseStage+1,0,4),this.initStageInfo(this.chooseStage)):V.ShowTip("Please look forward to")}},{key:"onBtnSignClick",value:(Q=g(regeneratorRuntime.mark((function e(){var t,i,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V.playSound(U.BUTTON),!this._isShowSign){e.next=3;break}return e.abrupt("return");case 3:return this._isShowSign=!0,e.next=6,V.loadRes("prefabs/ui/UISign",R);case 6:t=e.sent,i=G(t),this.uiTopNode.addChild(i),this.scheduleOnce((function(){n._isShowSign=!1}),1);case 10:case"end":return e.stop()}}),e,this)}))),function(){return Q.apply(this,arguments)})},{key:"onBtnStartGame",value:(q=g(regeneratorRuntime.mark((function e(){var t,i,n,o,a,s,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V.playSound(U.BUTTON),this._isCanTouchStartGame){e.next=3;break}return e.abrupt("return");case 3:if(this._isCanTouchStartGame=!1,!(W.instance.chooseSubStageID>-1)){e.next=13;break}if(t=W.instance.chooseSubStageID!=W.instance.getSubStageID()+1,i=W.instance.getEnergyBySubStageID(W.instance.chooseSubStageID-1),!(t&&i.count>=3)){e.next=11;break}return this.uiStageInfo.active=!0,this.refreshStageInfoUI(),e.abrupt("return");case 11:i.count++,localStorage.setItem("stageEnergy",JSON.stringify(W.instance.stageEnergy));case 13:for(this.uiStageInfo.active=!1,n=[],o=0;o<6;o++)W.instance.isUnlockPlayer(o)||n.push(o);if(!(Math.random()>W.instance.whiteInfo.TEST&&n.length>0)){e.next=27;break}return a=function(){this.mainBgm&&this.mainBgm.stop(),w.loadScene("Game")}.bind(this),e.next=20,V.loadRes("prefabs/ui/UITest",R);case 20:s=e.sent,r=G(s),this.uiTopNode.addChild(r),r.getComponent(F).init(a),e.next=29;break;case 27:this.mainBgm&&this.mainBgm.stop(),w.loadScene("Game");case 29:this._isCanTouchStartGame=!0;case 30:case"end":return e.stop()}}),e,this)}))),function(){return q.apply(this,arguments)})},{key:"onBtnTaskClick",value:function(){V.playSound(U.BUTTON),V.ShowTip("Please look forward to")}},{key:"onBtnSetClick",value:function(){V.playSound(U.BUTTON),this.uiSet.active=!this.uiSet.active}},{key:"onToggleChange",value:function(e){this._isAutoRefres||V.playSound(U.BUTTON),this._isAutoRefres=!1;var t="Toggle1"==e.node.name?0:"Toggle2"==e.node.name?1:2;if(1==t&&W.instance.subStageID<19){V.ShowTip("Unlock after clearing Chapter 1");for(var i=e.toggleGroup.toggleItems,n=0;n<i.length;n++)i[n].isChecked=W.instance.curStageLv==n}else if(2==t&&W.instance.subStageID<39){V.ShowTip("Unlock after clearing Chapter 2");for(var o=e.toggleGroup.toggleItems,a=0;a<o.length;a++)o[a].isChecked=W.instance.curStageLv==a}else{W.instance.chooseStageID=-1,W.instance.chooseSubStageID=-1,this.curSubStagePage=-1,W.instance.curStageLv=t,localStorage.setItem("curStageLv",W.instance.curStageLv.toString());for(var s=0;s<3;s++)this.bg3ds[s].node.active=s==t,this.topBgs[s].active=s==t,this.bottomBgs[s].active=s==t;this.chooseStage=Math.floor(W.instance.getSubStageID()/20),this.initStageInfo(this.chooseStage)}}},{key:"onBtnSoundClick",value:(D=g(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W.instance.soundOpen=t.isChecked?0:1,localStorage.setItem("soundOpen",W.instance.soundOpen.toString()),!t.isChecked){e.next=6;break}this.mainBgm&&this.mainBgm.stop(),e.next=9;break;case 6:return e.next=8,V.playBGMusic(U.MAINBGM);case 8:this.mainBgm=e.sent;case 9:case"end":return e.stop()}}),e,this)}))),function(e){return D.apply(this,arguments)})},{key:"onBtnShakeClick",value:function(e){W.instance.shakeOpen=e.isChecked?0:1,localStorage.setItem("shakeOpen",W.instance.shakeOpen.toString())}},{key:"showReward",value:(p=g(regeneratorRuntime.mark((function e(t,i,n){var o,a,s,r,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(c.length>3&&void 0!==c[3]&&c[3])){e.next=11;break}return e.next=4,V.loadRes("prefabs/ui/UIUnlockPlayer",R);case 4:o=e.sent,a=G(o),this.uiTopNode.addChild(a),a.getComponent(H).init(i),e.next=18;break;case 11:return e.next=13,V.loadRes("prefabs/ui/UIReward",R);case 13:s=e.sent,r=G(s),this.uiTopNode.addChild(r),r.getComponent(j).init(t,i,n);case 18:case"end":return e.stop()}}),e,this)}))),function(e,t,i){return p.apply(this,arguments)})},{key:"refreshMainTop",value:function(){this.topGold.string=V.numberToStrKM(W.instance.gold),this.topDiammond.string=V.numberToStrKM(W.instance.diamond);var e=W.instance.exp,t=P[W.instance.lv].exp,i=V.clampf(e/t,0,1);this.topExp.string=e+"/"+t,this.topExpBar.width=120*i,this.topLv.string=(W.instance.lv+1).toString()}},{key:"showSignUI",value:(S=g(regeneratorRuntime.mark((function e(){var t,i,n,o,a,s,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(W.instance.guideID>=14)){e.next=16;break}if(t=(new Date).getDate(),i=W.instance.signDay,n=W.instance.signGetInfo,!(t!=i&&n.length<7)){e.next=14;break}return this._isShowSign=!0,e.next=8,V.loadRes("prefabs/ui/UISign",R);case 8:o=e.sent,a=G(o),this.uiTopNode.addChild(a),this.scheduleOnce((function(){r._isShowSign=!1}),1),e.next=16;break;case 14:s=Math.random()>W.instance.whiteInfo.XIANSHI,W.instance.isWhiteUser()&&W.instance.gameTimes>0&&s&&this.showXianShi();case 16:case"end":return e.stop()}}),e,this)}))),function(){return S.apply(this,arguments)})},{key:"updateReddot",value:function(){if(this&&this.node){this.reddots[0].active=!1;for(var e=0;e<W.instance.achieveInfo.length;e++){var t=W.instance.achieveInfo[e];if(t){var i=M[t.id];if(i.limit[t.getTimes]&&t.count>=i.limit[t.getTimes]){this.reddots[0].active=!0;break}}}if(!this.reddots[0].active)for(var n=0;n<W.instance.taskInfo.length;n++){var o=W.instance.taskInfo[n];if(o){var a=E[o.id];if(o.count>=a.limit&&!o.isDone){this.reddots[0].active=!0;break}}}if(!this.reddots[0].active)for(var s=0;s<=W.instance.lv;s++)for(var r=0;r<4;r++)if(W.instance.isGetLvRewardDone(s,r));else if(W.instance.canGetLvReward(s,r)){this.reddots[0].active=!0;break}this.reddots[1].active=!1;for(var c=0;c<6;c++){var h=W.instance.playerInfo[c],g=O[h.id];if(h.cardCount>=g.lvupCount&&W.instance.isUnlockPlayer(h.id)){this.reddots[1].active=!0;break}}var u=(new Date).valueOf();this.reddots[3].active=!1;for(var l=0;l<W.instance.boxInfo.length;l++){var d=W.instance.boxInfo[l],S=1e3*z[d.type-1].openSec;if(Math.floor(S-(u-d.time))<=0){this.reddots[3].active=!0;break}}this.reddots[4].active=!1;for(var f=0;f<W.instance.shopDayReward.length;f++){var m=W.instance.shopDayReward[f],p=1e3*J[f],v=Math.floor(p-(u-W.instance.gameInTime));if(1!=m.isDone&&v<=0){this.reddots[4].active=!0;break}}var I=(new Date).getDate(),b=W.instance.signDay,y=W.instance.signGetInfo;this.signReddot.active=I!=b&&y.length<7}}},{key:"showGuide",value:function(){if(4==W.instance.guideID){var e=function(){W.instance.guideID=5,this.onBtnBottomClick(null,"0"),this.showGuide()}.bind(this);W.instance.guideGo(e)}else if(5==W.instance.guideID){var t=function(){W.instance.guideID=6,w.getScene().emit("onGetAchieve"),localStorage.setItem("guideID",W.instance.guideID.toString()),this.showGuide()}.bind(this);W.instance.guideGo(t)}else if(6==W.instance.guideID){var i=function(){W.instance.guideID=7,w.getScene().emit("onGetLvReward"),localStorage.setItem("guideID",W.instance.guideID.toString())}.bind(this);W.instance.guideGo(i)}else if(8==W.instance.guideID){for(var n=!1,o=0;o<W.instance.boxInfo.length;o++)3!=W.instance.boxInfo[o].id&&4!=W.instance.boxInfo[o].id||(n=!0);n||W.instance.sendReward(L.BOX,3,1);for(var a=0;a<W.instance.boxInfo.length;a++){W.instance.boxInfo[a].time-=36e7}var s=function(){W.instance.guideID=9,this.onBtnBottomClick(null,"3"),this.showGuide(),w.getScene().emit("onBoxScrollToBottom")}.bind(this);W.instance.guideGo(s)}else if(9==W.instance.guideID){var r=function(){W.instance.guideID=10,w.getScene().emit("onOpenCardBox"),localStorage.setItem("guideID",W.instance.guideID.toString())}.bind(this);W.instance.guideGo(r)}else if(10==W.instance.guideID){var c=function(){W.instance.guideID=11,this.onBtnBottomClick(null,"1"),this.showGuide()}.bind(this);W.instance.guideGo(c)}else if(11==W.instance.guideID){var h=function(){W.instance.guideID=12,W.instance.gold<2e3&&(W.instance.gold+=2e3),W.instance.getPlayerInfoById(0).cardCount<2&&W.instance.sendReward(L.CARD,0,2),w.getScene().emit("onGoInPlayerInfo"),this.showGuide()}.bind(this);W.instance.guideGo(h)}else if(12==W.instance.guideID){var g=function(){W.instance.guideID=13,w.getScene().emit("onUpPlayer"),localStorage.setItem("guideID",W.instance.guideID.toString())}.bind(this);W.instance.guideGo(g)}}},{key:"onBtnKongTouClick",value:(l=g(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._isCanShowKongTou){e.next=2;break}return e.abrupt("return");case 2:return this._isCanShowKongTou=!1,e.next=5,V.loadRes("prefabs/ui/UIKongTou",R);case 5:t=e.sent,i=G(t),this.uiTopNode.addChild(i),this._isCanShowKongTou=!0;case 9:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"showXianShi",value:(u=g(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.loadRes("prefabs/ui/UIXianShi",R);case 2:t=e.sent,i=G(t),this.uiTopNode.addChild(i);case 5:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"showMoneyAnim",value:function(e,t,i,n){var o=this;if(t==L.GOLD)for(var a=V.getRandomInt(5,8),s=function(t){var i=new d,n=i.addComponent(f);V.setImage(n,"icons/common/gold",N,new T(50,50)),o.uiGuideNode.addChild(i),i.position=e;var a=cc.winSize.height/2-67;cc.winSize.height/cc.winSize.width>2&&(a-=35);var s=Math.abs(a-e.y)/1e3;v(i).delay(.1*t).to(s,{position:new I(-50,a,0)}).call((function(){i.removeFromParent(),i.destroy()})).start()},r=0;r<a;r++)s(r);else if(t==L.DIAMOND)for(var c=V.getRandomInt(5,8),h=function(t){var i=new d,n=i.addComponent(f);V.setImage(n,"icons/common/diamond",N,new T(50,50)),o.uiGuideNode.addChild(i),i.position=e;var a=cc.winSize.height/2-67;cc.winSize.height/cc.winSize.width>2&&(a-=35);var s=Math.abs(a-e.y)/1e3;v(i).delay(.1*t).to(s,{position:new I(132,a,0)}).call((function(){i.removeFromParent(),i.destroy()})).start()},g=0;g<c;g++)h(g);else if(t==L.BOX)for(var u=Math.floor(n),l=function(t){var n=new d,a=n.addComponent(f);V.setImage(a,"icons/common/box"+i,N,new T(100,100)),o.uiGuideNode.addChild(n),n.position=e;var s=-cc.winSize.height/2+70,r=Math.abs(s-e.y)/1e3;v(n).delay(.1*t).to(r,{position:new I(145,s,0)}).call((function(){n.removeFromParent(),n.destroy()})).start()},S=0;S<u;S++)l(S)}},{key:"onDestroy",value:function(){k.targetOff(this)}},{key:"cheatLv",value:function(){}},{key:"cheatGold",value:function(){t.instance.onBtnBottomClick(null,"3")}},{key:"cheatDiamond",value:function(){t.instance.onBtnBottomClick(null,"3")}},{key:"onKeyUp",value:function(e){e.rawEvent.key}},{key:"cheatSubStageID",value:function(){W.instance.subStageID<A.length-1&&(W.instance.subStageID++,console.log("作弊关卡+1 当前关卡:"+W.instance.subStageID),localStorage.setItem("subStageID",W.instance.subStageID.toString()),W.instance.getStageStarInfo(W.instance.subStageID).stars=[1,1,1],localStorage.setItem("stageInfo",JSON.stringify(W.instance.stageInfo)),this.chooseStage=Math.floor(W.instance.getSubStageID()/20),this.initStageInfo(this.chooseStage))}},{key:"showBuzu",value:(i=g(regeneratorRuntime.mark((function e(t){var i,n,o,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.length>1&&void 0!==a[1]?a[1]:null,e.next=3,V.loadRes("prefabs/ui/UIEmpty",R);case 3:n=e.sent,o=G(n),this.uiTopNode.addChild(o),o.getComponent(X).init(t,i);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"onBtnChooseStageClick",value:function(e,t){var i=parseInt(t);console.log("点击了主页关卡位置",i);var n=0,o=this.chooseStage;n=(W.instance.getSubStageID()+1)%20>=10?1:0,this.curSubStagePage>-1&&(n=this.curSubStagePage);var a=10*n,s=Math.floor(20*o+a+i);console.log("点击的章节是",this.chooseStage),console.log("点击的关卡是",s),s>W.instance.getSubStageID()+1?V.ShowTip("Clear the last level to unlock"):(W.instance.chooseStageID=this.chooseStage,W.instance.chooseSubStageID=s,this.uiStageInfo.active=!0,this.refreshStageInfoUI()),this.initStageInfo(this.chooseStage)}},{key:"onBtnStageLeftClick",value:function(){this.curSubStagePage=0,this.initStageInfo(this.chooseStage)}},{key:"onBtnStageRightClick",value:function(){this.curSubStagePage=1,this.initStageInfo(this.chooseStage)}},{key:"refreshStageInfoUI",value:function(){if(W.instance.chooseSubStageID>0){var e=K[W.instance.chooseSubStageID-1],t=W.instance.getStageStarInfo(W.instance.chooseSubStageID),i=W.instance.getEnergyBySubStageID(W.instance.chooseSubStageID-1),n=W.instance.chooseSubStageID!=W.instance.getSubStageID()+1,o=this.uiStageInfo.getChildByName("Title").getComponent(y),a=this.uiStageInfo.getChildByName("Task"),s=this.uiStageInfo.getChildByName("Energy"),r=s.getChildByName("Label").getComponent(y),c=this.uiStageInfo.getChildByName("BtnStart"),h=this.uiStageInfo.getChildByName("BtnVideo");o.string="Level "+Math.floor(W.instance.chooseSubStageID),s.active=n,r.string=Math.floor(3-i.count).toString(),a.setPosition(0,s.active?0:-60,0),h.active=3-i.count<=0,c.active=!h.active;for(var g=0;g<3;g++){var u=a.getChildByName("BG"+(g+1)),l=u.getChildByName("star2"),d=u.getChildByName("Label").getComponent(y);l.active=t.stars[g]>0;var S=e.type[g];1==S?d.string=Math.floor(e.count[g])+"s pass level":2==S?d.string="No one died":3==S?d.string="Rescue "+Math.floor(e.count[g])+" support":4==S?d.string="Kill "+Math.floor(e.count[g])+" enemys":5==S&&(d.string="Use "+Math.floor(e.count[g])+" hero skill")}}}},{key:"onBtnEnergyAddClick",value:function(){var e=function(){W.instance.getEnergyBySubStageID(W.instance.chooseSubStageID-1).count=0,localStorage.setItem("stageEnergy",JSON.stringify(W.instance.stageEnergy)),V.reportAnalytics("观看视频_恢复体力_完成"),this.refreshStageInfoUI()}.bind(this);Y.showVideoAd(e)}},{key:"onBtnCloseStageInfoClick",value:function(){this.uiStageInfo.active=!1}}]),t}(D),xe.instance=null,Se=i((de=_e).prototype,"btnStageLeft",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=i(de.prototype,"btnStageRight",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=i(de.prototype,"d3",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=i(de.prototype,"move",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=i(de.prototype,"uiNode",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=i(de.prototype,"uiTopNode",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=i(de.prototype,"uiGuideNode",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=i(de.prototype,"camera",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=i(de.prototype,"title",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Be=i(de.prototype,"playerCamera",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=i(de.prototype,"playerShowNode",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ke=i(de.prototype,"touchNode",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),De=i(de.prototype,"btnKongTou",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=i(de.prototype,"startBtn",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Te=i(de.prototype,"bg3ds",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),le=de))||le)),u._RF.pop()}}}));

System.register("chunks:///DataManager.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./UIGuideCover.js","./UIMain.js","./Tools.js"],(function(e,t){var n,a,o,i,s,r,h,l,g,u,f,I,c,d,S,v,m,y,p,D,k,O,w,R,T,E,N;return{setters:[function(e){n=e.createClass,a=e.classCallCheck,o=e.asyncToGenerator},function(e){i=e.cclegacy,s=e.loader,r=e.Texture2D,h=e.SpriteFrame,l=e.Prefab},function(e){g=e.PLAYER_INFO,u=e.TT_VERSION,f=e.QQ_VERSION,I=e.WX_VERSION,c=e.EQUIP_INFO,d=e.EQUIP_ADD_TYPE,S=e.SHOP_DAY_REWARD,v=e.TASK_REWARD,m=e.CHENGJIU_REWARD,y=e.ITEMTYPE,p=e.LV_REWARD,D=e.BOX_INFO,k=e.STAGE_MODE,O=e.STAGE_INFO,w=e.PLAYER_DATA},function(e){R=e.UIGuideCover},function(e){T=e.UIMain},function(e){E=e.Tools}],execute:function(){i._RF.push({},"98899wskfVKZr0oCyN4ADci","DataManager",void 0),(N=function(){function e(){a(this,e),this.playerInfo=[],this.lv=0,this._exp=0,this.lvReward=[],this.subStageID=0,this.hardSubStageID=0,this.emSubStageID=0,this._gold=0,this._diamond=0,this.taskTime=0,this.taskRefreshTimes=0,this.taskInfo=[],this.achieveInfo=[],this.boxInfo=[],this.crossDay=0,this.shopFreeBoxGetTimes=0,this.shopDayReward=[],this.gameInTime=0,this.gameTimes=0,this.curStageLv=0,this.isOpenEffect=!0,this.soundOpen=1,this.shakeOpen=1,this.guideID=0,this.isGuidingStage=!1,this.signDay=0,this.signGetInfo=[],this.isTalkByPursueStage=0,this.isTalkByRewardStage=0,this.jumpPlayerPage=!1,this.isNewPlayer=!1,this.testPlayerID=-1,this.whiteInfo=null,this.stageInfo=[],this.hardStageInfo=[],this.emStageInfo=[],this.stageEnergyDay=0,this.stageEnergy=[],this.chooseStageID=-1,this.chooseSubStageID=-1,this.isReportGoMain=!1,this.init(),e._instance=this}var t,i,N;return n(e,null,[{key:"instance",get:function(){return e._instance||new e,e._instance}}]),n(e,[{key:"init",value:function(){this.initWhiteInfo();var e=(new Date).getDate();this.playerInfo=JSON.parse(localStorage.getItem("playerInfo")||"[]"),this.lv=parseInt(localStorage.getItem("lv")||"0"),this._exp=parseInt(localStorage.getItem("exp")||"0"),this._gold=parseInt(localStorage.getItem("gold")||"0"),this._diamond=parseInt(localStorage.getItem("diamond")||"0"),this.subStageID=parseInt(localStorage.getItem("subStageID")||"0"),this.hardSubStageID=parseInt(localStorage.getItem("hardSubStageID")||"0"),this.emSubStageID=parseInt(localStorage.getItem("emSubStageID")||"0"),this.curStageLv=parseInt(localStorage.getItem("curStageLv")||"0"),this.taskTime=parseInt(localStorage.getItem("taskTime")||"0"),this.taskInfo=JSON.parse(localStorage.getItem("taskInfo")||"[]"),this.achieveInfo=JSON.parse(localStorage.getItem("achieveInfo")||"[]"),this.lvReward=JSON.parse(localStorage.getItem("lvReward")||"[]"),this.taskRefreshTimes=parseInt(localStorage.getItem("taskRefreshTimes")||"0"),this.boxInfo=JSON.parse(localStorage.getItem("boxInfo")||"[]"),this.shopFreeBoxGetTimes=parseInt(localStorage.getItem("shopFreeBoxGetTimes")||"0"),this.crossDay=parseInt(localStorage.getItem("crossDay")||"0"),this.shopDayReward=JSON.parse(localStorage.getItem("shopDayReward")||"[]"),this.gameInTime=parseInt(localStorage.getItem("gameInTime")||"0"),this.soundOpen=parseInt(localStorage.getItem("soundOpen")||"1"),this.shakeOpen=parseInt(localStorage.getItem("shakeOpen")||"1"),this.guideID=parseInt(localStorage.getItem("guideID")||"0"),this.signDay=parseInt(localStorage.getItem("signDay")||"0"),this.signGetInfo=JSON.parse(localStorage.getItem("signGetInfo")||"[]"),this.isTalkByPursueStage=parseInt(localStorage.getItem("isTalkByPursueStage")||"0"),this.isTalkByRewardStage=parseInt(localStorage.getItem("isTalkByRewardStage")||"0"),this.stageInfo=JSON.parse(localStorage.getItem("stageInfo")||"[]"),this.hardStageInfo=JSON.parse(localStorage.getItem("hardStageInfo")||"[]"),this.emStageInfo=JSON.parse(localStorage.getItem("emStageInfo")||"[]"),this.stageEnergyDay=parseInt(localStorage.getItem("stageEnergyDay")||"0"),this.stageEnergy=JSON.parse(localStorage.getItem("stageEnergy")||"[]");var t=parseInt(localStorage.getItem("isNewPlayer")||"0");this.isNewPlayer=0==t,localStorage.setItem("isNewPlayer","1"),this.playerInfo.length!=g.length&&this.initPlayerInfo(),this.stageEnergyDay!=e&&(this.stageEnergyDay=e,this.stageEnergy=[],localStorage.setItem("stageEnergyDay",this.stageEnergyDay.toString()),localStorage.setItem("stageEnergy",JSON.stringify(this.stageEnergy))),0==this.stageInfo.length&&this.initStageInfo(),0==this.achieveInfo.length&&this.initAchievement(),this.refreshTaskInfo(),setInterval(this.refreshTaskInfo.bind(this),1e3),e!=this.crossDay&&(this.crossDay=e,localStorage.setItem("crossDay",this.crossDay.toString()),this.shopFreeBoxGetTimes=0,localStorage.setItem("shopFreeBoxGetTimes",this.shopFreeBoxGetTimes.toString()),this.gameInTime=(new Date).valueOf(),localStorage.setItem("gameInTime",this.gameInTime.toString()),this.initShopDayReward()),console.log("当前引导ID",this.guideID),console.log("普通难度通关",this.subStageID,"困难难度通关",this.hardSubStageID,"噩梦难度通关",this.emSubStageID),console.log("玩家角色信息",this.playerInfo),console.log("任务",this.taskInfo),console.log("成就",this.achieveInfo),console.log("等级领取",this.lvReward),console.log("宝箱信息",this.boxInfo),console.log("商店每日",this.shopDayReward)}},{key:"initWhiteInfo",value:function(){var e=this;this.whiteInfo={},this.whiteInfo.OPEN=0,this.whiteInfo.TEST=.5,this.whiteInfo.KONGTOU=.5,this.whiteInfo.XIANSHI=.5;var t=Math.floor(1e5*Math.random());if("undefined"!=typeof tt){var n="https://cdnb.com/DeadSpread/tt/wuchuInfo.json?r="+t;s.load(n,(function(t,n){if(n)for(var a=0;a<n.length;a++){var o=n[a];o.VERSION==u&&(e.whiteInfo.OPEN=o.OPEN,e.whiteInfo.TEST=o.TEST,e.whiteInfo.KONGTOU=o.KONGTOU,e.whiteInfo.XIANSHI=o.XIANSHI,console.log("数据下行当前配置",o))}else console.error("数据下行错误",t)}))}else if("undefined"!=typeof qq){var a="https://cdnb.com/DeadSpread/qq/wuchuInfo.json?r="+t;s.load(a,(function(t,n){if(n)for(var a=0;a<n.length;a++){var o=n[a];o.VERSION==f&&(e.whiteInfo.OPEN=o.OPEN,e.whiteInfo.TEST=o.TEST,e.whiteInfo.KONGTOU=o.KONGTOU,e.whiteInfo.XIANSHI=o.XIANSHI,console.log("数据下行当前配置",o))}else console.error("数据下行错误",t)}))}else if("undefined"!=typeof wx){var o="https://cdnb.com/DeadSpread/wx/wuchuInfo.json?r="+t;s.load(o,(function(t,n){if(n)for(var a=0;a<n.length;a++){var o=n[a];o.VERSION==I&&(e.whiteInfo.OPEN=o.OPEN,e.whiteInfo.TEST=o.TEST,e.whiteInfo.KONGTOU=o.KONGTOU,e.whiteInfo.XIANSHI=o.XIANSHI,console.log("数据下行当前配置",o))}else console.error("数据下行错误",t)}))}}},{key:"initPlayerInfo",value:function(){for(var e=0;e<g.length;e++){var t={id:g[e].id,lv:0,cardCount:0,weaponLv:[0,0,0]};this.playerInfo.push(t)}localStorage.setItem("playerInfo",JSON.stringify(this.playerInfo))}},{key:"getPlayerInfoById",value:function(e){for(var t=0;t<this.playerInfo.length;t++)if(this.playerInfo[t].id==e)return this.playerInfo[t];return null}},{key:"getEquipInfoByOwnerId",value:function(e){for(var t=[],n=0;n<c.length;n++)c[n].ownerID==e&&t.push(c[n]);return t}},{key:"getLvAddValueByID",value:function(e,t){for(var n=this.getPlayerInfoById(e),a=0,o=w[e],i=0;i<o.length;i++)if(n.lv>=i){var s=o[i];0==t?a+=s.att:1==t&&(a+=s.blood)}return a}},{key:"getAllAddValueByID",value:function(e,t,n){var a=this.getEquipInfoByOwnerId(e),o=this.getPlayerInfoById(e).weaponLv,i=0;if(n)for(var s=a[n],r=o[n],h=0;h<r;h++)t==s.addType[h]&&(i+=s.addValue[h]);else for(var l=0;l<3;l++)for(var g=a[l],u=o[l],f=0;f<u;f++)t==g.addType[f]&&(i+=g.addValue[f]);return t==d.boom&&(i+=5),t==d.wurenji&&(i+=1),t==d.daodan&&(i+=1),i}},{key:"initShopDayReward",value:function(){this.shopDayReward=[];for(var e=0;e<4;e++){var t=null,n=E.getRandomInt(0,S[e].length-1);(t=S[e][n]).isDone=0,this.shopDayReward.push(t)}localStorage.setItem("shopDayReward",JSON.stringify(this.shopDayReward))}},{key:"refreshTaskInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(new Date).valueOf(),n=new Date(new Date((new Date).toLocaleDateString()).getTime()+864e5-1e3).valueOf();if(0==this.taskInfo.length||t>n||e){for(var a=[],o=0;o<v.length;o++){var i={id:v[o].id,count:0,isDone:0};a.push(i)}a=a.sort((function(e,t){return Math.random()>.5?1:-1})),this.taskInfo=[],this.taskInfo.push(a[0]),this.taskInfo.push(a[1]),this.taskInfo.push(a[2]),this.taskInfo.push(a[3]),this.taskInfo.push(a[4]),this.taskTime=t,e||(this.taskRefreshTimes=0,localStorage.setItem("taskRefreshTimes",this.taskRefreshTimes.toString())),localStorage.setItem("taskTime",this.taskTime.toString()),localStorage.setItem("taskInfo",JSON.stringify(this.taskInfo)),console.log("整点 刷新任务 与次数")}}},{key:"isWhiteUser",value:function(){return 1==this.whiteInfo.OPEN}},{key:"initAchievement",value:function(){for(var e=0;e<m.length;e++){var t={id:m[e].id,count:0,getTimes:0};this.achieveInfo.push(t)}localStorage.setItem("achieveInfo",JSON.stringify(this.achieveInfo))}},{key:"initOneBoxInfo",value:function(e){var t=(new Date).valueOf();return{id:t+""+E.getRandomInt(0,1e4),type:e,time:t}}},{key:"isUnlockPlayer",value:function(e){if(e>=6)return!1;for(var t=0;t<g.length;t++)if(g[t].id==e&&this.lv>=g[t].unlockLv)return!0;return!1}},{key:"loadItemIcon",value:(N=o(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){t==y.GOLD?s.loadRes("icons/common/gold/texture",r,(function(t,n){e(n)})):t==y.DIAMOND?s.loadRes("icons/common/diamond/texture",r,(function(t,n){e(n)})):t==y.EXP?s.loadRes("icons/common/exp/texture",r,(function(t,n){e(n)})):t==y.CARD?s.loadRes("icons/player/playericon"+(n+1)+"/texture",r,(function(t,n){e(n)})):t==y.BOX?s.loadRes("icons/common/box"+n+"/texture",r,(function(t,n){e(n)})):t==y.EQUIP?s.loadRes("icons/equip/equip"+n+"/texture",r,(function(t,n){e(n)})):t==y.SKILL?s.loadRes("icons/skill/skill"+n+"/texture",r,(function(t,n){e(n)})):(console.error("获得道具图标失败:",t,n),a(null))})));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return N.apply(this,arguments)})},{key:"setItemIcon",value:(i=o(regeneratorRuntime.mark((function e(t,n,a){var o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadItemIcon(n,a);case 2:o=e.sent,(i=new h).texture=o,t&&t.node&&(t.spriteFrame=i);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return i.apply(this,arguments)})},{key:"getItemName",value:function(e,t){if(e==y.GOLD)return"Gold";if(e==y.DIAMOND)return"Diamond";if(e==y.EXP)return"Exp";if(e==y.CARD){var n=g[t];return n?n.name:(console.error("错误的itemID",t),"")}return e==y.BOX?"Chest":e==y.EQUIP?c[t-1].name:""}},{key:"getItemCount",value:function(e,t){if(e==y.GOLD)return this.gold;if(e==y.DIAMOND)return this.diamond;if(e==y.EXP)return this.exp;if(e==y.CARD){for(var n=0;n<this.playerInfo.length;n++)if(this.playerInfo[n].id==t)return this.playerInfo[n].cardCount;return 0}return e==y.BOX?0:e==y.EQUIP?1:0}},{key:"setLvRewardDone",value:function(e,t){for(var n=!1,a=0;a<this.lvReward.length;a++)if(this.lvReward[a].lv==e){this.lvReward[a].done.push(t),n=!0;break}if(!n){var o={lv:e,done:[t]};this.lvReward.push(o)}localStorage.setItem("lvReward",JSON.stringify(this.lvReward))}},{key:"isGetLvRewardDone",value:function(e,t){for(var n=0;n<this.lvReward.length;n++)if(this.lvReward[n].lv==e)return this.lvReward[n].done.indexOf(t)>-1;return!1}},{key:"addTaskCount",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=0;a<this.taskInfo.length;a++)this.taskInfo[a].id==e&&(this.taskInfo[a].count+=t);n&&localStorage.setItem("taskInfo",JSON.stringify(this.taskInfo))}},{key:"addAchieveCount",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=0;a<this.achieveInfo.length;a++)this.achieveInfo[a].id==e&&(this.achieveInfo[a].count+=t);n&&localStorage.setItem("achieveInfo",JSON.stringify(this.achieveInfo))}},{key:"canGetLvReward",value:function(t,n){if(this.lv>t)return!0;if(this.lv<t)return!1;if(0==n)return!0;var a=.25*n;return e.instance.exp/p[t].exp>=a}},{key:"sendReward",value:function(t,n,a){if(t==y.GOLD)this.gold+=a;else if(t==y.DIAMOND)this.diamond+=a;else if(t==y.EXP)this.exp+=a;else if(t==y.CARD){e.instance.getPlayerInfoById(n).cardCount+=a,localStorage.setItem("playerInfo",JSON.stringify(e.instance.playerInfo))}else if(t==y.BOX){for(var o=0;o<a;o++){var i=this.initOneBoxInfo(n);this.boxInfo.push(i)}localStorage.setItem("boxInfo",JSON.stringify(this.boxInfo))}else if(t==y.EQUIP){var s=c[n-1],r=s.ownerID,h=s.index;e.instance.getPlayerInfoById(r).weaponLv[h]+=a,localStorage.setItem("playerInfo",JSON.stringify(e.instance.playerInfo))}else console.error("发放奖励失败",t)}},{key:"getBoxInfosByIDs",value:function(e){for(var t=[],n=0;n<this.boxInfo.length;n++){var a=this.boxInfo[n];e.indexOf(a.type)>-1&&t.push(a)}return t}},{key:"getRandomCardInfo",value:function(e){var t=1,n=4;if(3==e||4==e){t=D[e-1].minCardCount,n=D[e-1].maxCardCount;for(var a=E.getRandomInt(t,n),o=[],i=0;i<6;i++)for(var s=0;s<g[i].cardWeight;s++)o.push(g[i].id);o=(o=o.sort((function(e,t){return Math.random()>.5?1:-1}))).sort((function(e,t){return Math.random()>.5?1:-1}));for(var r=[],h=0;h<o.length;h++)r.indexOf(o[h])<0&&r.push(o[h]);for(var l=[],u=0;u<a;u++)l.push({id:r[u],count:0});for(var f=E.getRandomInt(D[e-1].minCount,D[e-1].maxCount),I=0;I<f;I++){l[E.getRandomInt(0,l.length-1)].count++}for(var c=[],d=0;d<l.length;d++)l[d].count>0&&c.push(l[d]);return c}return console.error("错误的卡片宝箱类型",e),null}},{key:"watchVideo",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]}},{key:"guideGo",value:(t=o(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.loadRes("prefabs/ui/UIGuideCover",l);case 2:n=e.sent,a=cc.instantiate(n),T.instance.uiGuideNode.addChild(a),a.getComponent(R).init(this.guideID,t);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"isGuideStage",value:function(){return 0==this.subStageID&&0==this.curStageLv}},{key:"getOutMapSize",value:function(e){return this.isGuideStage()?187:e.mode==k.PURSUE?1e3:310}},{key:"getSubStageID",value:function(){return 0==this.curStageLv?this.subStageID:1==e.instance.curStageLv?this.hardSubStageID:2==e.instance.curStageLv?this.emSubStageID:void console.error("错误的关卡id")}},{key:"getStageStarInfo",value:function(t){return 0==this.curStageLv?this.stageInfo[t-1]:1==e.instance.curStageLv?this.hardStageInfo[t-1]:2==e.instance.curStageLv?this.emStageInfo[t-1]:void 0}},{key:"initStageInfo",value:function(){for(var e=[],t=0;t<O.length;t++){var n={id:O[t].id,stars:[0,0,0]};e.push(n)}this.stageInfo=e,localStorage.setItem("stageInfo",JSON.stringify(this.stageInfo));for(var a=[],o=0;o<O.length;o++){var i={id:O[o].id,stars:[0,0,0]};a.push(i)}this.hardStageInfo=a,localStorage.setItem("hardStageInfo",JSON.stringify(this.hardStageInfo));for(var s=[],r=0;r<O.length;r++){var h={id:O[r].id,stars:[0,0,0]};s.push(h)}this.emStageInfo=s,localStorage.setItem("emStageInfo",JSON.stringify(this.emStageInfo))}},{key:"getEnergyBySubStageID",value:function(e){for(var t=this.curStageLv,n=e,a=0;a<this.stageEnergy.length;a++)if(this.stageEnergy[a].lv==t&&this.stageEnergy[a].id==n)return this.stageEnergy[a];var o={lv:this.curStageLv,id:n,count:0};return this.stageEnergy.push(o),localStorage.setItem("stageEnergy",JSON.stringify(this.stageEnergy)),o}},{key:"umatrackEvent",value:function(e,t){}},{key:"exp",set:function(e){this._exp=e;var t=p[this.lv];t&&this.exp>=t.exp&&this.lv<p.length-1&&(this.exp-=t.exp,this.lv+=1,localStorage.setItem("lv",this.lv.toString()),this.umatrackEvent("升级了",{lv:Math.floor(this.lv+1)})),localStorage.setItem("exp",this._exp.toString())},get:function(){return this._exp}},{key:"gold",set:function(e){this._gold=e,localStorage.setItem("gold",this._gold.toString())},get:function(){return this._gold}},{key:"diamond",set:function(e){this._diamond=e,localStorage.setItem("diamond",this._diamond.toString())},get:function(){return this._diamond}}]),e}())._instance=null,i._RF.pop(),e("default",N)}}}));

System.register("chunks:///Tools.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./UITip.js","./DataManager.js"],(function(e,n){var t,r,o,a,u,i,c,l,s,d,p,h,f,v,m,g,y,k,w;return{setters:[function(e){t=e.createClass,r=e.classCallCheck,o=e.asyncToGenerator},function(e){a=e.cclegacy,u=e.EventHandler,i=e.loader,c=e.Texture2D,l=e.SpriteFrame,s=e.Vec3,e.Size,d=e.Prefab,p=e.instantiate,h=e.director,f=e.Node,v=e.game,m=e.AudioSourceComponent,g=e.AudioClip},function(e){y=e.UITip},function(e){k=e.default}],execute:function(){a._RF.push({},"9057dGXVs1KObhoGuZ+LRX7","Tools",void 0),e("Tools",w=function(){function e(){r(this,e)}var n,a,w,S,C;return t(e,null,[{key:"waitForSec",value:(C=o(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){setTimeout((function(){e()}),1e3*n)})));case 1:case"end":return e.stop()}}),e)}))),function(e){return C.apply(this,arguments)})},{key:"ShowTip",value:(S=o(regeneratorRuntime.mark((function n(t){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.loadRes("prefabs/ui/UITip",d);case 2:r=n.sent,o=p(r),h.getScene().getChildByName("Canvas").addChild(o),o.getComponent(y).init(t);case 7:case"end":return n.stop()}}),n)}))),function(e){return S.apply(this,arguments)})},{key:"loadRes",value:(w=o(regeneratorRuntime.mark((function e(n,t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t==l?n+="/spriteFrame":t==c&&(n+="/texture"),e.abrupt("return",new Promise((function(e,r){i.loadRes(n,t,(function(t,o){t?(console.log("资源错误",n,t),r(t)):e(o)}))})));case 2:case"end":return e.stop()}}),e)}))),function(e,n){return w.apply(this,arguments)})},{key:"addClickEvent",value:function(e,n,t,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=new u;a.target=e,a.handler=t,a.component=r,a.customEventData=o,n.clickEvents.push(a)}},{key:"lerp",value:function(e,n,t){return e+(n-e)*(t=(t=t<0?0:t)>1?1:t)}},{key:"clampf",value:function(e,n,t){return e<n&&(e=n),e>t&&(e=t),e}},{key:"getRandomInt",value:function(e,n){return Math.floor(Math.random()*(n+1-e)+e)}},{key:"getRandom",value:function(e,n){return Math.random()*(n+1-e)+e}},{key:"getAngle",value:function(e,n){return 180*Math.atan2(e,n)/Math.PI}},{key:"timestampToTime",value:function(e){var n,t,r;return(n=Math.floor(e/60/60%24))<10&&(n="0"+n),(t=Math.floor(e/60%60))<10&&(t="0"+t),(r=Math.floor(e%60))<10&&(r="0"+r),n+":"+t+":"+r}},{key:"timestampToTime1",value:function(e){var n,t;return e=Math.floor(e),n=Math.floor(e/60%60),t=Math.floor(e%60),e<=0?"00:00":(n<10&&(n="0"+n),t<10&&(t="0"+t),n+":"+t)}},{key:"splitToNumber",value:function(e,n){if(!e||0==e.length)return[];for(var t=e.split(n),r=[],o=0;o<t.length;o++)r.push(Number(t[o]));return r}},{key:"setImage",value:function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;n.indexOf("http")>-1?i.load({url:n,type:t},(function(t,o){if(e&&e.node&&!t){var a=new c;a.image=o;var u=new l;u.texture=a,e.spriteFrame=u,r&&(e.node.width=r.width,e.node.height=r.height)}else console.error("读取资源错误",n,t)})):(t==l?n+="/spriteFrame":t==c&&(n+="/texture"),i.loadRes(n,t,(function(o,a){if(o)console.error("读取资源错误",n,o);else if(e&&e.node)if(t==l)e.spriteFrame=a,r&&(e.node.width=r.width,e.node.height=r.height);else{var u=new l;u.texture=a,e.spriteFrame=u,r&&(e.node.width=r.width,e.node.height=r.height)}else console.log("icon已经消失",n,o)})))}},{key:"getCirclePoints",value:function(e,n,t,r){for(var o=[],a=Math.PI/180*Math.round(360/r),u=0;u<r;u++){var i=n+e*Math.sin(a*u),c=t+e*Math.cos(a*u);o.push({x:i,y:c})}return o}},{key:"getCirciePointAtIndex",value:function(e,n,t,r,o){var a=Math.PI/180*Math.round(360/r);return new s(n+e*Math.sin(a*o),0,t+e*Math.cos(a*o))}},{key:"getScreenPos",value:function(e,n,t){var r=new s;return n.convertToUINode(e.worldPosition,t,r),r}},{key:"isPointInCircularSector",value:function(e,n,t,r,o,a,u,i){var c=u-e,l=i-n,s=Math.sqrt(c*c+l*l);return!(s>o)&&(c/=s,l/=s,Math.acos(c*t+l*r)<a)}},{key:"playSound",value:(a=o(regeneratorRuntime.mark((function n(t){var r,o,a,u,i=arguments;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=i.length>1&&void 0!==i[1]&&i[1],1==k.instance.soundOpen){n.next=3;break}return n.abrupt("return");case 3:if("undefined"==typeof wx){n.next=11;break}return(o=wx.createInnerAudioContext()).src="https://cdnb.com/DeadSpread/"+t+".mp3",o.loop=r,o.play(),n.abrupt("return",o);case 11:return e._audioSourceComponent||(a=new f,v.addPersistRootNode(a),e._audioSourceComponent=a.addComponent(m),e._bgmAudioSourceComponent=a.addComponent(m)),n.next=14,e.loadRes(t,g);case 14:return u=n.sent,e._audioSourceComponent.clip=u,e._audioSourceComponent.clip.setLoop(r),e._audioSourceComponent.clip.playOneShot(1),n.abrupt("return",u);case 19:case"end":return n.stop()}}),n)}))),function(e){return a.apply(this,arguments)})},{key:"playBGMusic",value:(n=o(regeneratorRuntime.mark((function n(t){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(1==k.instance.soundOpen){n.next=2;break}return n.abrupt("return");case 2:return e._bgmAudioSourceComponent||(r=new f,v.addPersistRootNode(r),e._audioSourceComponent=r.addComponent(m),e._bgmAudioSourceComponent=r.addComponent(m)),n.next=5,e.loadRes(t,g);case 5:return o=n.sent,e._bgmAudioSourceComponent.clip=o,e._bgmAudioSourceComponent.clip.setLoop(!0),e._bgmAudioSourceComponent.clip.play(),n.abrupt("return",o);case 10:case"end":return n.stop()}}),n)}))),function(e){return n.apply(this,arguments)})},{key:"playSounds",value:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e._bgmAudioSourceComponent.volume=n?1:0}},{key:"shake",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];1==k.instance.shakeOpen&&"undefined"!=typeof wx&&(e?wx.vibrateLong(null):wx.vibrateShort(null))}},{key:"numberToStrKM",value:function(n){if(0===n)return"0";if(n<1e3)return Math.floor(n).toString();var t=Math.floor(Math.log(n)/Math.log(1e3));return(n/Math.pow(1e3,t)).toPrecision(3)+e._sizes[t]}},{key:"createVideo",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2]}},{key:"TimeDown",value:function(){this.Timer--,this.Timer}},{key:"showBanner",value:function(e){}},{key:"createBanner",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2]}},{key:"retryShow",value:function(e){}},{key:"createTTBanner",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2]}},{key:"cacheInsertAd",value:function(e){}},{key:"ShowInsertAd",value:function(){}},{key:"reportAnalytics",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},{key:"share",value:function(){}},{key:"onShare",value:function(){}}]),e}()),w._sizes=["","K","M","B","T"],w.wxVideo=null,w.wxVideoCb=null,w.wxadUnitId=null,w.Timer=60,w.isShowBanner=!1,w.qgVideo=null,w.isonLoad=!0,a._RF.pop()}}}));

System.register("chunks:///Bullet.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./GameManager.js"],(function(e,t){var i,s,n,a,o,l,r,c,d,u,h,p,v,y;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){i=e.inherits,s=e.classCallCheck,n=e.possibleConstructorReturn,a=e.getPrototypeOf,o=e.createClass},function(e){l=e.cclegacy,r=e._decorator,c=e.Vec3,d=e.ParticleSystemComponent,u=e.Component},function(e){h=e.GameManager}],execute:function(){l._RF.push({},"e4971XIHkZHdqAte6FHMpVH","Bullet",void 0),y=r.ccclass,r.property,e("Bullet",(p=y("Bullet"),p(v=function(e){function t(){var e,i;s(this,t);for(var o=arguments.length,l=new Array(o),r=0;r<o;r++)l[r]=arguments[r];return(i=n(this,(e=a(t)).call.apply(e,[this].concat(l)))).att=1,i.out=new c(0,0,0),i.moveSpeed=40,i.isDead=!1,i.attRateScale=1,i}return i(t,e),o(t,[{key:"start",value:function(){this.explodeNode=this.node.getChildByName("explode"),this.scheduleOnce(this.dead,3)}},{key:"initProperty",value:function(e,t,i){this.isDead=!1,this.att=e,this.attRateScale=i,this.node.setRotationFromEuler(t.x,t.y,t.z)}},{key:"update",value:function(e){if(!(e>2||this.isDead||h.instance.isPauseGame)){this.out.x=0,this.out.y=0,this.out.z=-this.moveSpeed*e,this.node.translate(this.out,0);for(var t=0;t<h.instance.players.length;t++){if(!h.instance.players[t].isDead)if(c.distance(this.node.worldPosition,h.instance.players[t].node.worldPosition)<10*this.attRateScale)return this.dead(),void h.instance.players[t].subBlood(this.att)}}}},{key:"dead",value:function(){var e=this;if(!this.isDead){this.isDead=!0,this.unschedule(this.dead),this.explodeNode.active=!0;for(var t=0;t<this.explodeNode.children.length;t++){var i=this.explodeNode.children[t].getComponent(d);i.stop(),i.play()}this.scheduleOnce((function(){h.instance.recoverEnemyBulletToPool(e)}),.5)}}}]),t}(u))||v)),l._RF.pop()}}}));

System.register("chunks:///Gold.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./GameManager.js"],(function(t,e){var i,o,s,n,a,l,r,d,u,c,h,y,p;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){i=t.inherits,o=t.classCallCheck,s=t.possibleConstructorReturn,n=t.getPrototypeOf,a=t.createClass},function(t){l=t.cclegacy,r=t._decorator,d=t.Vec3,u=t.Component},function(t){c=t.GameManager}],execute:function(){l._RF.push({},"09c2bTp115DWbJW93TGLjKT","Gold",void 0),p=r.ccclass,r.property,t("Gold",(h=p("Gold"),h(y=function(t){function e(){var t,i;o(this,e);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(i=s(this,(t=n(e)).call.apply(t,[this].concat(l)))).goldCount=0,i.isDead=!1,i.out=new d,i.moveSpeed=new d(3,3,3),i.isCanEat=!1,i}return i(e,t),a(e,[{key:"initGold",value:function(t){var e=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.isCanEat=i,this.goldCount=t,this.body=this.node.getChildByName("body"),this.isCanEat||this.scheduleOnce((function(){e.isCanEat=!0}),.5)}},{key:"update",value:function(t){if(!(t>2)&&this.body&&(this.body.setRotationFromEuler(this.body.eulerAngles.x,this.body.eulerAngles.y+4,this.body.eulerAngles.z),this.isCanEat))for(var e=0;e<c.instance.players.length;e++)if(!c.instance.players[e].isDead){var i=d.distance(this.node.worldPosition,c.instance.players[e].node.worldPosition);if(i<50&&!this.isDead&&(d.subtract(this.out,c.instance.players[e].node.worldPosition,this.node.worldPosition),d.normalize(this.out,this.out),this.out.y=0,d.multiply(this.out,this.out,this.moveSpeed),this.node.translate(this.out,1),i<13&&!this.isDead))return c.instance.addEatGold(this.goldCount),void this.dead()}}},{key:"dead",value:function(){this.isDead=!0,c.instance.recoverGoldToPool(this)}}]),e}(u))||y)),l._RF.pop()}}}));

System.register("chunks:///BossBlood.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Tools.js","./GameManager.js"],(function(e,t){var i,s,o,n,a,r,d,h,l,c,u,y,m;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){i=e.inherits,s=e.classCallCheck,o=e.possibleConstructorReturn,n=e.getPrototypeOf,a=e.createClass},function(e){r=e.cclegacy,d=e._decorator,h=e.Component},function(e){l=e.Tools},function(e){c=e.GameManager}],execute:function(){r._RF.push({},"40ddeG4lVZGhb0VPDBbvc3/","BossBlood",void 0),m=d.ccclass,d.property,e("BossBlood",(u=m("BossBlood"),u(y=function(e){function t(){var e,i;s(this,t);for(var a=arguments.length,r=new Array(a),d=0;d<a;d++)r[d]=arguments[d];return(i=o(this,(e=n(t)).call.apply(e,[this].concat(r)))).isDead=!1,i}return i(t,e),a(t,[{key:"init",value:function(e){this.enenmy=e,this.barWhite=this.node.getChildByName("ProgressWhite"),this.enenmy.isElite?(this.barFront=this.node.getChildByName("ProgressPurple"),this.node.getChildByName("TitleRed").active=!1,this.node.getChildByName("ProgressRed").active=!1):(this.barFront=this.node.getChildByName("ProgressRed"),this.node.getChildByName("TitlePurple").active=!1,this.node.getChildByName("ProgressPurple").active=!1)}},{key:"update",value:function(e){e>2||this.enenmy&&!this.isDead&&(this.enenmy.isDead?this.dead():this.updateBloodLabel(e))}},{key:"updateBloodLabel",value:function(e){if(this.enenmy){var t=this.enenmy.blood/this.enenmy.bloodMax*110;this.barFront.width=t,this.barWhite.width=l.lerp(this.barWhite.width,t,.05);var i=c.instance.getScreenPos(this.enenmy.body);this.enenmy.isElite?i.y+=90:i.y+=110,this.node.position=i}}},{key:"dead",value:function(){this.isDead=!0,this.node.removeFromParent(),this.node.destroy()}}]),t}(h))||y)),r._RF.pop()}}}));

System.register("chunks:///Enemy.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./DataManager.js","./Tools.js","./Bullet.js","./Gold.js","./BossBlood.js","./GameManager.js"],(function(t,i){var e,o,s,n,a,d,h,l,r,c,u,m,y,f,g,p,P,v,w,B,C,b,E,T,k,R,D,A,S,x,_,M;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){e=t.inherits,o=t.classCallCheck,s=t.possibleConstructorReturn,n=t.getPrototypeOf,a=t.createClass},function(t){d=t.cclegacy,h=t._decorator,l=t.Vec3,r=t.Vec4,c=t.SkeletalAnimationComponent,u=t.SkinningModelComponent,m=t.ModelComponent,y=t.instantiate,f=t.tween,g=t.ParticleSystemComponent,p=t.Component},function(t){P=t.GetEnemySkillCD,v=t.STAGE_MODE,w=t.PLAYER_PROPERTY,B=t.ENEMY_ATT_TYPE,C=t.SOUND_TYPE,b=t.REWARD_STAGE_GOLD_MIN,E=t.REWARD_STAGE_GOLD_MAX},function(t){T=t.default},function(t){k=t.Tools},function(t){R=t.Bullet},function(t){D=t.Gold},function(t){A=t.BossBlood},function(t){S=t.GameManager}],execute:function(){d._RF.push({},"ed6aej6snJDGq0U4Vk/+DYH","Enemy",void 0),M=h.ccclass,h.property,t("Enemy",(x=M("Enemy"),x(_=function(t){function i(){var t,e;o(this,i);for(var a=arguments.length,d=new Array(a),h=0;h<a;h++)d[h]=arguments[h];return(e=s(this,(t=n(i)).call.apply(t,[this].concat(d)))).moveSpeed=20,e.att=1,e.attRatio=10,e.attCD=1,e.blood=100,e.bloodMax=100,e.skillCD=10,e.attType=1,e.out=new l(0,0,0),e.isDead=!1,e.anim=null,e.target=null,e.body=null,e.bodyRatio=20,e.isElite=!1,e.isBoss=!1,e.isHurting=!1,e.isStoning=!1,e.isActiveByPursue=!1,e.isRewardBox=!1,e.rewardBloodPercent=.95,e.bornDelay=0,e.mulPush=new l(.2,0,.2),e.attTimer=0,e.skillTimer=0,e.lookatTimer=0,e.lastPos=[0,0],e.movePos=new l(0,0,0),e._hurtTimer=0,e._whiteColor=new r(5,5,5,1),e.lastAnimName="idle",e}return e(i,t),a(i,[{key:"start",value:function(){if(this.body=this.node.getChildByName("body"),this.shadow=this.node.getChildByName("shadow"),"RewardStageBox"==this.node.name&&(this.isRewardBox=!0),this.isRewardBox)this.mat=this.body.getComponent(m).material;else{this.anim=this.body.getComponent(c);var t=this.node.getChildByName("body").getChildByName("RootNode").getChildByName("npc");t?this.mat=t.getComponent(u).material:(t=this.node.getChildByName("body").getChildByName("RootNode").getChildByName("npc_boss"),this.mat=t.getComponent(u).material),this.leftHand=this.node.getChildByName("leftHand"),this.rightHand=this.node.getChildByName("rightHand")}}},{key:"reset",value:function(){this.isDead=!1}},{key:"initProperty",value:function(t,i,e,o,s,n,a,d){if(this.body||this.start(),this.moveSpeed=t,this.attRatio=e,this.bloodMax=this.blood=o+(a?o:0),this.att=i,this.attCD=s,this.attType=n,this.isElite=a,this.isBoss=d,this.skillCD=P(this.attType),this.reset(),this.isElite){var h=this.shadow.scale.x;this.body.scale=new l(1.3,1.3,1.3),this.shadow.scale=new l(1.3*h,1.3*h,1.3*h),this.bodyRatio=1.3*this.bodyRatio;var r=y(S.instance.bossBloodPrefab);S.instance.cavasBloodNode.addChild(r),r.getComponent(A).init(this),S.instance.stageinfo.mode==v.PURSUE&&(this.moveSpeed=w[0].moveSpeed-15)}if(this.isBoss){var c=this.shadow.scale.x;this.body.scale=new l(1.8,1.8,1.8),this.shadow.scale=new l(1.8*c,1.8*c,1.8*c),this.bodyRatio=1.8*this.bodyRatio;var u=y(S.instance.bossBloodPrefab);S.instance.cavasBloodNode.addChild(u),u.getComponent(A).init(this),S.instance.stageinfo.mode==v.PURSUE&&(this.moveSpeed=w[0].moveSpeed-15)}}},{key:"update",value:function(t){t>2||this.isDead||S.instance.isGameOver||S.instance.isPauseGame||(this.isRewardBox||(this.updateSearch(t),this.updateAttack(t),this.updateSkill(t),this.updateLookAt(t),this.updateMove(t),this.updatePush(t)),this.updateHitScale(t))}},{key:"updatePush",value:function(t){for(var i=0;i<S.instance.enemys.length;i++)S.instance.enemys[i]!=this&&l.distance(S.instance.enemys[i].node.worldPosition,this.node.worldPosition)<this.bodyRatio&&(this.out=l.subtract(this.out,this.node.worldPosition,S.instance.enemys[i].node.worldPosition).normalize(),this.node.translate(this.out.multiply(this.mulPush),1))}},{key:"updateSearch",value:function(t){if(this.target=null,S.instance.curPlayer&&!S.instance.curPlayer.isDead){for(var i=9999,e=-1,o=0;o<S.instance.players.length;o++){var s=S.instance.players[o];if(!s.isDead){var n=l.distance(this.node.worldPosition,s.node.worldPosition);i>n&&(i=n,e=o)}}e>-1&&(S.instance.stageinfo.mode==v.PURSUE?(i<100&&(this.isActiveByPursue=!0),this.isActiveByPursue&&(this.target=S.instance.players[e])):this.target=S.instance.players[e])}}},{key:"updateAttack",value:function(t){if((this.attTimer+=t,this.target&&!this.target.isDead)&&(!(l.distance(this.node.worldPosition,this.target.node.worldPosition)>this.attRatio)&&this.attTimer>=this.attCD))if(this.attTimer=0,this.attType==B.THROW){var i=Math.random()>.5?1:2;this.changeAnim("gongji"+i);var e=S.instance.getEnemyBulletByPool();if(e){e.active=!0,e.worldPosition=1==i?this.rightHand.worldPosition:this.leftHand.worldPosition;var o=e.addComponent(R),s=this.isElite?1.5:this.isBoss?3:1;e.scale=new l(s,s,s),o.initProperty(this.att,this.node.eulerAngles,s)}}else if(this.attType==B.JUMP){var n=l.distance(this.target.node.worldPosition,this.node.worldPosition);n<15?(this.changeAnim("gongji"),this.target.subBlood(this.att)):n>this.attRatio&&this.changeAnim("jineng1")}else this.changeAnim("gongji"),this.target.subBlood(this.att)}},{key:"updateSkill",value:function(t){var i=this;if((this.skillTimer+=t,this.target&&!this.target.isDead)&&this.skillTimer>=this.skillCD)if(this.skillTimer=0,this.attType==B.JUMP)l.distance(this.target.node.worldPosition,this.node.worldPosition)>=this.attRatio-10&&(f(this.body.position).to(.4,new l(0,25,0),{easing:"sineOut"}).to(.3,new l(0,0,0),{easing:"sineIn"}).union().start(),f(this.node).to(.6,{worldPosition:this.target.node.worldPosition}).union().start(),this.scheduleOnce((function(){for(var t=0;t<S.instance.players.length;t++){if(!S.instance.players[t].isDead)l.distance(i.node.worldPosition,S.instance.players[t].node.worldPosition)<15&&S.instance.players[t].subBlood(2*i.att)}}),.6));else if(this.attType==B.CALL)for(var e=k.getCirclePoints(15,this.node.worldPosition.x,this.node.worldPosition.z,3),o=0;o<3;o++)S.instance.createEnemy(new l(e[o].x,0,e[o].y))}},{key:"updateLookAt",value:function(t){this.lookatTimer+=t,this.lookatTimer>=.2&&S.instance.gameControl&&(this.lookatTimer=0,S.instance.stageinfo.mode==v.PURSUE?this.isActiveByPursue&&this.node.lookAt(S.instance.gameControl.node.position):this.node.lookAt(S.instance.gameControl.node.position))}},{key:"updateMove",value:function(t){if(this.bornDelay+=t,this.target&&!this.isDead&&this.bornDelay>=.3){if(l.distance(this.node.worldPosition,this.target.node.worldPosition)<this.attRatio)return;this.isStoning?(this.isStoning=!1,this.out.x=1.5*-this.moveSpeed*.02,this.out.z=.2*-this.moveSpeed*.02):(this.out.x=0,this.out.z=.02*-this.moveSpeed),this.out.y=0,this.node.translate(this.out,0),this.changeAnim("run")}}},{key:"updateHitScale",value:function(t){this.isHurting&&!this.isDead&&T.instance.isOpenEffect&&(this._hurtTimer+=t,this.out.x=.3*Math.sin(this._hurtTimer)+1,this.out.y=.3*Math.sin(this._hurtTimer)+1,this.out.z=.3*Math.sin(this._hurtTimer)+1,this.node.scale=this.out,this._hurtTimer>=.2&&(this.isHurting=!1,this._hurtTimer=0,this.node.scale=l.ONE))}},{key:"subBlood",value:function(t,i){var e=this;if(!this.isDead){if(this.blood=k.clampf(this.blood-t,0,this.bloodMax),this.isRewardBox)for(;this.blood/this.bloodMax<=this.rewardBloodPercent;)this.rewardBloodPercent-=.05,this.dropRewardBoxGold();if((this.isBoss||this.isElite)&&S.instance.showBlood(t,this.node),this.blood<=0){if("number"==typeof i&&(T.instance.addAchieveCount(i+7),T.instance.addTaskCount(i+9)),this.attType==B.ZIBAO)for(var o=0;o<S.instance.players.length;o++){var s=S.instance.players[o];if(s&&s.node&&!s.isDead)l.distance(this.node.worldPosition,s.node.worldPosition)<30&&s.subBlood(5*this.att)}this.dead()}else this.isHurting=!0,T.instance.isOpenEffect&&this.mat&&(this.mat.setProperty("colorScale",this._whiteColor),this.scheduleOnce((function(){e.mat&&e.mat.setProperty("colorScale",r.ONE)}),.05))}}},{key:"deadEffect",value:function(){if(T.instance.isOpenEffect){var t=S.instance.getEnemyDeadEffectPoolByPool();if(t){t.active=!0,t.worldPosition=this.node.worldPosition;for(var i=0;i<t.children.length;i++){this.isRewardBox&&t.children[i].setScale(2,2,2);var e=t.children[i].getComponent(g);e.stop(),e.play()}setTimeout((function(){S.instance.recoverEnemyDeadEffectToPool(t)}),500)}}if(this.attType==B.ZIBAO){var o=S.instance.getEnemy6ExplodePoolByPool();if(o){o.active=!0,o.worldPosition=this.node.worldPosition;for(var s=0;s<o.children.length;s++){var n=o.children[s].getComponent(g);n.stop(),n.play()}setTimeout((function(){S.instance.recoverEnemy6ExplodeToPool(o)}),500);for(var a=0;a<S.instance.players.length;a++){var d=S.instance.players[a];if(d&&d.node&&!d.isDead)l.distance(this.node.worldPosition,d.node.worldPosition)<30&&d.subBlood(this.att)}}}}},{key:"dead",value:function(){if(!this.isDead){this.isDead=!0,this.deadEffect();var t=S.instance.enemys.indexOf(this);if(t>-1?S.instance.enemys.splice(t,1):console.error("没找到要删除的怪"),S.instance.killCount+=1,k.playSound(C.ENEMYDEAD),this.isRewardBox)return console.log("删除宝箱怪"),this.node.removeFromParent(),void this.node.destroy();if(this.isBoss){var i=y(S.instance.boxPrefab);S.instance.node.addChild(i),i.worldPosition=new l(this.node.worldPosition.x,6,this.node.worldPosition.z),S.instance.eatBox++}if(this.isElite){var e=y(S.instance.boxPrefab);S.instance.node.addChild(e),e.worldPosition=new l(this.node.worldPosition.x,6,this.node.worldPosition.z),S.instance.eatBox++,T.instance.addAchieveCount(5),T.instance.addTaskCount(15)}else this.dropGold();S.instance.recoverEnemyToPool(this)}}},{key:"dropRewardBoxGold",value:function(){for(var t=k.getRandomInt(b,E),i=0;i<t;i++){var e=S.instance.getGoldByPool();if(e){var o=e.getChildByName("body");e.active=!0,e.worldPosition=new l(this.node.worldPosition.x,6,this.node.worldPosition.z),e.addComponent(D).initGold(S.instance.stageinfo.gold,!1);var s=Math.random()>.5?1:-1,n=k.getRandomInt(20,40),a=Math.random()>.5?1:-1,d=k.getRandomInt(20,40),h=new l(this.node.worldPosition.x+s*n,6,this.node.worldPosition.z+a*d);f(e).to(.4,{worldPosition:h}).start();var r=f(o).to(.2,{position:new l(0,40,0)},{easing:"sineOut"}),c=f(o).to(.2,{position:new l(0,0,0)},{easing:"sineIn"});f(o).sequence(r,c).start()}}}},{key:"dropGold",value:function(){var t=S.instance.getGoldByPool();t&&(t.active=!0,t.worldPosition=new l(this.node.worldPosition.x,6,this.node.worldPosition.z),t.addComponent(D).initGold(S.instance.stageinfo.gold))}},{key:"changeAnim",value:function(t){this.lastAnimName==t&&"gongji"!=t||(this.lastAnimName=t,this.anim.play(t))}}]),i}(p))||_)),d._RF.pop()}}}));

System.register("chunks:///GameControl.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./DataManager.js","./Tools.js","./GameManager.js"],(function(t,e){var n,i,o,s,a,c,r,u,h,l,d,y,v,g,S,f,p,m;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){n=t.inherits,i=t.classCallCheck,o=t.possibleConstructorReturn,s=t.getPrototypeOf,a=t.createClass},function(t){c=t.cclegacy,r=t._decorator,u=t.Vec3,h=t.director,l=t.systemEvent,d=t.Component},function(t){y=t.PLAYER_PROPERTY},function(t){v=t.default},function(t){g=t.Tools},function(t){S=t.GameManager}],execute:function(){c._RF.push({},"b3023PrDL9NEa2MPBi/oo3U","GameControl",void 0),m=r.ccclass,r.property,t("GameControl",(f=m("GameControl"),f(p=function(t){function e(){var t,n;i(this,e);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=o(this,(t=s(e)).call.apply(t,[this].concat(c)))).touched=!1,n.moveSpeed=0,n.out=new u(0,0,0),n.moveDir=new u,n.isStoning=!1,n}return n(e,t),a(e,[{key:"start",value:function(){this.moveSpeed=y[0].moveSpeed;var t=h.getScene();t.on("START_JOY",this.onTouchJoy,this),t.on("MOVE_JOY",this.onMoveJoy,this),t.on("END_JOY",this.onEndJoy,this),l.on(cc.SystemEventType.KEY_UP,this.onKeyUp,this)}},{key:"onTouchJoy",value:function(t){if(!v.instance.isGuidingStage&&S.instance&&S.instance.loadOk){var e=cc.v2(cc.winSize.width/2,cc.winSize.height/2);this.joyBegin=t.getUILocation().subtract(e)}}},{key:"onMoveJoy",value:function(t){if(!v.instance.isGuidingStage&&S.instance&&S.instance.loadOk){var e=cc.v2(cc.winSize.width/2,cc.winSize.height/2),n=t.getUILocation().subtract(e),i=n.x-this.joyBegin.x,o=n.y-this.joyBegin.y,s=g.getAngle(i,o);this.moveDir.x=0,this.moveDir.y=-s,this.moveDir.z=0,this.node.setRotationFromEuler(0,-s,0),S.instance.playerArrow.setRotationFromEuler(0,-s,0),this.touched=!0}}},{key:"onEndJoy",value:function(t){this.touched=!1}},{key:"update",value:function(t){if(!(v.instance.isGuidingStage||t>2)){this.touched&&S.instance.players.length>0&&(this.isStoning?(this.isStoning=!1,this.out.x=.02,this.out.z=.02*-this.moveSpeed,this.out.y=0,this.node.translate(this.out,0)):(this.out.x=0,this.out.y=0,this.out.z=.02*-this.moveSpeed,this.node.translate(this.out,0)));var e=new u(this.node.worldPosition.x,0,this.node.worldPosition.z);e.x>S.instance.outSize&&(e.x=S.instance.outSize),e.x<-S.instance.outSize&&(e.x=-S.instance.outSize),e.z>S.instance.outSize&&(e.z=S.instance.outSize),e.z<-S.instance.outSize&&(e.z=-S.instance.outSize),this.node.worldPosition=e}}},{key:"onKeyUp",value:function(t){"1"==t.rawEvent.key?S.instance.addPlayer(0,this.node.worldPosition,!0):"2"==t.rawEvent.key&&S.instance.addPlayer(1,this.node.worldPosition,!0)}},{key:"onDestroy",value:function(){l.targetOff(this)}}]),e}(d))||p)),c._RF.pop()}}}));

System.register("chunks:///PlayerBullet.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./GameManager.js"],(function(e,t){var s,n,i,a,o,l,c,r,d,u,h,y,f;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){s=e.inherits,n=e.classCallCheck,i=e.possibleConstructorReturn,a=e.getPrototypeOf,o=e.createClass},function(e){l=e.cclegacy,c=e._decorator,r=e.Vec3,d=e.Component},function(e){u=e.GameManager}],execute:function(){l._RF.push({},"6fc44NeSy9MgKqRWGvhN12O","PlayerBullet",void 0),f=c.ccclass,c.property,e("PlayerBullet",(h=f("PlayerBullet"),h(y=function(e){function t(){var e,s;n(this,t);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return(s=i(this,(e=a(t)).call.apply(e,[this].concat(l)))).isDead=!1,s.att=1,s.move=new r(0,0,5),s}return s(t,e),o(t,[{key:"reset",value:function(){this.body=this.node.getChildByName("body")}},{key:"init",value:function(e){this.att=e,this.isDead=!1,this.body.position=new r(Math.random()>.5?1:-1,0,0),this.scheduleOnce(this.deadSelf,.5)}},{key:"update",value:function(e){if(!(e>2||u.instance.isPauseGame||this.isDead)){this.node.translate(this.move,0);for(var t=0;t<u.instance.enemys.length;t++){if(!u.instance.enemys[t].isDead&&u.instance.enemys[t].node)if(r.distance(u.instance.enemys[t].node.position,this.node.position)<15)return u.instance.enemys[t].subBlood(this.att,0),void this.deadSelf()}if(u.instance.boss)r.distance(u.instance.boss.node.position,this.node.position)<15&&(u.instance.boss.subBlood(this.att),this.deadSelf())}}},{key:"deadSelf",value:function(){this.isDead||(this.isDead=!0,this.unschedule(this.deadSelf),u.instance.recoverPlayerBulletToPool(this))}}]),t}(d))||y)),l._RF.pop()}}}));

System.register("chunks:///Boom.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./Tools.js","./GameManager.js"],(function(e,o){var t,i,n,s,a,r,c,h,d,l,u,m,f,p,v,y,C,P;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){t=e.inherits,i=e.classCallCheck,n=e.possibleConstructorReturn,s=e.getPrototypeOf,a=e.createClass},function(e){r=e.cclegacy,c=e._decorator,h=e.Vec4,d=e.ModelComponent,l=e.Vec3,u=e.ParticleSystemComponent,m=e.Component},function(e){f=e.SOUND_TYPE},function(e){p=e.Tools},function(e){v=e.GameManager}],execute:function(){r._RF.push({},"922f3sWkxBOML6sDJKvAFym","Boom",void 0),P=c.ccclass,c.property,e("Boom",(y=P("Boom"),y(C=function(e){function o(){var e,t;i(this,o);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=n(this,(e=s(o)).call.apply(e,[this].concat(r)))).isDead=!1,t.att=0,t.headTimer=0,t.headColor=new h(1,1,1,1),t}return t(o,e),a(o,[{key:"init",value:function(e){this.headMat=this.node.getChildByName("boom").getChildByName("head").getComponent(d).material,this.att=e,this.scheduleOnce(this.boom,4)}},{key:"update",value:function(e){e>2||v.instance.isPauseGame||this.isDead||(this.updateTouch(),this.headMat&&(this.headTimer+=8*e,this.headColor.y=p.clampf(Math.sin(this.headTimer),0,1),this.headColor.z=p.clampf(Math.sin(this.headTimer),0,1),this.headMat.setProperty("mainColor",this.headColor)))}},{key:"updateTouch",value:function(){for(var e=0;e<v.instance.enemys.length;e++){var o=v.instance.enemys[e];if(o&&o.node)if(l.distance(this.node.worldPosition,o.node.worldPosition)<15)return void this.boom()}}},{key:"boom",value:function(){if(!this.isDead){this.isDead=!0,this.node.active=!1;var e=v.instance.getBoomEffectPoolByPool();if(e){e.active=!0,e.worldPosition=this.node.worldPosition;for(var o=0;o<e.children.length;o++){var t=e.children[o].getComponent(u);t.stop(),t.play()}setTimeout((function(){v.instance.recoverBoomEffectToPool(e)}),1e3)}for(var i=0;i<v.instance.enemys.length;i++){var n=v.instance.enemys[i];if(n&&n.node&&!n.isDead)l.distance(this.node.worldPosition,n.node.worldPosition)<30&&n.subBlood(this.att,3)}p.playSound(f.BOOMEXP),this.dead()}}},{key:"dead",value:function(){this.node&&v.instance.recoverBoomToPool(this)}}]),o}(m))||C)),r._RF.pop()}}}));

System.register("chunks:///WuRenJi.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./DataManager.js","./GameManager.js"],(function(t,e){var i,o,s,n,a,r,h,l,c,u,d,f,w,g;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){i=t.inherits,o=t.classCallCheck,s=t.possibleConstructorReturn,n=t.getPrototypeOf,a=t.createClass},function(t){r=t.cclegacy,h=t._decorator,l=t.Vec3,c=t.Component},function(t){u=t.default},function(t){d=t.GameManager}],execute:function(){r._RF.push({},"45854SZEKRHjpeRWQ4GscFk","WuRenJi",void 0),g=h.ccclass,h.property,t("WuRenJi",(f=g("WuRenJi"),f(w=function(t){function e(){var t,i;o(this,e);for(var a=arguments.length,r=new Array(a),h=0;h<a;h++)r[h]=arguments[h];return(i=s(this,(t=n(e)).call.apply(t,[this].concat(r)))).out=new l,i.notSearch=!1,i.attTimer=0,i}return i(e,t),a(e,[{key:"init",value:function(t,e){this.owner=t,this.followNode=e,this.effectNode=this.node.getChildByName("bulleffect"),this.effectNode.active=!1}},{key:"update",value:function(t){if(!(t>2)&&!d.instance.isPauseGame&&this.owner&&!this.owner.isDead){if(this.target=null,null==this.target)for(var e=999,i=0;i<d.instance.enemys.length;i++){var o=d.instance.enemys[i];if(o.node&&!o.isDead){var s=l.distance(this.node.worldPosition,o.node.worldPosition);s<e&&s<this.owner.attRatio&&(e=s,this.target=o)}}this.target&&this.target.isDead&&(this.target=null);var n=l.distance(this.node.worldPosition,this.followNode.worldPosition);n>this.owner.attRatio&&!this.notSearch&&(this.notSearch=!0,this.scheduleOnce(this.resetSearch,.6)),!this.notSearch&&this.target&&this.target.node&&n<=this.owner.attRatio?(l.lerp(this.out,this.node.worldPosition,this.target.node.worldPosition,.05),this.out.y=26,this.node.setWorldPosition(this.out)):this.followNode&&(l.lerp(this.out,this.node.worldPosition,this.followNode.worldPosition,.1),this.out.y=26,this.node.setWorldPosition(this.out)),u.instance.isOpenEffect&&(this.effectNode.active=null!=this.target)}}},{key:"resetSearch",value:function(){this.notSearch=!1}},{key:"updateShoot",value:function(t){this.attTimer+=t,this.target&&!this.target.isDead&&this.attTimer>=this.owner.attCD/this.owner.passSkillAttSpeedScale&&(this.attTimer=0,this.target.subBlood(this.owner.att*this.owner.passSkillAttScale*(1==this.owner.star?1:2==this.owner.star?1.5:3),this.owner.attType-1))}}]),e}(c))||w)),r._RF.pop()}}}));

System.register("chunks:///DaoDan.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./DataManager.js","./GameManager.js"],(function(e,n){var t,o,s,i,a,r,c,l,d,u,h,f,p,v,y,m;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){t=e.inherits,o=e.classCallCheck,s=e.possibleConstructorReturn,i=e.getPrototypeOf,a=e.createClass,r=e.asyncToGenerator},function(e){c=e.cclegacy,l=e._decorator,d=e.Vec3,u=e.Component,h=e.ParticleSystemComponent},function(e){f=e.default},function(e){p=e.GameManager}],execute:function(){c._RF.push({},"b5149FSSSZNepCpnnF43C67","DaoDan",void 0),m=l.ccclass,l.property,e("DaoDan",(v=m("DaoDan"),v(y=function(e){function n(){var e,t;o(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=s(this,(e=i(n)).call.apply(e,[this].concat(r)))).isDead=!1,t.att=10,t.move=new d(0,0,-2),t}var c;return t(n,e),a(n,[{key:"start",value:function(){this.node.eulerAngles=new d(this.node.eulerAngles.x,180+this.node.eulerAngles.y,this.node.eulerAngles.z),this.scheduleOnce(this.explode,1)}},{key:"update",value:function(e){if(!(e>2||p.instance.isPauseGame)){this.node.translate(this.move,0);for(var n=0;n<p.instance.enemys.length;n++){if(!p.instance.enemys[n].isDead&&p.instance.enemys[n].node)if(d.distance(p.instance.enemys[n].node.position,this.node.position)<25)return void this.explode()}if(p.instance.boss)d.distance(p.instance.boss.node.position,this.node.position)<25&&this.explode()}}},{key:"explode",value:(c=r(regeneratorRuntime.mark((function e(){var n,t,o,s,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f.instance.isOpenEffect&&(n=p.instance.getDaodanEffectPoolByPool())){for(n.active=!0,n.worldPosition=this.node.worldPosition,t=0;t<n.children.length;t++)(o=n.children[t].getComponent(h)).stop(),o.play();setTimeout((function(){p.instance.recoverDaodanEffectToPool(n)}),1e3)}for(s=0;s<p.instance.enemys.length;s++)(i=p.instance.enemys[s])&&i.node&&!i.isDead&&d.distance(this.node.worldPosition,i.node.worldPosition)<30&&i.subBlood(this.att,5);this.deadSelf();case 3:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"deadSelf",value:function(){this.isDead||(this.isDead=!0,p.instance.recoverDaoDanToPool(this))}}]),n}(u))||y)),c._RF.pop()}}}));

System.register("chunks:///UIPlayerBlood.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./GameManager.js"],(function(e,t){var o,s,a,r,i,n,l,c,d,h,p,u,y;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){o=e.inherits,s=e.classCallCheck,a=e.possibleConstructorReturn,r=e.getPrototypeOf,i=e.createClass},function(e){n=e.cclegacy,l=e._decorator,c=e.ProgressBarComponent,d=e.Component},function(e){h=e.GameManager}],execute:function(){n._RF.push({},"e3b2ezZC9xK/buY16gogAO6","UIPlayerBlood",void 0),y=l.ccclass,l.property,e("UIPlayerBlood",(p=y("UIPlayerBlood"),p(u=function(e){function t(){var e,o;s(this,t);for(var i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return(o=a(this,(e=r(t)).call.apply(e,[this].concat(n)))).isDead=!1,o}return o(t,e),i(t,[{key:"init",value:function(e){this.bar=this.node.getChildByName("ProgressBar").getComponent(c),this.player=e,this.schedule(this.updatePos)}},{key:"updatePos",value:function(){if(this.player&&!this.player.isDead)if(this.player.blood>=this.player.bloodMax)this.bar.node.active=!1;else{this.bar.node.active=!0,this.bar.progress=this.player.blood/this.player.bloodMax;var e=h.instance.getScreenPos(this.player.node);e.y+=60*this.player.node.scale.x,this.node.position=e}else this.dead()}},{key:"dead",value:function(){this.isDead||(this.isDead=!0,this.node.removeFromParent(),this.node.destroy())}}]),t}(d))||u)),n._RF.pop()}}}));

System.register("chunks:///SuperBoom.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./Tools.js","./GameManager.js"],(function(e,o){var t,n,s,i,r,c,l,a,u,d,h,p,f,m,v,g;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){t=e.inherits,n=e.classCallCheck,s=e.possibleConstructorReturn,i=e.getPrototypeOf,r=e.createClass},function(e){c=e.cclegacy,l=e._decorator,a=e.Vec3,u=e.ParticleSystemComponent,d=e.Component},function(e){h=e.SOUND_TYPE},function(e){p=e.Tools},function(e){f=e.GameManager}],execute:function(){c._RF.push({},"29404NHXgFNp5c1Y4EUrhgb","SuperBoom",void 0),g=l.ccclass,l.property,e("SuperBoom",(m=g("SuperBoom"),m(v=function(e){function o(){var e,t;n(this,o);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return(t=s(this,(e=i(o)).call.apply(e,[this].concat(c)))).att=0,t.out=new a,t.isDead=!1,t.curY=0,t.moveSpeed=new a(0,0,-3),t}return t(o,e),r(o,[{key:"init",value:function(e,o){this.att=e,this.target=o,this.curY=90,this.node.eulerAngles=new a(this.curY,this.node.eulerAngles.y,this.node.eulerAngles.z),this.schedule(this.updateMove)}},{key:"updateMove",value:function(){this.isDead||(this.node.translate(this.moveSpeed,0),this.curY=p.clampf(this.curY-5,-90,90),this.node.eulerAngles=new a(this.curY,this.node.eulerAngles.y,this.node.eulerAngles.z),this.node.worldPosition.y<10&&this.boom())}},{key:"boom",value:function(){this.isDead=!0;var e=f.instance.getSuperBoomEffectPoolByPool();if(e){e.active=!0,e.worldPosition=new a(this.node.worldPosition.x,0,this.node.worldPosition.z);for(var o=0;o<e.children.length;o++){var t=e.children[o].getComponent(u);t.stop(),t.play()}setTimeout((function(){f.instance.recoverSuperBoomEffectToPool(e)}),1e3)}for(var n=0;n<f.instance.enemys.length;n++){var s=f.instance.enemys[n];if(s&&s.node&&!s.isDead)a.distance(this.node.worldPosition,s.node.worldPosition)<40&&s.subBlood(this.att,3)}p.playSound(h.BOOMEXP),this.node.removeFromParent(),this.node.destroy()}}]),o}(d))||v)),c._RF.pop()}}}));

System.register("chunks:///SuperDaoDan.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./DataManager.js","./Tools.js","./GameManager.js"],(function(e,t){var o,n,i,s,a,r,u,c,l,d,h,f,p,v,g,y,D,P;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){o=e.inherits,n=e.classCallCheck,i=e.possibleConstructorReturn,s=e.getPrototypeOf,a=e.createClass},function(e){r=e.cclegacy,u=e._decorator,c=e.Vec3,l=e.Quat,d=e.ParticleSystemComponent,h=e.Component},function(e){f=e.SOUND_TYPE},function(e){p=e.default},function(e){v=e.Tools},function(e){g=e.GameManager}],execute:function(){r._RF.push({},"58a388EpTZLLK6Akr++9glJ","SuperDaoDan",void 0),P=u.ccclass,u.property,e("SuperDaoDan",(y=P("SuperDaoDan"),y(D=function(e){function t(){var e,o;n(this,t);for(var a=arguments.length,r=new Array(a),u=0;u<a;u++)r[u]=arguments[u];return(o=i(this,(e=s(t)).call.apply(e,[this].concat(r)))).moveSpeed=new c(0,0,-2),o.out=new c,o.outQ=new l,o.isDead=!1,o.att=10,o.curY=0,o}return o(t,e),a(t,[{key:"init",value:function(e,t){this.endPos=e,this.att=t,this.curY=90,this.node.eulerAngles=new c(this.curY,180+this.node.eulerAngles.y,this.node.eulerAngles.z),this.schedule(this.updateAtt)}},{key:"updateAtt",value:function(){this.isDead||(this.node.translate(this.moveSpeed,0),this.curY=v.clampf(this.curY-3,-90,90),this.node.eulerAngles=new c(this.curY,this.node.eulerAngles.y,this.node.eulerAngles.z),this.node.worldPosition.y<10&&this.dead())}},{key:"getLookAtRot",value:function(){return c.subtract(this.out,this.node.worldPosition,this.endPos),c.normalize(this.out,this.out),l.fromViewUp(this.outQ,this.out,c.UP),this.outQ}},{key:"dead",value:function(){if(this.isDead=!0,p.instance.isOpenEffect){var e=g.instance.getDaodanEffectPoolByPool();if(e){e.active=!0,e.worldPosition=this.node.worldPosition;for(var t=0;t<e.children.length;t++){var o=e.children[t].getComponent(d);o.stop(),o.play()}setTimeout((function(){g.instance.recoverDaodanEffectToPool(e)}),1e3)}}for(var n=0;n<g.instance.enemys.length;n++){var i=g.instance.enemys[n];if(i&&i.node&&!i.isDead)c.distance(this.node.worldPosition,i.node.worldPosition)<20&&i.subBlood(this.att,5)}g.instance.recoverSuperDaoDanToPool(this),v.playSound(f.HUOJIANEXP)}}]),t}(h))||D)),r._RF.pop()}}}));

System.register("chunks:///Player.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./DataManager.js","./Tools.js","./PlayerBullet.js","./Boom.js","./WuRenJi.js","./DaoDan.js","./UIPlayerBlood.js","./SuperBoom.js","./SuperDaoDan.js","./GameManager.js"],(function(t,e){var i,s,n,o,a,l,h,r,d,u,c,f,p,g,S,y,m,v,k,P,w,A,C,E,T,D,N,R,b,O,B,_,x,j,G,H,I,L,F;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){i=t.inherits,s=t.classCallCheck,n=t.possibleConstructorReturn,o=t.getPrototypeOf,a=t.createClass,l=t.asyncToGenerator},function(t){h=t.cclegacy,r=t._decorator,d=t.Vec3,u=t.tween,c=t.ParticleSystemComponent,f=t.instantiate,p=t.Component,g=t.SkeletalAnimationComponent,S=t.Prefab,y=t.ModelComponent,m=t.Texture2D,v=t.AudioSourceComponent,k=t.AudioClip,P=t.Node},function(t){w=t.PLAYER_ATT_TYPE,A=t.PLAYER_SKILL_DATA,C=t.SOUND_TYPE,E=t.EQUIP_ADD_TYPE,T=t.PLAYER_DATA,D=t.EQUIP_INFO},function(t){N=t.default},function(t){R=t.Tools},function(t){b=t.PlayerBullet},function(t){O=t.Boom},function(t){B=t.WuRenJi},function(t){_=t.DaoDan},function(t){x=t.UIPlayerBlood},function(t){j=t.SuperBoom},function(t){G=t.SuperDaoDan},function(t){H=t.GameManager}],execute:function(){h._RF.push({},"a19afWfw59I4qR85dAIwAl7","Player",void 0),F=r.ccclass,r.property,t("Player",(I=F("Player"),I(L=function(t){function e(){var t,i;s(this,e);for(var a=arguments.length,l=new Array(a),h=0;h<a;h++)l[h]=arguments[h];return(i=n(this,(t=o(e)).call.apply(t,[this].concat(l)))).isDead=!1,i.out=new d(0,0,0),i.moveSpeed=.7,i.att=1,i.attRatio=10,i.attCD=1,i.blood=100,i.bloodMax=100,i.skillCD=10,i.attType=1,i.curPlayerInfo=null,i.isControl=!1,i.isFollow=!1,i.isSetFollow=!1,i.target=null,i.fightEffect=null,i.skillEffect=null,i.bloodAddEffect=null,i.dunEffect=null,i.flashEffectMat=null,i.flashTextures=[],i.flashLineNode=null,i.flashEndNode=null,i.anim=null,i.star=1,i.wurenjis=[],i.isWuDi=!1,i.gunSound=null,i.isGunSoundPlay=!1,i.gunHighSpeedSound=null,i.curGunSound=null,i.isRuning=!1,i.lastPosX=0,i.lastPosZ=0,i.lastAnimName="idle",i.isLockRot=!1,i.attTimer=0,i._passiveSkilling=!1,i._passiveSkillDurationTimer=0,i.passiveSkillCDTimer=0,i.passSkillAttScale=1,i.passSkillAttSpeedScale=1,i._specialSkillOpen=!1,i._bloodSkillTimer=0,i._bloodSkillOpen=!1,i}var h,r;return i(e,t),a(e,[{key:"initProperty",value:(r=l(regeneratorRuntime.mark((function t(e,i,s,n,o,a){var l,h,r,d,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.body=this.node.getChildByName("body"),this.fightEffect=this.node.getChildByName("bulleffect"),this.skillEffect=this.node.getChildByName("skillEffect"),this.bloodAddEffect=this.node.getChildByName("bloodAddEffect"),this.dunEffect=this.node.getChildByName("dunEffect"),this.anim=this.body.getComponent(g),this.moveSpeed=e,this.attRatio=s,this.bloodMax=this.blood=n,this.att=i,this.attCD=o,this.attType=a,this.curPlayerInfo=N.instance.getPlayerInfoById(a-1),this.attType!=w.TOUDAN){t.next=22;break}return this.leftHand=this.body.getChildByName("Bip001 L Hand Socket").getChildByName("L_shoukong"),this.rightHand=this.body.getChildByName("Bip001 R Hand Socket").getChildByName("R_shoukong"),t.next=18,R.loadRes("prefabs/superBoom",S);case 18:this.superBoom=t.sent,this.superBoomEffectNode=this.node.getChildByName("superBoomEffect"),t.next=25;break;case 22:(l=this.body.getChildByName("Bip002 R Hand Socket"))||(l=this.body.getChildByName("Bip001 R Hand Socket")),this.rightHand=l.getChildByName("shoukong");case 25:if(this.initWeapon(),this.flashLineNode=this.fightEffect.getChildByName("flashEffect"),!this.flashLineNode){t.next=41;break}this.flashEndNode=this.fightEffect.getChildByName("end"),h=this.flashLineNode.getChildByName("dian").getComponent(y),this.flashEffectMat=h.material,r=1;case 32:if(!(r<=8)){t.next=40;break}return t.next=35,R.loadRes("textures/dian/dian"+r,m);case 35:d=t.sent,this.flashTextures.push(d);case 37:r++,t.next=32;break;case 40:this.schedule(this.updateFlashEffect,.02);case 41:if(u=f(H.instance.uiBloodPrefab),H.instance.cavas.addChild(u),u.addComponent(x).init(this),this.schedule(this.updateSpecialSkill,1),this.schedule(this.updateBloodAddSkill,1),1!=N.instance.soundOpen){t.next=61;break}return this.gunAudioSourceComponent=this.node.addComponent(v),t.next=51,R.loadRes(C.WEAPONSOUND+this.attType,k);case 51:return this.gunSound=t.sent,this.gunAudioSourceComponent.clip=this.gunSound,this.gunAudioSourceComponent.loop=!0,this.gunHighSpeedAudioSourceComponent=this.node.addComponent(v),t.next=57,R.loadRes(C.WEAPONSOUND+this.attType+"_high",k);case 57:this.gunHighSpeedSound=t.sent,this.gunHighSpeedAudioSourceComponent.clip=this.gunHighSpeedSound,this.gunHighSpeedAudioSourceComponent.loop=!0,this.curGunSound=this.gunSound;case 61:case 62:case"end":return t.stop()}}),t,this)}))),function(t,e,i,s,n,o){return r.apply(this,arguments)})},{key:"initWeapon",value:(h=l(regeneratorRuntime.mark((function t(){var e,i,s,n,o,a,l,h,r,u,c,p,g,y,m,v,k,A,C,b,O,_,x,j,G;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=Math.floor(this.attType-1),i=N.instance.getPlayerInfoById(e),s=T[e],n=-1,o=0;o<=i.lv;o++)s[o].unlockWeapon&&(n=s[o].unlockWeapon);if(console.log("玩家",e,"解锁武器id",n),this.attType!=w.TOUDAN){t.next=22;break}return t.next=9,R.loadRes("prefabs/boomSmall",S);case 9:a=t.sent,l=f(a),this.leftHand.addChild(l),l.position=d.ZERO,l.eulerAngles=d.ZERO,l.scale=d.ONE,h=f(a),this.rightHand.addChild(h),h.position=d.ZERO,h.eulerAngles=d.ZERO,h.scale=d.ONE,t.next=30;break;case 22:return t.next=24,R.loadRes("prefabs/weapon/player"+e+"_weapon"+n,S);case 24:r=t.sent,u=f(r),this.rightHand.addChild(u),u.position=d.ZERO,u.eulerAngles=d.ZERO,u.scale=d.ONE;case 30:if(this.attType!=w.WURENJI){t.next=44;break}if(c=1,this.isOpenSkillEquip())for(c++,p=this.curPlayerInfo.weaponLv[2],g=D[14],y=0;y<p;y++)g.addType[y]==E.wurenji&&c++;for(this.wurenjiNode=new P,this.node.parent.addChild(this.wurenjiNode),m=R.getCirclePoints(30,0,0,c+1),v=[],k=1;k<m.length;k++)v.push(new d(m[k].x,0,m[k].y));for(A=[],C=0;C<v.length;C++)b=v[C],O=new P,this.wurenjiNode.addChild(O),O.position=b,A.push(O);return t.next=42,R.loadRes("prefabs/weapon/wurenji_"+n,S);case 42:for(_=t.sent,x=0;x<c;x++)j=f(_),this.node.parent.addChild(j),(G=j.addComponent(B)).init(this,A[x]),j.worldPosition=A[x].worldPosition,this.wurenjis.push(G);case 44:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"update",value:function(t){t>2||H.instance&&H.instance.loadOk&&(H.instance.isPauseGame?this.isGunSoundPlay&&this.gunHighSpeedSound&&(this.isGunSoundPlay=!1,this.gunSound.stop(),this.gunHighSpeedSound.stop()):(this.isDead||(this.updateSearch(t),this.updateLook(t),this.updateShoot(t),this.updateMove(t),this.updatePassiveSkill(t),this.updateSound()),this.wurenjiNode&&(this.wurenjiNode.setWorldPosition(this.node.worldPosition),this.wurenjiNode.setRotationFromEuler(0,this.wurenjiNode.eulerAngles.y+1,0))))}},{key:"updateMove",value:function(t){var e=this;if(this.isControl)H.instance.gameControl.touched?(this.changeAnim("run"),this.node.worldPosition=H.instance.gameControl.node.worldPosition):this.target||this.changeAnim("idle");else if(this.isFollow){this.changeAnim("run");var i=H.instance.getFollowPos(this),s=new d;d.add(s,H.instance.gameControl.node.worldPosition,i);var n=d.subtract(this.out,s,this.node.worldPosition).normalize();n.y=0,n=n.multiply(new d(.02*this.moveSpeed,0,.02*this.moveSpeed)),this.node.translate(n,1);var o=d.distance(this.node.worldPosition,s);o<2.5?(this.isFollow=!1,this.isSetFollow=!1):o>70&&(this.node.worldPosition=s)}else if(this.target||this.changeAnim("idle"),!this.isSetFollow){var a=H.instance.getFollowPos(this);d.add(this.out,H.instance.gameControl.node.worldPosition,a),d.distance(this.node.worldPosition,this.out)>6&&(this.isSetFollow=!0,this.scheduleOnce((function(){e.isFollow=!0}),.2*Math.random()+.2))}var l=Math.floor(this.node.worldPosition.x),h=Math.floor(this.node.worldPosition.z);this.isRuning=this.lastPosX!=l||this.lastPosZ!=h,this.lastPosX=l,this.lastPosZ=h}},{key:"updateSearch",value:function(t){this.target=null;for(var e=9999,i=-1,s=0;s<H.instance.enemys.length;s++){var n=H.instance.enemys[s];if(!n.isDead){var o=d.distance(this.node.worldPosition,n.node.position);o<this.attRatio&&e>o&&(e=o,i=s)}}(i>-1&&(this.target=H.instance.enemys[i]),H.instance.boss&&H.instance.boss.node)&&(d.distance(this.node.worldPosition,H.instance.boss.node.position)<e&&(this.target=H.instance.boss))}},{key:"updateLook",value:function(t){this.target?this.node.lookAt(this.target.node.worldPosition):this.isLockRot||(this.node.eulerAngles=H.instance.gameControl.moveDir)}},{key:"hitPushEnemy",value:function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i&&i.node&&!i.isDead&&!i.isRewardBox){var s=d.subtract(this.out,i.node.worldPosition,this.node.worldPosition).normalize().multiplyScalar(10);u(i.node.position).by(.2,s).union().start()}}}},{key:"changeAnim",value:function(t){this.lastAnimName.indexOf("death")>-1||("run_gongji"!=this.lastAnimName&&"gongji"!=this.lastAnimName||"run"!=t||!this.target)&&(this.lastAnimName.indexOf("jineng")>-1&&t.indexOf("death")<0||this.lastAnimName!=t&&(this.lastAnimName=t,this.anim.play(t)))}},{key:"updateShoot",value:function(t){var e=this;if(!H.instance.isGameOver){if(this.attTimer+=t,this.target&&!this.target.isDead&&this.attTimer>=this.attCD/this.passSkillAttSpeedScale)if(this.attTimer=0,this.isRuning?this.changeAnim("run_gongji"):this.changeAnim("gongji"),this.isControl&&R.shake(),this.attType==w.SANDAN){if(this.isLockRot=!0,N.instance.isOpenEffect){var i=H.instance.getGunFireByPool(2);if(i){i.active=!0,i.worldPosition=this.fightEffect.worldPosition,i.worldRotation=this.fightEffect.worldRotation;for(var s=0;s<i.children.length;s++){var n=i.children[s].getComponent(c);n.stop(),n.play()}this.scheduleOnce((function(){e.isLockRot=!1,H.instance.recoverGunFireToPool(i,2)}),.5)}}this.out.x=this.fightEffect.worldPosition.x,this.out.y=0,this.out.z=this.fightEffect.worldPosition.z;for(var o=d.subtract(this.out,this.out,this.node.worldPosition).normalize(),a=[],l=0;l<H.instance.enemys.length;l++){var h=H.instance.enemys[l];if(h.node&&!h.isDead)R.isPointInCircularSector(this.node.worldPosition.x,this.node.worldPosition.z,o.x,o.z,60,.5,h.node.worldPosition.x,h.node.worldPosition.z)&&a.push(h)}this.hitPushEnemy(a);for(var r=0;r<a.length;r++)a[r].subBlood(this.att*this.passSkillAttScale*(1==this.star?1:2==this.star?1.5:3),this.attType-1)}else if(this.attType==w.JIQIANG){var u=H.instance.getPlayerBulletByPool();if(u)u.active=!0,u.worldPosition=this.fightEffect.worldPosition,u.worldRotation=this.fightEffect.worldRotation,u.getComponent(b).init(this.att*this.passSkillAttScale*(1==this.star?1:2==this.star?1.5:3))}else if(this.attType==w.FLASH)this.target.subBlood(this.att*this.passSkillAttScale*(1==this.star?1:2==this.star?1.5:3),this.attType-1),this.fightEffect.active=!0,this.scheduleOnce((function(){e.fightEffect.active=!1}),this.attCD/2);else if(this.attType==w.TOUDAN){var f=H.instance.getBoomPoolByPool();if(f)f.active=!0,f.worldPosition=this.node.worldPosition,f.addComponent(O).init(this.att*this.passSkillAttScale*(1==this.star?1:2==this.star?1.5:3))}else if(this.attType==w.WURENJI);else if(this.attType==w.DAODAN){var p=H.instance.getDaoDanPoolByPool();if(p&&(p.active=!0,p.worldPosition=this.fightEffect.worldPosition,p.worldRotation=this.fightEffect.worldRotation,p.addComponent(_)),this.isLockRot=!0,N.instance.isOpenEffect){var g=H.instance.getGunFireByPool(6);if(g){g.active=!0,g.worldPosition=this.fightEffect.worldPosition,g.worldRotation=this.fightEffect.worldRotation;for(var S=0;S<g.children.length;S++){var y=g.children[S].getComponent(c);y.stop(),y.play()}this.scheduleOnce((function(){e.isLockRot=!1,H.instance.recoverGunFireToPool(g,6)}),.5)}}}if(N.instance.isOpenEffect)if(this.attType==w.JIQIANG)this.fightEffect.active=null!=this.target;else if(this.attType==w.FLASH&&this.target&&this.target.node){var m=d.distance(this.node.worldPosition,this.target.node.worldPosition);this.flashLineNode.setScale(1,1,m/50*(2-this.node.scale.x)),this.flashEndNode.setPosition(0,0,(10-m)*(2-this.node.scale.x))}}}},{key:"updateSound",value:function(){H.instance.isGameOver?this.isGunSoundPlay&&this.gunHighSpeedSound&&(this.isGunSoundPlay=!1,this.gunSound.stop(),this.gunHighSpeedSound.stop()):this.curGunSound&&(this.target?this.isGunSoundPlay||(this.isGunSoundPlay=!0,this.curGunSound.setCurrentTime(0),this.curGunSound.play()):this.isGunSoundPlay&&this.gunHighSpeedSound&&(this.isGunSoundPlay=!1,this.gunSound.stop(),this.gunHighSpeedSound.stop()))}},{key:"changeSound",value:function(t){this.curGunSound&&(this.curGunSound.stop(),this.curGunSound=t?this.gunHighSpeedSound:this.gunSound,this.curGunSound.setCurrentTime(0),this.curGunSound.play())}},{key:"addStar",value:function(){this.star++,this.moveSpeed*=1.5,u(this.node).to(.7,{scale:new d(1.1,1.1,1.1)}).start()}},{key:"updatePassiveSkill",value:function(t){var e=this;if(this.isOpenSkillEquip()){var i=A[this.attType-1];if(i)if(this._passiveSkilling)this._passiveSkillDurationTimer+=t,this._passiveSkillDurationTimer>=i.duration&&(this._passiveSkilling=!1,this._passiveSkillDurationTimer=0,this.attType==w.JIQIANG&&(1==this.star?u(this.node).to(.7,{scale:new d(1,1,1)}).start():u(this.node).to(.7,{scale:new d(1.1,1.1,1.1)}).start()),this.passSkillAttScale=1,this.passSkillAttSpeedScale=1,this.skillEffect.active=!1,this._specialSkillOpen=!1,this.changeSound(!1));else if(this.passiveSkillCDTimer+=t,this.target&&this.passiveSkillCDTimer>=i.skillCD){if(this.passiveSkillCDTimer=0,this._passiveSkilling=!0,this.attType==w.JIQIANG)u(this.node).to(.7,{scale:new d(1.5,1.5,1.5)}).start(),H.instance.skillUseCount+=1;else if(this.attType==w.TOUDAN){this.changeAnim("jineng1"),this.scheduleOnce((function(){e.lastAnimName="",e.changeAnim("idle")}),.3),this.scheduleOnce((function(){for(var t=0;t<e.superBoomEffectNode.children.length;t++){var i=e.superBoomEffectNode.children[t].getComponent(c);i.stop(),i.play()}}),.1);var s=f(this.superBoom);this.node.parent.addChild(s),s.worldPosition=this.skillEffect.worldPosition,s.worldRotation=this.fightEffect.worldRotation,s.addComponent(j).init(this.att*this.passSkillAttScale*(1==this.star?1:2==this.star?1.5:3),this.target.node.worldPosition.clone()),R.playSound(C.BOOMFLY),this._passiveSkillDurationTimer=i.duration,H.instance.skillUseCount+=1}else if(this.attType==w.DAODAN){for(var n=function(t){var i=e.target.node.position.clone();e.scheduleOnce((function(){var t=H.instance.getDaoDanPoolByPool();if(t){t.active=!0,t.worldPosition=new d(e.skillEffect.worldPosition.x+R.getRandom(-10,10),e.skillEffect.worldPosition.y,e.skillEffect.worldPosition.z+R.getRandom(-10,10)),t.worldRotation=e.fightEffect.worldRotation;var s=t.addComponent(G),n=new d(i.x+R.getRandom(-20,20),0,i.z+R.getRandom(-20,20));s.init(n,e.att*e.passSkillAttScale*(1==e.star?1:2==e.star?1.5:3)),R.playSound(C.HUOJIAN)}}),.2*t)},o=0;o<5;o++)n(o);this._passiveSkillDurationTimer=i.duration,H.instance.skillUseCount+=1}this.passSkillAttScale=i.attScale,this.passSkillAttSpeedScale=i.attSpeedScale,this.skillEffect.active=!0,this._specialSkillOpen=!0,this.changeSound(!0)}}}},{key:"updateSpecialSkill",value:function(t){if(this._specialSkillOpen){if(this.attType==w.FLASH)for(var e=0;e<H.instance.players.length;e++)H.instance.players[e]&&!H.instance.players[e].isDead&&H.instance.players[e].setWuDi(!0);H.instance.skillUseCount+=1}else if(this.attType==w.FLASH)for(var i=0;i<H.instance.players.length;i++)H.instance.players[i]&&!H.instance.players[i].isDead&&H.instance.players[i].setWuDi(!1)}},{key:"updateBloodAddSkill",value:function(){if(this.attType==w.FLASH)if(this._bloodSkillTimer+=1,this._bloodSkillOpen){this._bloodSkillTimer>=A[this.attType-1].bloodDuration&&(this._bloodSkillTimer=0,this._bloodSkillOpen=!1);for(var t=0;t<H.instance.players.length;t++)if(H.instance.players[t]&&!H.instance.players[t].isDead){var e=A[this.attType-1].bloodAdd/100*H.instance.players[t].bloodMax;H.instance.players[t].blood+=Math.floor(e),H.instance.players[t].bloodAddEffect.active=!0}H.instance.skillUseCount+=1}else{this._bloodSkillTimer>=A[this.attType-1].bloodAddCD&&(this._bloodSkillTimer=0,this._bloodSkillOpen=!0);for(var i=0;i<H.instance.players.length;i++)H.instance.players[i]&&!H.instance.players[i].isDead&&(H.instance.players[i].bloodAddEffect.active=!1)}}},{key:"isOpenSkillEquip",value:function(){return this.curPlayerInfo.weaponLv[2]>0}},{key:"setWuDi",value:function(t){this.isWuDi!=t&&(this.dunEffect.active=t,this.isWuDi=t)}},{key:"updateFlashEffect",value:function(){if(this.flashTextures.length>0){var t=R.getRandomInt(0,this.flashTextures.length-1);this.flashEffectMat.setProperty("mainTexture",this.flashTextures[t])}}},{key:"subBlood",value:function(t){if(!this.isDead&&!this.isWuDi&&(H.instance.playerBloodSoundOpen&&(R.playSound(C.PLAYERHURT),H.instance.playerBloodSoundOpen=!1,this.scheduleOnce((function(){H.instance.playerBloodSoundOpen=!0}),.5*Math.random()+.5)),this.blood=R.clampf(this.blood-t,0,this.bloodMax),this.blood<=0)){this.isDead=!0,this.fightEffect.active=!1,this.gunSound&&this.gunSound.stop();var e=R.getRandomInt(1,2);this.anim.play("death"+e),this.scheduleOnce(this.dead,.3)}}},{key:"dead",value:function(){var t=this;if(this.isDead=!0,H.instance.curPlayer==this&&H.instance.changePlayerControl(),this.attType==w.FLASH){for(var e=0;e<H.instance.players.length;e++)H.instance.players[e]&&!H.instance.players[e].isDead&&(H.instance.players[e].bloodAddEffect.active=!1);if(this.attType==w.FLASH)for(var i=0;i<H.instance.players.length;i++)H.instance.players[i]&&!H.instance.players[i].isDead&&H.instance.players[i].setWuDi(!1)}var s=H.instance.players.indexOf(this);s>-1&&(H.instance.players.splice(s,1),H.instance.playerDeadCount+=1);var n="death"+R.getRandomInt(1,2);if(this.changeAnim(n),this.scheduleOnce((function(){t.node.active=!1}),5),this.wurenjis)for(var o=0;o<this.wurenjis.length;o++)this.wurenjis[o]&&this.wurenjis[o].node&&(this.wurenjis[o].node.removeFromParent(),this.wurenjis[o].node.destroy())}},{key:"onDestroy",value:function(){}}]),e}(p))||L)),h._RF.pop()}}}));

System.register("chunks:///DaoDanBoss.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./GameManager.js"],(function(t,o){var e,s,i,n,a,r,u,d,h,c,l,p,v,f,y;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){e=t.inherits,s=t.classCallCheck,i=t.possibleConstructorReturn,n=t.getPrototypeOf,a=t.createClass},function(t){r=t.cclegacy,u=t._decorator,d=t.Vec3,h=t.Quat,c=t.instantiate,l=t.Component},function(t){p=t.GameManager}],execute:function(){r._RF.push({},"040a44M1+FBALKEFPeVSUoG","DaoDanBoss",void 0),y=u.ccclass,u.property,t("DaoDanBoss",(v=y("DaoDanBoss"),v(f=function(t){function o(){var t,e;s(this,o);for(var a=arguments.length,r=new Array(a),u=0;u<a;u++)r[u]=arguments[u];return(e=i(this,(t=n(o)).call.apply(t,[this].concat(r)))).moveSpeed=new d(0,0,-3),e.out=new d,e.outQ=new h,e.isDead=!1,e.att=10,e}return e(o,t),a(o,[{key:"init",value:function(t,o){this.endPos=t,this.att=o,this.out=this.node.eulerAngles,this.schedule(this.updateAtt)}},{key:"updateAtt",value:function(){this.isDead||(this.node.translate(this.moveSpeed,0),this.outQ=this.getLookAtRot(),h.lerp(this.outQ,this.node.rotation,this.outQ,.04),this.node.setRotation(this.outQ),this.node.position.y<30&&this.dead())}},{key:"getLookAtRot",value:function(){return this.out=this.node.worldPosition,d.subtract(this.out,this.out,this.endPos),d.normalize(this.out,this.out),h.fromViewUp(this.outQ,this.out,d.UP),this.outQ}},{key:"dead",value:function(){this.isDead=!0;var t=new d(this.node.position.x,0,this.node.position.z),o=c(p.instance.daodanBossExplodePrefab);this.node.parent.addChild(o),o.position=t,setTimeout((function(){o.removeFromParent(),o.destroy()}),1500);for(var e=0;e<p.instance.players.length;e++){var s=p.instance.players[e];if(s&&s.node&&!s.isDead)d.distance(this.node.worldPosition,s.node.worldPosition)<30&&s.subBlood(this.att)}this.node.removeFromParent(),this.node.destroy()}}]),o}(l))||f)),r._RF.pop()}}}));

System.register("chunks:///CallBall.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./GameManager.js"],(function(e,t){var s,i,o,n,a,l,r,u,c,d,h,p,v;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){s=e.inherits,i=e.classCallCheck,o=e.possibleConstructorReturn,n=e.getPrototypeOf,a=e.createClass},function(e){l=e.cclegacy,r=e._decorator,u=e.Vec3,c=e.Component},function(e){d=e.GameManager}],execute:function(){l._RF.push({},"a9dd9I4PU1PGrrNmBOu/i9c","CallBall",void 0),v=r.ccclass,r.property,e("CallBall",(h=v("CallBall"),h(p=function(e){function t(){var e,s;i(this,t);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(s=o(this,(e=n(t)).call.apply(e,[this].concat(l)))).moveSpeed=new u(1,1,1),s.out=new u,s.isDead=!1,s}return s(t,e),a(t,[{key:"init",value:function(e){this.endPos=e,this.schedule(this.updateMove)}},{key:"updateMove",value:function(){this.isDead||(u.subtract(this.out,this.endPos,this.node.worldPosition),u.normalize(this.out,this.out),u.multiply(this.out,this.out,this.moveSpeed),this.node.translate(this.out,1),this.node.position.y<10&&this.dead())}},{key:"dead",value:function(){this.isDead=!0,d.instance.createEnemy(this.endPos,!1,!1,!0),this.node.removeFromParent(),this.node.destroy()}}]),t}(c))||p)),l._RF.pop()}}}));

System.register("chunks:///Boss.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./DataManager.js","./Tools.js","./BossBlood.js","./DaoDanBoss.js","./CallBall.js","./GameManager.js"],(function(t,i){var e,s,o,n,a,l,d,h,r,c,u,m,f,g,y,p,P,b,v,w,k,C,B,T,S,R,A,x,D;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){e=t.inherits,s=t.classCallCheck,o=t.possibleConstructorReturn,n=t.getPrototypeOf,a=t.createClass,l=t.asyncToGenerator},function(t){d=t.cclegacy,h=t._decorator,r=t.Vec3,c=t.Vec4,u=t.SkeletalAnimationComponent,m=t.SkinningModelComponent,f=t.tween,g=t.instantiate,y=t.Component,p=t.Prefab},function(t){P=t.STAGE_MODE,b=t.ENEMY_ATT_TYPE,v=t.PLAYER_PROPERTY,w=t.GetEnemySkillCD},function(t){k=t.default},function(t){C=t.Tools},function(t){B=t.BossBlood},function(t){T=t.DaoDanBoss},function(t){S=t.CallBall},function(t){R=t.GameManager}],execute:function(){d._RF.push({},"a21bfkMkdFAO5SruH2xbUN9","Boss",void 0),D=h.ccclass,h.property,t("Boss",(A=D("Boss"),A(x=function(t){function i(){var t,e;s(this,i);for(var a=arguments.length,l=new Array(a),d=0;d<a;d++)l[d]=arguments[d];return(e=o(this,(t=n(i)).call.apply(t,[this].concat(l)))).moveSpeed=20,e.att=1,e.attRatio=10,e.attCD=1,e.blood=100,e.bloodMax=100,e.skillCD=10,e.attType=1,e.out=new r(0,0,0),e.isDead=!1,e.anim=null,e.target=null,e.body=null,e.bodyRatio=45,e.isHurting=!1,e.isStoning=!1,e.isSkilling=!1,e.isElite=!1,e.isActiveByPursue=!1,e.mulPush=new r(.2,0,.2),e.attTimer=0,e.skillTimer=0,e.lastPos=[0,0],e.movePos=new r(0,0,0),e._hurtTimer=0,e._whiteColor=new c(5,5,5,1),e.lastAnimName="idle",e}var d;return e(i,t),a(i,[{key:"start",value:function(){this.body=this.node.getChildByName("body"),this.anim=this.body.getComponent(u);var t=this.node.getChildByName("body").getChildByName("RootNode").getChildByName("npc");t?this.mat=t.getComponent(m).material:((t=this.node.getChildByName("body").getChildByName("RootNode").getChildByName("npc_boss"))||(t=this.node.getChildByName("body").getChildByName("RootNode").getChildByName("npc_boss1")),this.mat=t.getComponent(m).material)}},{key:"initProperty",value:(d=l(regeneratorRuntime.mark((function t(i,e,s,o,n,a){var l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.body=this.node.getChildByName("body"),this.shadow=this.node.getChildByName("shadow"),this.moveSpeed=i,R.instance.stageinfo.mode==P.PURSUE&&(this.moveSpeed=v[0].moveSpeed-15),this.attRatio=s,this.bloodMax=this.blood=o,this.att=e,this.attCD=n,this.attType=a,this.skillCD=w(this.attType),this.attType!=b.JUMP){t.next=16;break}return t.next=13,C.loadRes("prefabs/bossJumpEffect",p);case 13:this.skillEffectPrefab=t.sent,t.next=29;break;case 16:if(this.attType!=b.THROW){t.next=22;break}return t.next=19,C.loadRes("prefabs/bullet2",p);case 19:this.bullet2Prefab=t.sent,t.next=29;break;case 22:if(this.attType!=b.CALL){t.next=29;break}return t.next=25,C.loadRes("prefabs/callBossEffect",p);case 25:return this.callBossEffectPrefab=t.sent,t.next=28,C.loadRes("prefabs/callBall",p);case 28:this.callBallPrefab=t.sent;case 29:l=g(R.instance.bossBloodPrefab),R.instance.cavasBloodNode.addChild(l),l.getComponent(B).init(this);case 33:case"end":return t.stop()}}),t,this)}))),function(t,i,e,s,o,n){return d.apply(this,arguments)})},{key:"update",value:function(t){t>2||this.isDead||R.instance.isGameOver||R.instance.isPauseGame||(this.updateSearch(t),this.updateAttack(t),this.updateSkill(t),this.updateMove(t),this.updatePush(t),this.updateHitScale(t))}},{key:"updatePush",value:function(t){if(!this.isSkilling)for(var i=0;i<R.instance.enemys.length;i++)r.distance(R.instance.enemys[i].node.worldPosition,this.node.worldPosition)<this.bodyRatio&&(this.out=r.subtract(this.out,this.node.worldPosition,R.instance.enemys[i].node.worldPosition).normalize(),this.node.translate(this.out.multiply(this.mulPush),1))}},{key:"updateSearch",value:function(t){if(this.target=null,R.instance.curPlayer&&!R.instance.curPlayer.isDead){for(var i=9999,e=-1,s=0;s<R.instance.players.length;s++){var o=R.instance.players[s];if(!o.isDead){var n=r.distance(this.node.worldPosition,o.node.worldPosition);i>n&&(i=n,e=s)}}e>-1&&(R.instance.stageinfo.mode==P.PURSUE?(i<100&&(this.isActiveByPursue=!0),this.isActiveByPursue&&(this.target=R.instance.players[e])):this.target=R.instance.players[e])}}},{key:"updateAttack",value:function(t){var i=this;if((this.attTimer+=t,this.target&&!this.target.isDead&&!this.isSkilling)&&(!(r.distance(this.node.worldPosition,this.target.node.worldPosition)>this.attRatio)&&this.attTimer>=this.attCD))if(this.attTimer=0,this.changeAnim("gongji"),this.scheduleOnce((function(){i.changeAnim("run")}),.2),this.attType==b.THROW);else if(this.attType==b.JUMP){r.distance(this.target.node.worldPosition,this.node.worldPosition)<this.attRatio&&this.target.subBlood(this.att)}else this.attType==b.THROW||this.target.subBlood(this.att)}},{key:"updateSkill",value:function(t){var i=this;this.skillTimer+=t;var e=r.distance(R.instance.gameControl.node.worldPosition,this.node.worldPosition);if(this.skillTimer>=this.skillCD&&!this.isSkilling&&e<100)if(this.skillTimer=0,this.attType==b.JUMP)e>=60&&(this.changeAnim("gongji_dazhao"),this.isSkilling=!0,f(this.body.position).to(.4,new r(0,30,0),{easing:"sineOut"}).to(.3,new r(0,0,0),{easing:"sineIn"}).union().start(),f(this.node).to(1,{worldPosition:R.instance.gameControl.node.worldPosition}).union().start(),this.scheduleOnce((function(){var t=g(i.skillEffectPrefab);i.node.parent.addChild(t),t.worldPosition=new r(i.body.worldPosition.x,0,i.body.worldPosition.z),i.scheduleOnce((function(){t.removeFromParent(),t.destroy()}),1);for(var e=0;e<R.instance.players.length;e++){if(!R.instance.players[e].isDead)r.distance(i.node.worldPosition,R.instance.players[e].node.worldPosition)<15&&R.instance.players[e].subBlood(2*i.att)}i.changeAnim("idle"),i.scheduleOnce((function(){i.isSkilling=!1}),.2)}),1));else if(this.attType==b.THROW){this.changeAnim("gongji_dazhao"),this.isSkilling=!0;for(var s=0;s<5;s++)this.scheduleOnce((function(){var t=g(i.bullet2Prefab);i.node.parent.addChild(t),t.worldPosition=new r(i.body.worldPosition.x,60,i.body.worldPosition.z),t.eulerAngles=new r(90,0,0);var e=R.instance.gameControl.node.worldPosition.clone();e.x+=C.getRandom(-30,30),e.z+=C.getRandom(-30,30),t.addComponent(T).init(e,i.att)}),.2*s);this.scheduleOnce((function(){i.isSkilling=!1}),1)}else if(this.attType==b.CALL){this.changeAnim("gongji_dazhao"),this.isSkilling=!0;var o=g(this.callBossEffectPrefab);this.node.parent.addChild(o),o.worldPosition=new r(this.body.worldPosition.x,90,this.body.worldPosition.z),this.scheduleOnce((function(){i.isSkilling=!1}),1);for(var n=C.getCirclePoints(30,this.node.worldPosition.x,this.node.worldPosition.z,3),a=0;a<3;a++){var l=g(this.callBallPrefab);this.node.parent.addChild(l),l.worldPosition=new r(this.body.worldPosition.x,100,this.body.worldPosition.z),l.addComponent(S).init(new r(n[a].x,0,n[a].y))}}}},{key:"updateMove",value:function(t){if(this.target&&!this.isDead&&!this.isSkilling){if(r.distance(this.node.worldPosition,this.target.node.worldPosition)<this.attRatio)return;this.isStoning?(this.isStoning=!1,this.out.x=1.5*-this.moveSpeed*t,this.out.z=.2*-this.moveSpeed*t):(this.out.x=0,this.out.z=-this.moveSpeed*t),this.out.y=0,this.node.translate(this.out,0),this.changeAnim("run")}R.instance.stageinfo.mode==P.PURSUE?this.isActiveByPursue&&this.node.lookAt(R.instance.gameControl.node.position):this.node.lookAt(R.instance.gameControl.node.position)}},{key:"updateHitScale",value:function(t){this.isHurting&&!this.isDead&&(this._hurtTimer+=t,this.out.x=.3*Math.sin(this._hurtTimer)+1,this.out.y=.3*Math.sin(this._hurtTimer)+1,this.out.z=.3*Math.sin(this._hurtTimer)+1,this.node.scale=this.out,this._hurtTimer>=.2&&(this.isHurting=!1,this._hurtTimer=0,this.node.scale=r.ONE))}},{key:"subBlood",value:function(t){var i=this;this.isDead||(this.blood=C.clampf(this.blood-t,0,this.bloodMax),R.instance.showBlood(t,this.node),this.blood<=0?(this.deadEffect(),this.dead()):(this.isHurting=!0,this.mat&&(this.mat.setProperty("colorScale",this._whiteColor),this.scheduleOnce((function(){i.mat&&i.mat.setProperty("colorScale",c.ONE)}),.05))))}},{key:"deadEffect",value:function(){var t=R.instance.getEnemyDeadEffectPoolByPool();t&&(t.active=!0,t.worldPosition=this.node.worldPosition,setTimeout((function(){R.instance.recoverEnemyDeadEffectToPool(t)}),500))}},{key:"dead",value:function(){if(!this.isDead){this.isDead=!0,console.log("boss死亡"),R.instance.boss=null,this.node.removeFromParent(),this.node.destroy(),R.instance.killCount+=1;var t=g(R.instance.boxPrefab);R.instance.node.addChild(t),t.worldPosition=new r(this.node.worldPosition.x,6,this.node.worldPosition.z),R.instance.eatBox++,k.instance.addAchieveCount(6),k.instance.addTaskCount(16)}}},{key:"changeAnim",value:function(t){this.isSkilling||this.lastAnimName==t&&"gongji"!=t||(this.lastAnimName=t,this.anim.play(t))}}]),i}(y))||x)),d._RF.pop()}}}));

System.register("chunks:///UIGameStar.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./GameManager.js"],(function(t,e){var a,n,r,s,i,o,c,u,l,p,h,f;return t({_dec:void 0,_class:void 0}),{setters:[function(t){a=t.inherits,n=t.createClass,r=t.classCallCheck,s=t.possibleConstructorReturn,i=t.getPrototypeOf},function(t){o=t.cclegacy,c=t._decorator,u=t.Component},function(t){l=t.GameManager}],execute:function(){o._RF.push({},"518aadhhqJBqb9bko0MH+Pu","UIGameStar",void 0),f=c.ccclass,c.property,t("UIGameStar",(p=f("UIGameStar"),p(h=function(t){function e(){return r(this,e),s(this,i(e).apply(this,arguments))}return a(e,t),n(e,[{key:"init",value:function(t){this.target=t}},{key:"update",value:function(t){if(!(t>2)&&this.target){var e=l.instance.getScreenPos(this.target);e.y+=60,this.node.position=e}}}]),e}(u))||h)),o._RF.pop()}}}));

System.register("chunks:///UIGuideTalk.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./DataManager.js","./Tools.js"],(function(t,e){var o,i,n,s,a,d,r,l,c,h,u,p,w,C,g,f,m,v,y,k,N;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){o=t.inherits,i=t.classCallCheck,n=t.possibleConstructorReturn,s=t.getPrototypeOf,a=t.createClass},function(t){d=t.cclegacy,r=t._decorator,l=t.ButtonComponent,c=t.director,h=t.SpriteComponent,u=t.LabelComponent,p=t.Vec3,w=t.tween,C=t.Component},function(t){g=t.PLAYER_INFO,f=t.ITEMTYPE},function(t){m=t.default},function(t){v=t.Tools}],execute:function(){d._RF.push({},"fe158KiNfRPdab2y3iWfjSN","UIGuideTalk",void 0),N=r.ccclass,r.property,t("UIGuideTalk",(y=N("UIGuideTalk"),y(k=function(t){function e(){var t,o;i(this,e);for(var a=arguments.length,d=new Array(a),r=0;r<a;r++)d[r]=arguments[r];return(o=n(this,(t=s(e)).call.apply(t,[this].concat(d)))).closeCB=null,o.canClick=!1,o.wordIndex=0,o.info=null,o}return o(e,t),a(e,[{key:"init",value:function(t,e){var o=this;this.info=t,this.closeCB=e;var i=this.node.getChildByName("Touch").getComponent(l);i.node.width=c.getWinSize().width,i.node.height=c.getWinSize().height,v.addClickEvent(this.node,i,"onCloseClick","UIGuideTalk");var n=g[t.playerID];this.window=0==t.location?this.node.getChildByName("Left"):this.node.getChildByName("Right");var s=this.window.getChildByName("Icon").getComponent(h),a=this.window.getChildByName("Name").getComponent(u);this.wordLabel=this.window.getChildByName("Word").getComponent(u),m.instance.setItemIcon(s,f.CARD,t.playerID),a.string=n.name,this.wordLabel.string="",this.tipNode=this.window.getChildByName("Tip").getComponent(h),this.window.scale=new p(1.5,1.5,1.5),0==t.location?(this.window.setPosition(-750,t.posY,0),this.window.active=!0,w(this.window).to(.2,{position:new p(0,t.posY,0)}).start()):(this.window.setPosition(750,t.posY,0),this.window.active=!0,w(this.window).to(.2,{position:new p(0,t.posY,0)}).start()),this.scheduleOnce((function(){o.tipNode.node.active=!0,o.canClick=!0;var t=w(o.tipNode.color).to(.5,{a:100}),e=w(o.tipNode.color).to(.5,{a:255});w(o.tipNode.color).sequence(t,e).repeatForever().start()}),1),this.schedule(this.updateWord,.01)}},{key:"updateWord",value:function(){this.wordIndex+=1;for(var t="",e=0;e<this.info.word.length;e++)e<this.wordIndex&&(t+=this.info.word[e]);this.wordLabel.string=t}},{key:"onCloseClick",value:function(){this.canClick&&(this.closeCB&&this.closeCB(),this.node.removeFromParent(),this.node.destroy())}}]),e}(C))||k)),d._RF.pop()}}}));

System.register("chunks:///EnemyRebornPursue.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Tools.js","./GameManager.js"],(function(e,t){var n,s,i,o,a,r,c,u,l,C,h,m,d,f;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){n=e.inherits,s=e.classCallCheck,i=e.possibleConstructorReturn,o=e.getPrototypeOf,a=e.createClass},function(e){r=e.cclegacy,c=e._decorator,u=e.Vec3,l=e.Component},function(e){C=e.Tools},function(e){h=e.GameManager}],execute:function(){r._RF.push({},"7652cya0RtGP7tGsjvtuJLg","EnemyRebornPursue",void 0),f=c.ccclass,c.property,e("EnemyRebornPursue",(m=f("EnemyRebornPursue"),m(d=function(e){function t(){var e,n;s(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=i(this,(e=o(t)).call.apply(e,[this].concat(r)))).maxCreateCount=0,n.isElite=!1,n.isBoss=!1,n.isCanBeCreate=!1,n}return n(t,e),a(t,[{key:"init",value:function(e,t,n){this.maxCreateCount=e,this.isElite=t,this.isBoss=n}},{key:"update",value:function(e){if(!h.instance.isGameOver&&!h.instance.isPauseGame&&(this.maxCreateCount>0&&!this.isCanBeCreate&&h.instance.gameControl&&u.distance(h.instance.gameControl.node.worldPosition,this.node.worldPosition)<200&&(this.isCanBeCreate=!0),this.isCanBeCreate&&this.maxCreateCount>0))if(this.isElite)h.instance.createElitBoss(this.node.worldPosition),this.maxCreateCount--;else if(this.isBoss)h.instance.createBoss(this.node.worldPosition),this.maxCreateCount--;else{var t=new u(this.node.worldPosition.x+C.getRandomInt(-20,20),0,this.node.worldPosition.z+ +C.getRandomInt(-20,20));h.instance.createEnemy(t)&&this.maxCreateCount--}}}]),t}(l))||d)),r._RF.pop()}}}));

System.register("chunks:///TTManager.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Tools.js"],(function(e,t){var n,o,i,a,c,s;return e("RecorderState",void 0),{setters:[function(e){n=e.createClass,o=e.classCallCheck},function(e){i=e.cclegacy},function(e){a=e.Tools}],execute:function(){i._RF.push({},"84d91VIjvxK7LMvToaRaYY3","TTManager",void 0),(c=function(){function e(){o(this,e),this.gameRecoder=null,this.recorderState=s.Ready,this.videoPath="",this.startTime=0,this.endTime=0,e._instance=this}return n(e,null,[{key:"instance",get:function(){return e._instance||new e,e._instance}}]),n(e,[{key:"resetData",value:function(){console.log("重置录制"),this.startTime=0,this.endTime=0,this.videoPath="",e.instance.recorderState=s.Ready}},{key:"showModal",value:function(e,t,n,o,i){"undefined"!=typeof tt&&tt.showModal({title:e,content:t,success:function(e){e.confirm?o&&o():e.cancel&&(n&&a.ShowTip(n),i&&i())},fail:function(e){}})}},{key:"shareVideo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=this;"undefined"!=typeof tt&&(0==e.instance.videoPath.length?(a.ShowTip("no record"),n&&n()):e.instance.endTime-e.instance.startTime<5e3?(a.ShowTip("record time more than 5s"),n&&n()):tt.shareAppMessage({channel:"video",templateId:"5d31i51n140fa6cnk1",query:"",extra:{videoPath:e.instance.videoPath,videoTopics:["队长你别浪","快来看看我疯狂射击时刻！"]},success:function(){console.log("分享视频成功"),null!=t&&t(),o.resetData()},fail:function(e){console.log("分享视频失败"),a.ShowTip("已放弃发布"),n&&n()}}))}},{key:"doRecorder",value:function(){"undefined"!=typeof tt&&(e.instance.recorderState=s.Do,e.instance.gameRecoder=tt.getGameRecorderManager(),e.instance.startTime=(new Date).getTime(),e.instance.gameRecoder.start({duration:300}),e.instance.gameRecoder.onStart((function(){console.log("录制开始")})),e.instance.gameRecoder.onError((function(){console.log("视频录制失败")})),e.instance.gameRecoder.onStop((function(t){e.instance.videoPath=t.videoPath,console.log(t.videoPath)})))}},{key:"stop",value:function(){"undefined"!=typeof tt&&e.instance.recorderState==s.Do&&(e.instance.endTime=(new Date).getTime(),e.instance.gameRecoder.stop(),e.instance.recorderState=s.Finish)}}]),e}())._instance=null,function(e){e[e.Ready=0]="Ready",e[e.Do=1]="Do",e[e.Finish=2]="Finish"}(s||e("RecorderState",s={})),i._RF.pop(),e("default",c)}}}));

System.register("chunks:///GameManager.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./CameraFollow.js","./Config.js","./DataManager.js","./Tools.js","./Bullet.js","./Gold.js","./Enemy.js","./GameControl.js","./PlayerBullet.js","./Boom.js","./DaoDan.js","./SuperDaoDan.js","./Player.js","./Boss.js","./UIGameStar.js","./UIGuideTalk.js","./EnemyRebornPursue.js","./TTManager.js","./AirDrop.js"],(function(e,t){var i,o,s,n,a,r,l,h,d,c,u,f,g,p,y,m,v,P,b,S,w,C,E,k,B,x,I,T,D,R,_,N,A,L,G,O,z,M,U,W,F,j,Y,V,H,K,Z,X,Q,q,J,$,ee,te,ie,oe,se,ne,ae,re,le,he,de,ce,ue,fe,ge,pe,ye,me,ve,Pe,be,Se,we,Ce,Ee,ke,Be,xe,Ie,Te,De,Re,_e,Ne,Ae,Le,Ge,Oe,ze,Me,Ue,We,Fe,je,Ye,Ve,He,Ke,Ze,Xe,Qe,qe,Je,$e,et;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_dec9:void 0,_dec10:void 0,_dec11:void 0,_dec12:void 0,_dec13:void 0,_dec14:void 0,_dec15:void 0,_dec16:void 0,_dec17:void 0,_dec18:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_descriptor8:void 0,_descriptor9:void 0,_descriptor10:void 0,_descriptor11:void 0,_descriptor12:void 0,_descriptor13:void 0,_descriptor14:void 0,_descriptor15:void 0,_descriptor16:void 0,_descriptor17:void 0,_class3:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,o=e.inherits,s=e.classCallCheck,n=e.possibleConstructorReturn,a=e.getPrototypeOf,r=e.initializerDefineProperty,l=e.assertThisInitialized,h=e.createClass,d=e.typeof,c=e.asyncToGenerator},function(e){u=e.cclegacy,f=e._decorator,g=e.Node,p=e.SpriteComponent,y=e.CameraComponent,m=e.LabelComponent,v=e.Vec3,P=e.SpriteFrame,b=e.instantiate,S=e.tween,w=e.ParticleSystemComponent,C=e.Color,E=e.Vec4,k=e.math,B=e.systemEvent,x=e.Component,I=e.director,T=e.Prefab,D=e.ModelComponent,R=e.ProgressBarComponent,_=e.Texture2D},function(e){N=e.CameraFollow},function(e){A=e.EQUIP_ADD_TYPE,L=e.STAGE_MODE,G=e.PLAYER_SKILL_DATA,O=e.ITEMTYPE,z=e.AIR_DROP_COUNT,M=e.STAGE_LV,U=e.SOUND_TYPE,W=e.ENEMY_PROPERTY,F=e.STAGE_TASK_INFO,j=e.PLAYER_PROPERTY,Y=e.BOSS_PROPERTY,V=e.STAGE_INFO,H=e.REWARD_STAGE_TIME,K=e.REWARD_STAGE_BOX_COUNT,Z=e.PURSUE_STAGE_INFO,X=e.REWARD_STAGE_INFO,Q=e.GUIDE_INFO},function(e){q=e.default},function(e){J=e.Tools},function(e){$=e.Bullet},function(e){ee=e.Gold},function(e){te=e.Enemy},function(e){ie=e.GameControl},function(e){oe=e.PlayerBullet},function(e){se=e.Boom},function(e){ne=e.DaoDan},function(e){ae=e.SuperDaoDan},function(e){re=e.Player},function(e){le=e.Boss},function(e){he=e.UIGameStar},function(e){de=e.UIGuideTalk},function(e){ce=e.EnemyRebornPursue},function(e){ue=e.default},function(e){fe=e.AirDrop}],execute:function(){u._RF.push({},"d0a19M4IoZGOLXaOpLv8VSD","GameManager",void 0),$e=f.ccclass,et=f.property,e("GameManager",(ge=$e("GameManager"),pe=et(g),ye=et(g),me=et(g),ve=et(g),Pe=et(g),be=et(g),Se=et(p),we=et(p),Ce=et(y),Ee=et(m),ke=et(m),Be=et(m),xe=et(m),Ie=et(g),Te=et(g),De=et(m),Re=et(g),ge((Je=qe=function(e){function t(){var e,i;s(this,t);for(var o=arguments.length,h=new Array(o),d=0;d<o;d++)h[d]=arguments[d];return(i=n(this,(e=a(t)).call.apply(e,[this].concat(h)))).playerIconNodes=[],i.playerSkillBar=[],i.playerIcons=[],i.playerIconSpriteFrames=[],r(i,"cavas",Ae,l(i)),r(i,"cavasBloodNode",Le,l(i)),r(i,"subBloodNode",Ge,l(i)),r(i,"goldShowNode",Oe,l(i)),r(i,"loadingNode",ze,l(i)),r(i,"bossWarning",Me,l(i)),r(i,"ttBtnLuzhi",Ue,l(i)),r(i,"choosePlayerIcon",We,l(i)),r(i,"camera",Fe,l(i)),r(i,"countLabel",je,l(i)),r(i,"distanceLabel",Ye,l(i)),r(i,"timeLabel",Ve,l(i)),r(i,"goldLabel",He,l(i)),i.enemys=[],i.enemysPrefab=[],i.gameControl=null,i.players=[],i.curPlayer=null,i.maxEnemyCount=0,i.killCount=0,i.createEnemyCount=0,i.out=new v,i.isGameOver=!1,i.eatGold=0,i.eatBox=0,i.playerPrefabs=[],i.collisionNode=null,i.mapCollsionArray=[],i.isPauseGame=!0,i.isWin=!1,i.loadOk=!1,i.stageinfo=null,i.playerBloodSoundOpen=!0,i.enemyBornEffectPool=[],i.enemyPool=[],i.playerBulletPool=[],i.enemybulletPool=[],i.goldPool=[],i.airDropPool=[],i.airPool=[],i.gunfire2Pool=[],i.gunfire6Pool=[],i.boomPool=[],i.boomEffectPool=[],i.superBoomEffectPool=[],i.daodanPool=[],i.daodanEffectPool=[],i.enemyDeadEffectPool=[],i.enemy6ExplodePool=[],i.isCanStartGame=!0,i.bloodLabelPool=[],i.goldShowArr=[],i.goldShowCountArr=[],i.outSize=0,i.endPoint=v.ZERO,i.rebornPos=v.ZERO,i.timeLimit=0,i.envModels=[],i.fightPlayerIDs=[],r(i,"stageTaskNode",Ke,l(i)),r(i,"stageTaskStars",Ze,l(i)),r(i,"stageTaskLabels",Xe,l(i)),r(i,"stageTaskBtnArrow",Qe,l(i)),i.curStageTaskInfo=null,i.gameTime=0,i.playerDeadCount=0,i.yingjiuPlayerCount=0,i.skillUseCount=0,i.curSubStageID=-1,i._luzhiTime=0,i._isShowReborn=!1,i._lastPlayerIconCount=0,i.airdropLoopTimes=0,i._colChange=!1,i._createEnemyTimer=0,i._createEnemyInterval=1,i._isCreateElit=!1,i._isCreateBoss=!1,i._goldShowColorTween=[],i._goldShowIndex=0,i._isEatGoldActing=!1,i._guidelineTimer=0,i._collectBlood=[],i._isShowStageTask=!1,i}var i,u,f,g,y,x;return o(t,e),h(t,[{key:"start",value:(x=c(regeneratorRuntime.mark((function e(){var i,o,s,n,a,r,l,h,d,c,u,f,g,y,S,w,C,E,k,x,A,G,z,M,W,F,j,Y,Q,$,ee,se,ne,ae,re,he,de,fe,ge,pe,ye,me,ve,Pe,be,Se,we,Ce,Ee,ke,Be,xe,Ie,Te,De,Re,_e,Ne,Ae,Le,Ge,Oe,ze,Me,Ue,We,Fe,je,Ye,Ve,He,Ke,Ze,Xe,Qe,qe,Je,$e,et,it,ot,st,nt,at,rt,lt,ht,dt,ct,ut,ft,gt,pt,yt,mt,vt,Pt,bt,St,wt,Ct,Et,kt,Bt,xt,It,Tt,Dt,Rt,_t,Nt,At;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(cc.debug.setDisplayStats(!1),I.getScene().renderScene.planarShadows.enabled=!0,B.on(cc.SystemEventType.KEY_UP,this.onKeyUp,this),t.instance=this,q.instance.gameTimes++,i=0,0==q.instance.curStageLv?i=q.instance.subStageID:1==q.instance.curStageLv?i=q.instance.hardSubStageID:2==q.instance.curStageLv&&(i=q.instance.emSubStageID),q.instance.chooseSubStageID>-1&&(i=q.instance.chooseSubStageID-1),this.curSubStageID=i,console.log("当前关卡 难度",q.instance.curStageLv,"关卡ID",i+1),q.instance.umatrackEvent("进入关卡",{stage:Math.floor(i+1)}),this.stageinfo=V[i],this.curStageTaskInfo=q.instance.getStageStarInfo(i+1),o=0,s=0;s<this.stageinfo.enemyIDs.length;s++)for(n=this.stageinfo.enemyCounts[s][0],a=this.stageinfo.enemyCounts[s][1],r=J.getRandomInt(n,a),l=0;l<r;l++)o++;return h=J.getRandomInt(3,5),this.outSize=q.instance.getOutMapSize(this.stageinfo),this.goldShowNode.position=new v(-cc.winSize.width/2,-cc.winSize.height/2,0),I.getScene().emit("LoadingTip","开始地图加载..."),d="prefabs/"+this.stageinfo.name,this.stageinfo.mode==L.PURSUE?(this.cavas.getChildByName("NormalMode").active=!1,this.cavas.getChildByName("PursueMode").active=!0,this.cavas.getChildByName("RewardMode").active=!1):this.stageinfo.mode==L.REWARD?(this.cavas.getChildByName("NormalMode").active=!1,this.cavas.getChildByName("PursueMode").active=!1,this.cavas.getChildByName("RewardMode").active=!0):(this.cavas.getChildByName("NormalMode").active=!0,this.cavas.getChildByName("PursueMode").active=!1,this.cavas.getChildByName("RewardMode").active=!1),e.next=23,J.loadRes(d,T);case 23:for(c=e.sent,u=b(c),this.node.parent.addChild(u),f=0;f<u.children.length;f++)"wall"!=u.children[f].name&&"ground"!=u.children[f].name&&u.children[f].getComponent(D)&&this.envModels.push(u.children[f]);if(g=u.getChildByName("Reborn"),this.rebornPos=g.children[J.getRandomInt(0,g.children.length-1)].worldPosition,this.collisionNode=u.getChildByName("Collision"),this.stageinfo.mode!=L.PURSUE){e.next=44;break}for(this.endPoint=u.getChildByName("End").worldPosition,y=[],S=[],w=u.getChildByName("EnemyReborn"),C=0;C<w.children.length;C++)E=w.children[C].addComponent(ce),y.push(E);for(k=0;k<y.length;k++)S[k]=0;for(x=0;x<o;x++)A=J.getRandomInt(0,S.length-1),S[A]++;for(G=0;G<y.length;G++)y[G].init(S[G],!1,!1);u.getChildByName("EliteBorn").addComponent(ce).init(1,!0,!1),this.stageinfo.bossID>0&&u.getChildByName("BossBorn").addComponent(ce).init(1,!1,!0),e.next=54;break;case 44:if(this.stageinfo.mode!=L.REWARD){e.next=54;break}return this.timeLimit=H,z=u.getChildByName("BoxRandNodes"),e.next=49,J.loadRes("prefabs/RewardStageBox",T);case 49:for(M=e.sent,W=[],F=0;F<z.children.length;F++)W.push(z.children[F]);for(W=W.sort((function(e,t){return Math.random()>.5?1:-1})),j=0;j<K;j++)Y=b(M),this.node.parent.addChild(Y),Y.worldPosition=W[j].worldPosition,Q=Y.addComponent(te),this.enemys.push(Q),Q.initProperty(0,0,0,this.stageinfo.boxBlood,0,0,!1,!1);case 54:for($=1;$<=6;$++)ee=this.cavas.getChildByName("Player"+$),this.playerIconNodes.push(ee),se=ee.getChildByName("Mask").getChildByName("Progress").getComponent(R),this.playerSkillBar.push(se),ne=ee.getChildByName("Mask").getChildByName("Sprite").getComponent(p),this.playerIcons.push(ne);for(ae=0;ae<this.goldShowNode.children.length;ae++)re=this.goldShowNode.children[ae],he=re.getComponent(p),de=re.getChildByName("Count").getComponent(m),this.goldShowArr.push(he),this.goldShowCountArr.push(de);this.leftArrow1=this.cavas.getChildByName("leftArrow1"),this.leftArrow2=this.cavas.getChildByName("leftArrow2"),this.leftArrow3=this.cavas.getChildByName("leftArrow3"),this.leftArrow4=this.cavas.getChildByName("leftArrow4"),I.getScene().emit("LoadingTip","正在获取敌军情报..."),fe=0;case 62:if(!(fe<this.stageinfo.enemyIDs.length)){e.next=71;break}return ge=this.stageinfo.enemyIDs[fe],e.next=66,J.loadRes("prefabs/enemy"+ge,T);case 66:pe=e.sent,this.enemysPrefab.push(pe);case 68:fe++,e.next=62;break;case 71:for(I.getScene().emit("LoadingTip","一大波敌军赶来..."),ye=0;ye<this.stageinfo.enemyIDs.length;ye++)for(me=20/this.stageinfo.enemyIDs.length,this.stageinfo.mode==L.PURSUE&&(me=15),ve=0;ve<me;ve++)Pe=this.enemysPrefab[ye],be=b(Pe),this.node.parent.addChild(be),be.active=!1,be.addComponent(te),this.enemyPool.push(be);return Se=o+1+(this.stageinfo.bossID>0?1:0),this.maxEnemyCount=Se,console.log("本关总怪数量",this.maxEnemyCount),e.next=78,J.loadRes("prefabs/GameControl",T);case 78:for(we=e.sent,Ce=b(we),this.node.parent.addChild(Ce),this.gameControl=Ce.getComponent(ie),this.gameControl.node.worldPosition=this.rebornPos,this.fightPlayerIDs=[],Ee=0;Ee<6;Ee++)q.instance.isUnlockPlayer(q.instance.playerInfo[Ee].id)&&this.fightPlayerIDs.push(q.instance.playerInfo[Ee].id);return q.instance.testPlayerID>-1&&(this.fightPlayerIDs.push(q.instance.testPlayerID),q.instance.testPlayerID=-1),console.log("当前出战角色",this.fightPlayerIDs),I.getScene().emit("LoadingTip","正在进入战场..."),e.next=90,J.loadRes("prefabs/ui/BossBlood",T);case 90:return this.bossBloodPrefab=e.sent,e.next=93,J.loadRes("prefabs/bullet1",T);case 93:if(ke=e.sent,Be=null,!(this.stageinfo.enemyIDs.indexOf(5)>-1||5==h)){e.next=99;break}return e.next=98,J.loadRes("prefabs/enemybullet1",T);case 98:Be=e.sent;case 99:return e.next=101,J.loadRes("prefabs/Gold",T);case 101:return xe=e.sent,e.next=104,J.loadRes("prefabs/AirDrop",T);case 104:return Ie=e.sent,e.next=107,J.loadRes("prefabs/Air",T);case 107:return Te=e.sent,e.next=110,J.loadRes("prefabs/box",T);case 110:if(this.boxPrefab=e.sent,De=null,Re=null,!(this.fightPlayerIDs.indexOf(1)>-1)){e.next=117;break}return e.next=116,J.loadRes("prefabs/gunfire2",T);case 116:De=e.sent;case 117:if(!(this.fightPlayerIDs.indexOf(5)>-1)){e.next=121;break}return e.next=120,J.loadRes("prefabs/gunfire6",T);case 120:Re=e.sent;case 121:return e.next=123,J.loadRes("prefabs/ui/UIGameStar",T);case 123:if(this.uiGameStarPrefab=e.sent,!(this.fightPlayerIDs.indexOf(3)>-1)){e.next=134;break}return e.next=127,J.loadRes("prefabs/boom",T);case 127:return _e=e.sent,e.next=130,J.loadRes("prefabs/boomEffect",T);case 130:return Ne=e.sent,e.next=133,J.loadRes("prefabs/superBoomEffect",T);case 133:Ae=e.sent;case 134:if(!(this.fightPlayerIDs.indexOf(5)>-1)){e.next=141;break}return e.next=137,J.loadRes("prefabs/daodan",T);case 137:return Le=e.sent,e.next=140,J.loadRes("prefabs/daodanExplode",T);case 140:Ge=e.sent;case 141:return e.next=143,J.loadRes("prefabs/ui/UIPlayerBlood",T);case 143:return this.uiBloodPrefab=e.sent,e.next=146,J.loadRes("prefabs/enemyBorn",T);case 146:return Oe=e.sent,e.next=149,J.loadRes("prefabs/enemyDeadEffect",T);case 149:return ze=e.sent,e.next=152,J.loadRes("prefabs/playerArrow",T);case 152:if(Me=e.sent,Ue=null,!(this.stageinfo.enemyIDs.indexOf(6)>-1)){e.next=158;break}return e.next=157,J.loadRes("prefabs/enemy6Explode",T);case 157:Ue=e.sent;case 158:for(this.playerArrow=b(Me),this.node.parent.addChild(this.playerArrow),this.playerArrow.setPosition(0,0,0),I.getScene().emit("LoadingTip","开始生成道具..."),We=0;We<10;We++)Fe=b(Oe),this.node.addChild(Fe),Fe.active=!1,this.enemyBornEffectPool.push(Fe);for(je=0;je<20;je++)Ye=b(ke),this.node.parent.addChild(Ye),Ye.addComponent(oe).reset(),Ye.active=!1,this.playerBulletPool.push(Ye);if(I.getScene().emit("LoadingTip","Boss正在前往战场..."),!(this.stageinfo.bossID>6)){e.next=180;break}return e.next=168,J.loadRes("prefabs/boss"+(this.stageinfo.bossID-6),T);case 168:if(Ve=e.sent,He=b(Ve),this.node.addChild(He),He.setPosition(0,-1e4,0),He.active=!1,this.boss=He.addComponent(le),8!=this.stageinfo.bossID){e.next=178;break}return e.next=177,J.loadRes("prefabs/daodanBossExplode",T);case 177:this.daodanBossExplodePrefab=e.sent;case 178:e.next=189;break;case 180:if(!(this.stageinfo.bossID>0)){e.next=189;break}return e.next=183,J.loadRes("prefabs/enemy"+this.stageinfo.bossID,T);case 183:Ke=e.sent,Ze=b(Ke),this.node.addChild(Ze),Ze.setPosition(0,-1e4,0),Ze.active=!1,this.littleBoss=Ze.addComponent(te);case 189:return e.next=191,J.loadRes("prefabs/enemy"+h,T);case 191:Xe=e.sent,Qe=b(Xe),this.node.addChild(Qe),Qe.setPosition(0,-1e4,0),Qe.active=!1,this.eliteEnemy=Qe.addComponent(te),q.instance.setItemIcon(this.choosePlayerIcon,O.CARD,0),I.getScene().emit("LoadingTip","角色开始武装..."),qe=0;case 200:if(!(qe<this.fightPlayerIDs.length)){e.next=209;break}return Je=this.fightPlayerIDs[qe],e.next=204,J.loadRes("prefabs/player"+(Je+1),T);case 204:$e=e.sent,this.playerPrefabs.push($e);case 206:qe++,e.next=200;break;case 209:et=1;case 210:if(!(et<=6)){e.next=220;break}return e.next=213,J.loadRes("icons/player/playericon"+et,_);case 213:it=e.sent,(ot=new P).texture=it,this.playerIconSpriteFrames.push(ot);case 217:et++,e.next=210;break;case 220:for(st=0;st<this.fightPlayerIDs.length;st++)(nt=this.addPlayer(this.fightPlayerIDs[st],null,!0)).isControl=0==st,0==st&&(this.curPlayer=nt);return this.initPlayerMovePos(),this.camera.node.addComponent(N).setTarget(this.gameControl.node),this.updateCountLabel(),this.schedule(this.updateCountLabel,1),this.schedule(this.updateGameOver,1),this.schedule(this.updateShowBlood,.15),this.stageinfo.mode==L.NORMAL&&(this.stageinfo.bossID>0&&this.schedule(this.createBoss,1),this.schedule(this.createElitBoss,1)),this.stageinfo.mode!=L.NORMAL&&this.stageinfo.mode!=L.REWARD||this.schedule(this.updateCreateAirDrop,10),this.updatePlayerIconShow(),this.schedule(this.updatePlayerIconShow,1),this.loadingNode.active=!1,this.cavas.active=!0,this.loadOk=!0,this.updateTask(),this.schedule(this.updateTask,1),q.instance.isNewPlayer&&J.reportAnalytics("进入战斗"),e.next=240,J.playBGMusic(U.GAMEBGM);case 240:if(this.gamebgm=e.sent,this.guideTip3Node=this.cavas.getChildByName("GuideTip3"),!q.instance.isGuidingStage){e.next=259;break}return this.isCanStartGame=!1,this.cavas.getChildByName("BtnPause").active=!1,e.next=247,J.loadRes("prefabs/guide_end",T);case 247:return at=e.sent,this.guideEndNode=b(at),this.node.parent.addChild(this.guideEndNode),this.guideEndNode.position=new v(37,0,105),this.guideEndNode.active=!1,e.next=254,J.loadRes("prefabs/guide_line",T);case 254:rt=e.sent,this.guideLineNode=b(rt),this.node.parent.addChild(this.guideLineNode),this.guideLineNode.active=!1,this.guideLineMat=this.guideLineNode.getChildByName("body").getComponent(D).material;case 259:for(this.guideGo(),this.stageinfo.mode==L.PURSUE&&0==q.instance.isTalkByPursueStage?this.storyTalk(Z,0):this.stageinfo.mode==L.REWARD&&0==q.instance.isTalkByRewardStage?this.storyTalk(X,0):this.isPauseGame=!1,this.schedule(this.updateEvnModels,.1),lt=0;lt<15;lt++)ht=b(ze),this.node.parent.addChild(ht),ht.active=!1,this.enemyDeadEffectPool.push(ht);if(Ue)for(dt=0;dt<5;dt++)ct=b(Ue),this.node.parent.addChild(ct),ct.active=!1,this.enemy6ExplodePool.push(ct);for(ut=0;ut<this.subBloodNode.children.length;ut++)ft=this.subBloodNode.children[ut].getComponent(m),this.bloodLabelPool.push(ft);if(Be)for(gt=0;gt<10;gt++)pt=b(Be),this.node.addChild(pt),pt.active=!1,this.enemybulletPool.push(pt);for(yt=0;yt<15;yt++)mt=b(xe),this.node.addChild(mt),mt.active=!1,this.goldPool.push(mt);for(vt=0;vt<3;vt++)Pt=b(Ie),this.node.addChild(Pt),Pt.active=!1,this.airDropPool.push(Pt);for(bt=0;bt<1;bt++)St=b(Te),this.node.addChild(St),St.active=!1,this.airPool.push(St);for(wt=0;wt<3;wt++)De&&(Ct=b(De),this.node.parent.addChild(Ct),Ct.active=!1,this.gunfire2Pool.push(Ct)),Re&&(Et=b(Re),this.node.parent.addChild(Et),Et.active=!1,this.gunfire6Pool.push(Et));if(_e)for(kt=0;kt<15;kt++)Bt=b(_e),this.node.parent.addChild(Bt),Bt.active=!1,this.boomPool.push(Bt);if(Ne){for(xt=0;xt<3;xt++)It=b(Ne),this.node.parent.addChild(It),It.active=!1,this.boomEffectPool.push(It);for(Tt=0;Tt<1;Tt++)Dt=b(Ae),this.node.parent.addChild(Dt),Dt.active=!1,this.superBoomEffectPool.push(Dt)}for(Rt=0;Rt<8;Rt++)Le&&(_t=b(Le),this.node.parent.addChild(_t),_t.active=!1,this.daodanPool.push(_t)),Ge&&(Nt=b(Ge),this.node.parent.addChild(Nt),Nt.active=!1,this.daodanEffectPool.push(Nt));(At=this.bossWarning.getChildByName("bg")).width=cc.winSize.width,At.height=cc.winSize.height,ue.instance.doRecorder(),this.ttBtnLuzhi.node.active="undefined"!=typeof tt;case 278:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)})},{key:"updateLuZhi",value:function(){this._luzhiTime>290&&(this.unschedule(this.updateLuZhi),ue.instance.stop(),J.setImage(this.ttBtnLuzhi,"textures/ui/tt_luzhi1",P)),this._luzhiTime++}},{key:"updateEvnModels",value:function(){for(var e=cc.winSize.width/2+100,t=cc.winSize.height/2+100,i=0;i<this.envModels.length;i++){var o=this.getScreenPos(this.envModels[i]);o.x>e||o.x<-e||o.y>t||o.y<-t?this.envModels[i].active&&(this.envModels[i].active=!1):this.envModels[i].active||(this.envModels[i].active=!0)}}},{key:"addPlayer",value:function(e,t){for(var i=this,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=!1,n=0;n<this.players.length;n++)if(this.players[n].star<2&&!this.players[n].isDead&&e==this.players[n].attType-1){s=!0;break}if(!s||o){for(var a=-1,r=0;r<this.fightPlayerIDs.length;r++)if(this.fightPlayerIDs[r]==e){a=r;break}var l=this.playerPrefabs[a],h=null;if(l){var c=b(l);this.node.parent.addChild(c),t&&(c.worldPosition=t),h=c.addComponent(re),this.players.push(h);var u=j[e],f=q.instance.getLvAddValueByID(u.id,0),g=1+q.instance.getAllAddValueByID(u.id,A.att)/100,p=q.instance.getLvAddValueByID(u.id,1),y=1+q.instance.getAllAddValueByID(u.id,A.blood)/100,m=(u.att+f)*g*u.attScale,P=(u.blood+p)*y;h.initProperty(u.moveSpeed,m,u.attRatio,P,u.attCD,u.attType)}else console.error("创建角色失败",this.fightPlayerIDs,e);return h}for(var S=0;S<this.players.length;S++)if(this.players[S].star<2&&e==this.players[S].attType-1){var w=function(){i.players[S].addStar();var e=b(i.uiGameStarPrefab);return i.cavas.addChild(e),e.addComponent(he).init(i.players[S].node),e.scale=new v(.5,.5,.5),i.scheduleOnce((function(){e.removeFromParent(),e.destroy()}),2),{v:void 0}}();if("object"===d(w))return w.v}}},{key:"reborn",value:function(e){var t=this;if(e){for(var i=0,o=0;o<6;o++)q.instance.isUnlockPlayer(q.instance.playerInfo[o].id)&&i++;for(var s=function(e){var i=t.addPlayer(e,null,!0);i.isControl=0==e,0==e&&(t.curPlayer=i),i.setWuDi(!0),t.scheduleOnce((function(){i.setWuDi(!1)}),5)},n=0;n<i;n++)s(n);this.initPlayerMovePos(),this.schedule(this.updateGameOver,1)}else this.showGameOver(!1)}},{key:"updateGameOver",value:function(){this.killCount>=this.maxEnemyCount&&!this.isGameOver&&this.stageinfo.mode==L.NORMAL&&(this.enemys.length>0&&console.error("纳尼"),this.unschedule(this.updateGameOver),this.showGameOver(!0)),this.stageinfo.mode!=L.PURSUE||this.isGameOver||v.distance(this.gameControl.node.worldPosition,this.endPoint)<20&&(this.unschedule(this.updateGameOver),this.showGameOver(!0)),this.stageinfo.mode!=L.REWARD||this.isGameOver||this.isPauseGame||(this.timeLimit=J.clampf(this.timeLimit-1,0,9999),this.timeLabel.string="Remain "+Math.floor(this.timeLimit)+" s",(this.timeLimit<=0||0==this.enemys.length)&&(this.unschedule(this.updateGameOver),this.showGameOver(!0))),0!=this.players.length||this.isGameOver||(this.unschedule(this.updateGameOver),this.showReborn())}},{key:"showReborn",value:(y=c(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isShowReborn){e.next=4;break}this.showGameOver(!1),e.next=10;break;case 4:return this._isShowReborn=!0,e.next=7,J.loadRes("prefabs/ui/UIReborn",T);case 7:t=e.sent,i=b(t),this.cavas.addChild(i);case 10:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"showGameOver",value:function(e){ue.instance.stop(),this.isWin=e,this.isGameOver=!0,this.gamebgm&&(this.gamebgm.stop(),this.gamebgm=null),e&&(q.instance.addAchieveCount(2),q.instance.addTaskCount(2)),this.scheduleOnce(this.showGameOverUI,2)}},{key:"showGameOverUI",value:(g=c(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.loadRes("prefabs/ui/UIGameOver",T);case 2:t=e.sent,i=b(t),this.cavas.addChild(i);case 5:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"update",value:function(e){e>2||(this.isGameOver||this.isPauseGame||!this.loadOk||(this.stageinfo.mode==L.NORMAL&&this.updateCreateEnemy(e),this.updateCollision(),this.gameTime+=e),this.playerArrow&&this.curPlayer&&this.curPlayer.node&&(this.playerArrow.worldPosition=this.curPlayer.node.worldPosition),this.updateLeftArrow(),this.updateGuideLine(),this.updatePlayerDistance())}},{key:"updatePlayerDistance",value:function(){if(this.endPoint&&this.gameControl)if(this.isGameOver)this.distanceLabel.string="0M";else{var e=v.distance(this.gameControl.node.worldPosition,this.endPoint);e=J.clampf(e,0,9999),this.distanceLabel.string=Math.floor(e)+" M"}}},{key:"updatePlayerIconShow",value:function(){for(var e=[],t=[],i=0;i<6;i++)this.players[i]&&!this.players[i].isDead&&e.indexOf(this.players[i].attType)<0&&(e.push(this.players[i].attType),t.push(this.players[i]));if(this._lastPlayerIconCount!=t.length){this._lastPlayerIconCount=t.length;for(var o=0;o<6;o++)t[o]&&(this.playerIcons[o].spriteFrame=this.playerIconSpriteFrames[t[o].attType-1])}for(var s=0;s<6;s++)if(t[s]){var n=J.clampf(t[s].passiveSkillCDTimer/G[t[s].attType-1].skillCD,0,1);this.playerSkillBar[s].progress=1-n,this.playerIconNodes[s].active=!0}else this.playerIconNodes[s].active=!1}},{key:"changePlayerControl",value:function(){if(!(this.players.length<1)){if(1==this.players.length)this.curPlayer=this.players[0];else{for(var e=[],t=0,i=!1,o=0;o<this.players.length;o++)this.players[o]&&!this.players[o].isDead&&(this.players[o].isControl?(this.players[o].isControl=!1,i=!0):(i&&(i=!1,t=e.length),e.push(this.players[o])));e.length>0&&(t>e.length-1&&(t=0),this.curPlayer=e[t],this.curPlayer.isControl=!0,q.instance.setItemIcon(this.choosePlayerIcon,O.CARD,this.curPlayer.attType-1))}this.gameControl.node.worldPosition=this.curPlayer.node.worldPosition}}},{key:"getFollowPos",value:function(e){if(this.curPlayer==e)return this.gameControl.node.worldPosition;for(var t=[],i=0,o=0;o<this.players.length;o++)this.players[o].isControl||t.push(this.players[o]);for(var s=0;s<t.length&&(i++,t[s]!=e);s++);if(e.isControl)return J.getCirciePointAtIndex(15,0,0,this.players.length-1,0);return this.players.length<=3?1==i?J.getCirciePointAtIndex(15,0,0,this.players.length-1+2,1):J.getCirciePointAtIndex(15,0,0,this.players.length-1+2,3):J.getCirciePointAtIndex(15,0,0,this.players.length-1,i)}},{key:"updateCreateAirDrop",value:function(){var e=this;if(!(this.airdropLoopTimes>=z)&&this.curPlayer&&!this.curPlayer.isDead&&this.isCanStartGame){var t=this.getAirByPool();t&&(t.active=!0,t.eulerAngles=new v(0,90,0),t.position=new v(this.curPlayer.node.worldPosition.x+300,0,this.curPlayer.node.worldPosition.z),S(t).to(3,{position:new v(t.position.x-600,0,t.position.z)}).start(),this.scheduleOnce((function(){e.recoverAirToPool(t)}),3)),this.scheduleOnce((function(){var t=e.getAirDropByPool();if(t){e.airdropLoopTimes++,t.active=!0;var i=e.curPlayer.node.worldPosition.x+80*Math.random()-40,o=e.curPlayer.node.worldPosition.z+80*Math.random()-40;i>290&&(i=290),i<-290&&(i=-290),o>290&&(o=290),o<-290&&(o=-290),t.setWorldPosition(i,100,o)}}),1.5)}}},{key:"initPlayerMovePos",value:function(){for(var e=0;e<this.players.length;e++)this.players[e].node.worldPosition=this.getFollowPos(this.players[e])}},{key:"updateCountLabel",value:function(){var e=Math.floor(this.maxEnemyCount-this.killCount);this.countLabel.string=""+e}},{key:"updateCollision",value:function(){for(var e=0;e<this.collisionNode.children.length;e++){for(var t=this.collisionNode.children[e],i=0;i<this.players.length;i++)this.collisionPlayer(t,this.players[i]);for(var o=0;o<this.enemys.length;o++)this._colChange?o%2==0&&this.collisionEnemy(t,this.enemys[o]):o%2!=0&&this.collisionEnemy(t,this.enemys[o]);if(this._colChange=!this._colChange,this.gameControl){var s=v.distance(t.worldPosition,this.gameControl.node.worldPosition);if(this.gameControl&&s<t.scale.x+1){var n=1*(t.scale.x+1-s);this.gameControl.isStoning=!0,this.push(this.gameControl.node,t,n)}}}}},{key:"collisionPlayer",value:function(e,t){if(t){var i=v.distance(e.worldPosition,t.node.worldPosition);if(i<e.scale.x+1){var o=.5*(e.scale.x+1-i);this.push(t.node,e,o)}}}},{key:"collisionEnemy",value:function(e,t){if(t){var i=v.distance(e.worldPosition,t.node.worldPosition);if(i<e.scale.x+1){var o=.3*(e.scale.x+1-i);t.isStoning=!0,this.push(t.node,e,o)}}}},{key:"collisionAirDrop",value:function(e){for(var t=new v(0,0,0),i=new v(e.node.worldPosition.x,0,e.node.worldPosition.z),o=0;o<this.collisionNode.children.length;o++){var s=this.collisionNode.children[o];t.x=s.worldPosition.x,t.z=s.worldPosition.z;var n=v.distance(t,i);if(n<s.scale.x+1){var a=.3*(s.scale.x+1-n);this.push(e.node,s,a)}}}},{key:"push",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.3;v.subtract(this.out,e.worldPosition,t.worldPosition),v.normalize(this.out,this.out),this.out.y=0,e.translate(this.out.multiply(new v(i,i,i)),1)}},{key:"updateCreateEnemy",value:function(e){this.createEnemyCount<this.maxEnemyCount&&this.isCanStartGame&&(this._createEnemyTimer+=e,this._createEnemyTimer>=this._createEnemyInterval&&(this._createEnemyTimer=0,this.enemys.length<20?this._createEnemyInterval=.1*Math.random()+.1:this._createEnemyInterval=.2*Math.random()+.3,this.createEnemy()))}},{key:"createEnemy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!(this.stageinfo.mode!=L.PURSUE&&this.enemys.length>25&&0==t&&0==i)){var n=this.getEnemyFromPool(s);if(n){if(this.createEnemyCount++,o&&this.maxEnemyCount++,n.active=!0,null==s){var a=n.name[n.name.length-1];s=parseInt(a)}var r=W[s-1],l=e||new v(J.getRandom(-this.outSize,this.outSize),0,J.getRandom(-this.outSize,this.outSize));n.setWorldPosition(l);var h=n.getComponent(te);return this.enemys.push(h),this.initEnemyByInfo(h,r,l,i,t),h}}}},{key:"initEnemyByInfo",value:function(e,t,i,o,s){var n=this,a=o?this.stageinfo.attScale[2]:s?this.stageinfo.attScale[1]:this.stageinfo.attScale[0],r=o?this.stageinfo.bloodScale[2]:s?this.stageinfo.bloodScale[1]:this.stageinfo.bloodScale[0],l=M[q.instance.curStageLv].enemyBloodRate,h=t.att*a,d=t.blood*r*l;if(e.initProperty(t.moveSpeed,h,t.attRatio,d,t.attCD,t.attType,s,o),q.instance.isOpenEffect&&this.stageinfo.mode!=L.PURSUE){var c=this.getEnemyBornEffectByPool();if(c){c.active=!0,c.setWorldPosition(i);for(var u=0;u<c.children.length;u++){c.children[u].getComponent(w).play()}this.scheduleOnce((function(){n.recoverEnemyBornEffect(c)}),1)}}}},{key:"getEnemy6ExplodePoolByPool",value:function(){return this.enemy6ExplodePool.length>0?this.enemy6ExplodePool.splice(0,1)[0]:null}},{key:"recoverEnemy6ExplodeToPool",value:function(e){e.active=!1,this.enemy6ExplodePool&&this.enemy6ExplodePool.push(e)}},{key:"getEnemyDeadEffectPoolByPool",value:function(){return this.enemyDeadEffectPool.length>0?this.enemyDeadEffectPool.splice(0,1)[0]:null}},{key:"recoverEnemyDeadEffectToPool",value:function(e){e.active=!1,this.enemyDeadEffectPool&&this.enemyDeadEffectPool.push(e)}},{key:"getDaodanEffectPoolByPool",value:function(){return this.daodanEffectPool.length>0?this.daodanEffectPool.splice(0,1)[0]:null}},{key:"recoverDaodanEffectToPool",value:function(e){e.active=!1,this.daodanEffectPool&&this.daodanEffectPool.push(e)}},{key:"getDaoDanPoolByPool",value:function(){return this.daodanPool.length>0?this.daodanPool.splice(0,1)[0]:null}},{key:"recoverDaoDanToPool",value:function(e){var t=e.node;e.node.removeComponent(ne),t.active=!1,this.daodanPool&&this.daodanPool.push(t)}},{key:"recoverSuperDaoDanToPool",value:function(e){var t=e.node;e.node.removeComponent(ae),t.active=!1,this.daodanPool&&this.daodanPool.push(t)}},{key:"getBoomEffectPoolByPool",value:function(){return this.boomEffectPool.length>0?this.boomEffectPool.splice(0,1)[0]:null}},{key:"recoverBoomEffectToPool",value:function(e){e.active=!1,this.boomEffectPool&&this.boomEffectPool.push(e)}},{key:"getSuperBoomEffectPoolByPool",value:function(){return this.superBoomEffectPool.length>0?this.superBoomEffectPool.splice(0,1)[0]:null}},{key:"recoverSuperBoomEffectToPool",value:function(e){e.active=!1,this.superBoomEffectPool&&this.superBoomEffectPool.push(e)}},{key:"getBoomPoolByPool",value:function(){return this.boomPool.length>0?this.boomPool.splice(0,1)[0]:null}},{key:"recoverBoomToPool",value:function(e){var t=e.node;e.node.removeComponent(se),t.active=!1,this.boomPool&&this.boomPool.push(t)}},{key:"getGunFireByPool",value:function(e){if(2==e){if(this.gunfire2Pool.length>0)return this.gunfire2Pool.splice(0,1)[0]}else if(6==e&&this.gunfire6Pool.length>0)return this.gunfire6Pool.splice(0,1)[0];return null}},{key:"recoverGunFireToPool",value:function(e,t){e.active=!1,2==t?this.gunfire2Pool&&this.gunfire2Pool.push(e):6==t&&this.gunfire6Pool&&this.gunfire6Pool.push(e)}},{key:"getEnemyBornEffectByPool",value:function(){return this.enemyBornEffectPool.length>0?this.enemyBornEffectPool.splice(0,1)[0]:null}},{key:"recoverEnemyBornEffect",value:function(e){this.enemyBornEffectPool&&this.enemyBornEffectPool.push(e),e.active=!1}},{key:"getEnemyFromPool",value:function(e){if(e){for(var t="enemy"+e,i=-1,o=0;o<this.enemyPool.length;o++)if(this.enemyPool[o].name==t){i=o;break}return i>-1?this.enemyPool.splice(i,1)[0]:(console.warn("创建指定enemyID时无此怪物缓存",e),null)}return this.enemyPool.length>0?this.enemyPool.splice(0,1)[0]:null}},{key:"getAirByPool",value:function(){return this.airPool.length>0?this.airPool.splice(0,1)[0]:null}},{key:"recoverAirToPool",value:function(e){e.active=!1,this.airPool.push(e)}},{key:"getAirDropByPool",value:function(){return this.airDropPool.length>0?this.airDropPool.splice(0,1)[0]:null}},{key:"recoverAirDropToPool",value:function(e){var t=e.node;e.node.removeComponent(fe),t.active=!1,this.airDropPool.push(t)}},{key:"getGoldByPool",value:function(){return this.goldPool.length>0?this.goldPool.splice(0,1)[0]:null}},{key:"recoverGoldToPool",value:function(e){var t=e.node;e.node.removeComponent(ee),t.active=!1,this.goldPool.push(t)}},{key:"getEnemyBulletByPool",value:function(){return this.enemybulletPool.length>0?this.enemybulletPool.splice(0,1)[0]:null}},{key:"recoverEnemyBulletToPool",value:function(e){var t=e.node;e.node.removeComponent($),t.active=!1,this.enemybulletPool.push(t)}},{key:"getPlayerBulletByPool",value:function(){return this.playerBulletPool.length>0?this.playerBulletPool.splice(0,1)[0]:null}},{key:"recoverPlayerBulletToPool",value:function(e){var t=e.node;t.active=!1,this.playerBulletPool.push(t)}},{key:"recoverEnemyToPool",value:function(e){var t=e.node;t.active=!1,this.enemyPool.push(t)}},{key:"createElitBoss",value:function(e){if(!this._isCreateElit&&(this.killCount>=.3*this.maxEnemyCount||this.stageinfo.mode==L.PURSUE)){console.log("创建精英怪"),this.eliteEnemy.node.active=!0,this._isCreateElit=!0;var t=new v(J.getRandom(-this.outSize,this.outSize),0,J.getRandom(-this.outSize,this.outSize));e=e.x?e:t,this.eliteEnemy.node.setWorldPosition(e),this.createEnemyCount++,this.enemys.push(this.eliteEnemy);var i=this.eliteEnemy.node.name[this.eliteEnemy.node.name.length-1],o=parseInt(i),s=W[o-1];this.initEnemyByInfo(this.eliteEnemy,s,e,!1,!0)}}},{key:"createBoss",value:function(e){var t=this;if(!this._isCreateBoss&&(this.killCount>=.66*this.maxEnemyCount||this.stageinfo.mode==L.PURSUE))if(this.stageinfo.bossID>6){this._isCreateBoss=!0,this.boss.node.active=!0;var i=new v(J.getRandom(-this.outSize,this.outSize),0,J.getRandom(-this.outSize,this.outSize));e=e.x?e:i,this.boss.node.setWorldPosition(e);var o=this.stageinfo.bossID,s=Y[o-7],n=this.stageinfo.attScale[2],a=this.stageinfo.bloodScale[2],r=M[q.instance.curStageLv].enemyBloodRate,l=s.att*n,h=s.blood*a*r;console.log("创建大boss","攻击",l,"血量",h),this.boss.initProperty(s.moveSpeed,l,s.attRatio,h,s.attCD,s.attType),this.bossWarning.active=!0;var d=this.bossWarning.getChildByName("bg").getComponent(p),c=this.bossWarning.getChildByName("title");S(d).to(.5,{color:new C(255,255,255,0)}).to(.5,{color:new C(255,255,255,255)}).repeat(2).start(),S(c).to(.5,{position:new v(0,260,0)}).start(),J.playSound(U.BOSSSHOW),this.schedule((function(){J.playSound(U.BOSSSHOW)}),1.2,1),this.scheduleOnce((function(){t.bossWarning.active=!1}),3)}else if(this.stageinfo.bossID>0){this.littleBoss.node.active=!0,console.log("创建小boss"),this._isCreateBoss=!0;var u=new v(J.getRandom(-this.outSize,this.outSize),0,J.getRandom(-this.outSize,this.outSize));e=e.x?e:u,this.littleBoss.node.setWorldPosition(e),this.createEnemyCount++,this.enemys.push(this.littleBoss);var f=W[this.stageinfo.bossID-1];this.initEnemyByInfo(this.littleBoss,f,e,!0,!1),this.bossWarning.active=!0;var g=this.bossWarning.getChildByName("bg").getComponent(p),y=this.bossWarning.getChildByName("title");S(g).to(.5,{color:new C(255,255,255,0)}).to(.5,{color:new C(255,255,255,255)}).repeat(2).start(),S(y).to(.5,{position:new v(0,260,0)}).start(),J.playSound(U.BOSSSHOW),this.schedule((function(){J.playSound(U.BOSSSHOW)}),1.2,1),this.scheduleOnce((function(){t.bossWarning.active=!1}),3)}}},{key:"getScreenPos",value:function(e){return J.getScreenPos(e,this.camera,this.cavas)}},{key:"updateLeftArrow",value:function(){this.loadOk&&(this.stageinfo.mode==L.NORMAL&&(this.updateArrow(this.leftArrow1,this.enemys[0],null,!0),this.updateArrow(this.leftArrow2,this.enemys[1],null,!0)),this.updateArrow(this.leftArrow3,this.eliteEnemy,null,!1),this.stageinfo.bossID>6?this.updateArrow(this.leftArrow4,null,this.boss,!1):this.stageinfo.bossID>0&&this.updateArrow(this.leftArrow4,this.littleBoss,null,!1))}},{key:"updateArrow",value:function(e,t,i,o){if(o&&this.enemys.length>2)e.active=!1;else{if(t&&!t.isDead){var s=this.getScreenPos(t.node);if(s.x>cc.winSize.width/2||s.x<-cc.winSize.width/2||s.y>cc.winSize.height/2||s.y<-cc.winSize.height/2)return s.x>cc.winSize.width/2&&(s.x=cc.winSize.width/2-60,e.setRotationFromEuler(0,0,180)),s.x<-cc.winSize.width/2&&(s.x=-cc.winSize.width/2+60,e.setRotationFromEuler(0,0,0)),s.y>cc.winSize.height/2&&(s.y=cc.winSize.height/2-60,e.setRotationFromEuler(0,0,-90)),s.y<-cc.winSize.height/2&&(s.y=-cc.winSize.height/2+60,e.setRotationFromEuler(0,0,90)),e.setPosition(s.x,s.y,0),e.children[0].active=t.isBoss,e.children[1].active=t.isElite,e.children[2].active=!e.children[0].active&&!e.children[2].active,void(e.active=!0);e.active=!1}else e.active=!1;if(i&&!i.isDead){var n=this.getScreenPos(i.node);if(n.x>cc.winSize.width/2||n.x<-cc.winSize.width/2||n.y>cc.winSize.height/2||n.y<-cc.winSize.height/2)return e.active=!0,n.x>cc.winSize.width/2&&(n.x=cc.winSize.width/2-60,e.setRotationFromEuler(0,0,180)),n.x<-cc.winSize.width/2&&(n.x=-cc.winSize.width/2+60,e.setRotationFromEuler(0,0,0)),n.y>cc.winSize.height/2&&(n.y=cc.winSize.height/2-60,e.setRotationFromEuler(0,0,-90)),n.y<-cc.winSize.height/2&&(n.y=-cc.winSize.height/2+60,e.setRotationFromEuler(0,0,90)),e.setPosition(n.x,n.y,0),e.children[0].active=!0,e.children[1].active=!1,void(e.children[2].active=!1);e.active=!1}else e.active=!1}}},{key:"pauseGame",value:(f=c(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.loadRes("prefabs/ui/UIPause",T);case 2:t=e.sent,i=b(t),this.cavas.addChild(i),this.isPauseGame=!0;case 6:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"onKeyUp",value:function(e){"w"==e.rawEvent.key?this.loadOk&&this.showGameOver(!0):"2"==e.rawEvent.key&&this.addEatGold(Math.floor(1e3*Math.random()))}},{key:"addEatGold",value:function(e){var t=this;if(this.eatGold+=e,this.unschedule(this.delayGoldShowAlpha),!this._isEatGoldActing){this._isEatGoldActing=!0,this.goldShowCountArr[this._goldShowIndex].string=Math.floor(e).toString(),this._goldShowIndex++,this._goldShowIndex==this.goldShowArr.length&&(this._goldShowIndex=0);for(var i=0;i<this.goldShowCountArr.length;i++)this.goldShowCountArr[i].color=C.WHITE;for(var o=0;o<this._goldShowColorTween.length;o++)this._goldShowColorTween[o].stop();this._goldShowColorTween=[];for(var s=0;s<this.goldShowArr.length;s++){var n=this.goldShowArr[s];n.color=C.WHITE;var a=n.node;a.active=!0,a.position.y>=250&&(a.position=new v(a.position.x,-25,0)),S(a).to(.1,{position:new v(a.position.x,25*Math.floor(a.position.y/25)+50,0)}).start()}this.scheduleOnce((function(){t._isEatGoldActing=!1}),.1)}this.scheduleOnce(this.delayGoldShowAlpha,2),this.goldLabel&&(this.goldLabel.string=Math.floor(this.eatGold).toString())}},{key:"delayGoldShowAlpha",value:function(){for(var e=0;e<this.goldShowCountArr.length;e++){var t=S(this.goldShowCountArr[e].color).to(.6,{a:0}).start();this._goldShowColorTween.push(t)}for(var i=0;i<this.goldShowArr.length;i++){var o=S(this.goldShowArr[i].color).to(.6,{a:0}).start();this._goldShowColorTween.push(o)}}},{key:"storyTalk",value:(u=c(regeneratorRuntime.mark((function e(t,i){var o,s,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isPauseGame=!0,!t[i]){e.next=12;break}return o=function(){i++,this.storyTalk(t,i)}.bind(this),e.next=5,J.loadRes("prefabs/ui/UIGuideTalk",T);case 5:s=e.sent,n=b(s),this.cavas.addChild(n),n.getComponent(de).init(t[i],o),e.next=13;break;case 12:this.isPauseGame=!1;case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"guideGo",value:(i=c(regeneratorRuntime.mark((function e(){var t,i,o,s,n,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=q.instance.guideID&&1!=q.instance.guideID||0!=q.instance.subStageID){e.next=12;break}return t=function(){q.instance.guideID++,this.guideGo()}.bind(this),e.next=4,J.loadRes("prefabs/ui/UIGuideTalk",T);case 4:i=e.sent,o=b(i),this.cavas.addChild(o),s=o.getComponent(de),n=Q[q.instance.guideID],s.init(n,t),e.next=13;break;case 12:2==q.instance.guideID?(this.guideEndNode&&(this.guideEndNode.active=!0),this.guideLineNode&&(this.guideLineNode.active=!0),q.instance.isGuidingStage=!1):3==q.instance.guideID&&(this.guideTip3Node.active=!0,this.scheduleOnce((function(){a.guideTip3Node.active=!1}),3),q.instance.guideID=4);case 13:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"updateGuideLine",value:function(){if(this.guideLineMat&&this.curPlayer&&2==q.instance.guideID){this.guideLineNode.worldPosition=this.curPlayer.node.worldPosition,this.guideLineNode.lookAt(this.guideEndNode.position);var e=v.distance(this.guideEndNode.position,this.curPlayer.node.position),t=J.clampf(e/61,0,100);this.guideLineNode.setScale(1,1,t),this._guidelineTimer-=.002,this.guideLineMat.setProperty("tilingOffset",new E(t,1,this._guidelineTimer,0)),e<20&&(q.instance.guideID=3,this.guideEndNode.active=!1,this.guideLineNode.active=!1,this.isCanStartGame=!0,this.guideGo())}}},{key:"getBloodLabelByPool",value:function(){return this.bloodLabelPool.length>0?this.bloodLabelPool.splice(0,1)[0]:null}},{key:"recoverBloodLabelToPool",value:function(e){e.node.active=!1,this.bloodLabelPool.push(e)}},{key:"showBlood",value:function(e,t){for(var i=0;i<this._collectBlood.length;i++)if(this._collectBlood[i].enemy.uuid==t.uuid)return void(this._collectBlood[i].bloodNum+=e);this._collectBlood.push({enemy:t,bloodNum:e})}},{key:"updateShowBlood",value:function(){if(this._collectBlood.length>0){var e=this._collectBlood.splice(0,1)[0];if(e.enemy&&!e.enemy.isDead){var i=3*k.random()+7,o=k.random()>.5?1:-1,s=e.bloodNum/i*o;e.bloodNum=Math.floor(e.bloodNum+s);var n=this.getBloodLabelByPool();if(n){n.string=e.bloodNum.toString();var a=this.getScreenPos(e.enemy);a.x+=J.getRandomInt(-30,30),a.y+=100,n.node.active=!0,n.node.position=a,S(n.color).to(.4,{a:0}).start(),S(n.node).to(.4,{position:new v(a.x,a.y+150,a.z)}).call((function(){t.instance.recoverBloodLabelToPool(n)})).start()}}}}},{key:"onBtnLuZhiClick",value:function(){}},{key:"updateTask",value:function(){this.refreshStageTask()}},{key:"onBtnShowStageTask",value:function(){this._isShowStageTask=!this._isShowStageTask,this.stageTaskBtnArrow.setScale(this._isShowStageTask?1:-1,1,1),S(this.stageTaskNode).stop();var e=this._isShowStageTask?168:375;S(this.stageTaskNode).to(.2,{position:new v(e,this.stageTaskNode.position.y,0)}).start()}},{key:"refreshStageTask",value:function(){for(var e=F[this.curSubStageID],t=0;t<3;t++){var i=e.type[t],o=Math.floor(e.count[t]);if(0==this.curStageTaskInfo.stars[t]){if(1==i){var s=Math.floor(this.gameTime);this.stageTaskStars[t].active=s<=o,this.stageTaskLabels[t].string=o+"s pass level("+s+"s)"}else if(2==i){var n=Math.floor(this.playerDeadCount);this.stageTaskStars[t].active=n<=0,this.stageTaskLabels[t].string="No one died"}else if(3==i){var a=Math.floor(this.yingjiuPlayerCount);this.stageTaskStars[t].active=a>=o,this.stageTaskLabels[t].string="Rescue support ("+a+"/"+o+")"}else if(4==i){var r=Math.floor(this.killCount);this.stageTaskStars[t].active=r>=o,this.stageTaskLabels[t].string="Kill the enemy ("+r+"/"+o+")"}else if(5==i){var l=Math.floor(this.skillUseCount);this.stageTaskStars[t].active=l>=o,this.stageTaskLabels[t].string="Use the hero skill ("+l+"/"+o+")"}}else this.stageTaskStars[t].active=!0,1==i?this.stageTaskLabels[t].string=o+"s pass level(√)":2==i?this.stageTaskLabels[t].string="No one died(√)":3==i?this.stageTaskLabels[t].string="Rescue support(√)":4==i?this.stageTaskLabels[t].string="Kill the enemy(√)":5==i&&(this.stageTaskLabels[t].string="Use the hero skill(√)")}}},{key:"onDestroy",value:function(){this.gamebgm&&(this.gamebgm.stop(),this.gamebgm=null),B.targetOff(this)}}]),t}(x),qe.instance=null,Ae=i((Ne=Je).prototype,"cavas",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Le=i(Ne.prototype,"cavasBloodNode",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ge=i(Ne.prototype,"subBloodNode",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oe=i(Ne.prototype,"goldShowNode",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ze=i(Ne.prototype,"loadingNode",[Pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Me=i(Ne.prototype,"bossWarning",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ue=i(Ne.prototype,"ttBtnLuzhi",[Se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),We=i(Ne.prototype,"choosePlayerIcon",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fe=i(Ne.prototype,"camera",[Ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),je=i(Ne.prototype,"countLabel",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ye=i(Ne.prototype,"distanceLabel",[ke],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ve=i(Ne.prototype,"timeLabel",[Be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),He=i(Ne.prototype,"goldLabel",[xe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ke=i(Ne.prototype,"stageTaskNode",[Ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ze=i(Ne.prototype,"stageTaskStars",[Te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Xe=i(Ne.prototype,"stageTaskLabels",[De],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Qe=i(Ne.prototype,"stageTaskBtnArrow",[Re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=Ne))||_e)),u._RF.pop()}}}));

System.register("chunks:///AirDrop.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./DataManager.js","./Tools.js","./GameManager.js"],(function(e,t){var i,n,o,s,a,r,d,l,c,h,p,u,y,f,v,P,g;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){i=e.inherits,n=e.classCallCheck,o=e.possibleConstructorReturn,s=e.getPrototypeOf,a=e.createClass},function(e){r=e.cclegacy,d=e._decorator,l=e.Vec3,c=e.instantiate,h=e.SkeletalAnimationComponent,p=e.Component},function(e){u=e.default},function(e){y=e.Tools},function(e){f=e.GameManager}],execute:function(){r._RF.push({},"e86d7FITypDvpHE7PIJDXXW","AirDrop",void 0),g=d.ccclass,d.property,e("AirDrop",(v=g("AirDrop"),v(P=function(e){function t(){var e,i;n(this,t);for(var a=arguments.length,r=new Array(a),d=0;d<a;d++)r[d]=arguments[d];return(i=o(this,(e=s(t)).call.apply(e,[this].concat(r)))).isDead=!1,i.isOpen=!1,i.out=new l(0,0,0),i.playerIndex=0,i}return i(t,e),a(t,[{key:"start",value:function(){this.body=this.node.getChildByName("body"),this.effect=this.node.getChildByName("effect"),this.playerIndex=y.getRandomInt(0,f.instance.playerPrefabs.length-1),this.initAirPlayer()}},{key:"initAirPlayer",value:function(){this.playerNode=c(f.instance.playerPrefabs[this.playerIndex]),this.node.addChild(this.playerNode),this.playerNode.setPosition(0,0,0);var e=this.playerNode.getChildByName("body");this.anim=e.getComponent(h),this.anim.play("idle")}},{key:"update",value:function(e){e>2||this.isDead||(this.isOpen||(this.node.worldPosition.y<=5?(this.isOpen=!0,this.body.active=!1,this.effect.active=!0,this.node.worldPosition=new l(this.node.worldPosition.x,3,this.node.worldPosition.z)):this.node.translate(new l(0,-40*e,0))),this.updateEat(),f.instance.collisionAirDrop(this))}},{key:"updateEat",value:function(){if(this.isOpen){this.out.x=this.node.worldPosition.x,this.out.y=0,this.out.z=this.node.worldPosition.z;for(var e=0;e<f.instance.players.length;e++){if(!f.instance.players[e].isDead)if(l.distance(f.instance.players[e].node.worldPosition,this.out)<20)return void this.dead()}}}},{key:"dead",value:function(){var e=this;this.isDead=!0,this.effect.active=!1;var t=f.instance.fightPlayerIDs[this.playerIndex];f.instance.addPlayer(t,new l(this.node.worldPosition.x,0,this.node.worldPosition.z)),this.scheduleOnce((function(){e.playerNode.removeFromParent(),e.playerNode.destroy(),f.instance.recoverAirDropToPool(e)}),.5),u.instance.addAchieveCount(1),u.instance.addTaskCount(1),f.instance.yingjiuPlayerCount+=1}}]),t}(p))||P)),r._RF.pop()}}}));

System.register("chunks:///Box.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./GameManager.js"],(function(t,e){var o,s,i,n,a,r,u,c,l,d,h,p,y;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){o=t.inherits,s=t.classCallCheck,i=t.possibleConstructorReturn,n=t.getPrototypeOf,a=t.createClass},function(t){r=t.cclegacy,u=t._decorator,c=t.Vec3,l=t.Component},function(t){d=t.GameManager}],execute:function(){r._RF.push({},"6920eNzUFpKKKE55Y656Fty","Box",void 0),y=u.ccclass,u.property,t("Box",(h=y("Box"),h(p=function(t){function e(){var t,o;s(this,e);for(var a=arguments.length,r=new Array(a),u=0;u<a;u++)r[u]=arguments[u];return(o=i(this,(t=n(e)).call.apply(t,[this].concat(r)))).out=new c(0,0,0),o.moveSpeed=new c(3,3,3),o.isDead=!1,o}return o(e,t),a(e,[{key:"start",value:function(){}},{key:"update",value:function(t){if(!(t>2||d.instance.isPauseGame||this.isDead)){this.node.setRotationFromEuler(0,this.node.eulerAngles.y+1,0),this.out.x=this.node.worldPosition.x,this.out.y=0,this.out.z=this.node.worldPosition.z;for(var e=0;e<d.instance.players.length;e++)if(!d.instance.players[e].isDead){var o=c.distance(d.instance.players[e].node.worldPosition,this.out);if(o<40&&!this.isDead&&(c.subtract(this.out,d.instance.players[e].node.worldPosition,this.node.worldPosition),c.normalize(this.out,this.out),this.out.y=0,c.multiply(this.out,this.out,this.moveSpeed),this.node.translate(this.out,1),o<13))return void this.dead()}}}},{key:"dead",value:function(){this.isDead=!0,this.node.removeFromParent(),this.node.destroy()}}]),e}(l))||p)),r._RF.pop()}}}));

System.register("chunks:///JoyStick.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./DataManager.js"],(function(t,e){var i,o,n,s,c,h,a,y,r,u,d,v,l,T,p,g,f,S,E,m,j,_,C;return t({_dec:void 0,_dec2:void 0,_dec3:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0}),{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inherits,n=t.classCallCheck,s=t.possibleConstructorReturn,c=t.getPrototypeOf,h=t.initializerDefineProperty,a=t.assertThisInitialized,y=t.createClass},function(t){r=t.cclegacy,u=t._decorator,d=t.Node,v=t.director,l=t.Component},function(t){T=t.default}],execute:function(){r._RF.push({},"1422dmPXHxLfLpfFDkBmzJQ","JoyStick",void 0),_=u.ccclass,C=u.property,t("JoyStick",(p=_("JoyStick"),g=C(d),f=C(d),p((m=i((E=function(t){function e(){var t,i;n(this,e);for(var o=arguments.length,y=new Array(o),r=0;r<o;r++)y[r]=arguments[r];return i=s(this,(t=c(e)).call.apply(t,[this].concat(y))),h(i,"joy",m,a(i)),h(i,"joyBg",j,a(i)),i.isShowedGuideTip=!1,i}return o(e,t),y(e,[{key:"start",value:function(){this.guideTipNode=this.joyBg.getChildByName("GuideTip"),cc.systemEvent.on(cc.SystemEventType.TOUCH_START,this.onTouchStart,this),cc.systemEvent.on(cc.SystemEventType.TOUCH_MOVE,this.onTouchMoved,this),cc.systemEvent.on(cc.SystemEventType.TOUCH_END,this.onTouchEnded,this),cc.systemEvent.on(cc.SystemEventType.TOUCH_CANCEL,this.onTouchEnded,this)}},{key:"onTouchStart",value:function(t){if(!T.instance.isGuidingStage){this.isShowedGuideTip=!0,this.guideTipNode.active=!1,v.getScene().emit("START_JOY",t);var e=cc.v2(cc.winSize.width/2,cc.winSize.height/2);this.joyBegin=t.getUILocation().subtract(e),this.joy.active=!0,this.joyBg.active=!0,this.joyBg.setPosition(this.joyBegin.x,this.joyBegin.y,0),this.joy.setPosition(0,0,0)}}},{key:"onTouchMoved",value:function(t){if(!T.instance.isGuidingStage){v.getScene().emit("MOVE_JOY",t);var e=cc.v2(cc.winSize.width/2,cc.winSize.height/2),i=t.getUILocation().subtract(e),o=i.x-this.joyBegin.x,n=i.y-this.joyBegin.y,s=180*Math.atan2(o,n)/Math.PI,c=o*o,h=n*n,a=this.joyBg.width/2;if(c+h>=a*a){var y=Math.PI/180*s,r=Math.floor(Math.sin(y)*a),u=Math.floor(Math.cos(y)*a);this.joy.setPosition(r,u,0)}else this.joy.setPosition(o,n,0)}}},{key:"onTouchEnded",value:function(t){v.getScene().emit("END_JOY",t),this.joy.active=!1,this.joyBg.active=!1}},{key:"update",value:function(t){2!=T.instance.guideID||this.isShowedGuideTip||(this.joy.active=!0,this.joyBg.active=!0,this.joyBg.setPosition(0,-300,0),this.joy.setPosition(0,0,0),this.guideTipNode.active=!0)}},{key:"onDestroy",value:function(){cc.systemEvent.off(cc.SystemEventType.TOUCH_START,this.onTouchStart,this),cc.systemEvent.off(cc.SystemEventType.TOUCH_MOVE,this.onTouchMoved,this),cc.systemEvent.off(cc.SystemEventType.TOUCH_END,this.onTouchEnded,this),cc.systemEvent.off(cc.SystemEventType.TOUCH_CANCEL,this.onTouchEnded,this)}}]),e}(l)).prototype,"joy",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(E.prototype,"joyBg",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=E))||S)),r._RF.pop()}}}));

System.register("chunks:///Loading.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./DataManager.js"],(function(t,e){var i,o,n,s,r,a,c,l,u,d,p,h,f,g,v,b,y,m,B,_,L,z,C,S,w,k,P,R;return t({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_temp:void 0}),{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inherits,n=t.classCallCheck,s=t.possibleConstructorReturn,r=t.getPrototypeOf,a=t.initializerDefineProperty,c=t.assertThisInitialized,l=t.createClass},function(t){u=t.cclegacy,d=t._decorator,p=t.ModelComponent,h=t.Node,f=t.LabelComponent,g=t.director,v=t.Vec4,b=t.Component},function(t){y=t.default}],execute:function(){u._RF.push({},"82a48YcEZRGxq/kRShAysch","Loading",void 0),P=d.ccclass,R=d.property,t("Loading",(m=P("Loading"),B=R(p),_=R(h),L=R(f),m((S=i((C=function(t){function e(){var t,i;n(this,e);for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];return i=s(this,(t=r(e)).call.apply(t,[this].concat(l))),a(i,"bg3ds",S,c(i)),i.topBgs=[],i.bottomBgs=[],a(i,"lunzi",w,c(i)),a(i,"tipLabel",k,c(i)),i.offset=0,i.testoffset=0,i}return o(e,t),l(e,[{key:"onLoad",value:function(){var t=this.node.getChildByName("BGTop"),e=this.node.getChildByName("BGBottom");t.setPosition(0,cc.winSize.height/2,0),e.setPosition(0,-cc.winSize.height/2,0);for(var i=1;i<=3;i++)this.topBgs.push(t.getChildByName("BG"+i)),this.bottomBgs.push(e.getChildByName("BG"+i));for(var o=0;o<3;o++)this.bg3ds[o].node.active=o==y.instance.curStageLv,this.topBgs[o].active=o==y.instance.curStageLv,this.bottomBgs[o].active=o==y.instance.curStageLv;g.getScene().on("LoadingTip",this.refreshTip,this)}},{key:"update",value:function(t){if(!(t>2)){this.offset+=.1*t,this.testoffset+=1;for(var e=0;e<3;e++)this.bg3ds[e].material.setProperty("tilingOffset",new v(4,9,-this.offset/2,this.offset));this.lunzi.setRotationFromEuler(0,0,this.lunzi.eulerAngles.z-1)}}},{key:"refreshTip",value:function(t){this.tipLabel&&(this.tipLabel.string=t)}}]),e}(b)).prototype,"bg3ds",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=i(C.prototype,"lunzi",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=i(C.prototype,"tipLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=C))||z)),u._RF.pop()}}}));

System.register("chunks:///Logo.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./AdsMgr.js","./DataManager.js","./Tools.js","./TTManager.js"],(function(e,n){var t,i,a,o,r,u,c,s,l,d,p,f,g,m,y,b,h,v,w,q,_,j,B,k,x,L;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0}),{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inherits,a=e.classCallCheck,o=e.possibleConstructorReturn,r=e.getPrototypeOf,u=e.initializerDefineProperty,c=e.assertThisInitialized,s=e.createClass},function(e){l=e.cclegacy,d=e._decorator,p=e.ProgressBarComponent,f=e.LabelComponent,g=e.director,m=e.Component},function(e){y=e.default},function(e){b=e.default},function(e){h=e.Tools},function(e){}],execute:function(){l._RF.push({},"00641Qr6EhBq5YuG/598Dhj","Logo",void 0),x=d.ccclass,L=d.property,e("Logo",(v=x("Logo"),w=L(p),q=L(f),v((B=t((j=function(e){function n(){var e,t;a(this,n);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return t=o(this,(e=r(n)).call.apply(e,[this].concat(s))),u(t,"progress",B,c(t)),u(t,"pLabel",k,c(t)),t.curNum=0,t}return i(n,e),s(n,[{key:"start",value:function(){0==b.instance.guideID?(b.instance.isGuidingStage=!0,g.preloadScene("Game",(function(){g.loadScene("Game")}))):g.preloadScene("Main",(function(){g.loadScene("Main")})),b.instance.isNewPlayer&&h.reportAnalytics("进入游戏"),b.instance.umatrackEvent("进入loading页"),y.showBannerAd(),y.showInterAd()}},{key:"initUma",value:function(){"undefined"!=typeof tt&&tt.uma?tt.uma.init({appKey:"5fbf70701e29ca3d7be64c77",autoGetOpenid:!0,debug:!1,uploadUserInfo:!0}):"undefined"!=typeof qq&&qq.uma?qq.uma.init({appKey:"5fc5dc554034454d32e72ef0",autoGetOpenid:!0,debug:!1,uploadUserInfo:!0}):"undefined"!=typeof wx&&wx.uma&&wx.uma.init({appKey:"5fc5dc14094d637f31303df4",autoGetOpenid:!0,debug:!1,uploadUserInfo:!0})}},{key:"initBanner",value:function(){if("undefined"!=typeof tt){var e=["7mib7dfab7dj2nvv4i","83lb5lc1a9h4fn4j50","5q6ewtj46pjkdn97p6","2l9e7f7gt2t6kb30qq","41jglmsxm3l78qk9i5"],n=h.getRandomInt(0,e.length-1);h.wxBanner=h.createTTBanner(e[n],h.wxBanner,!1)}else"undefined"!=typeof qq&&(h.wxBanner=h.createBanner("8bdfd66e24030f008034b064d6969101",h.wxBanner,!1))}},{key:"update",value:function(e){this.curNum=h.clampf(this.curNum+100*e/5,0,99),this.progress.progress=this.curNum/100,this.pLabel.string=Math.floor(this.curNum)+"%"}}]),n}(m)).prototype,"progress",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(j.prototype,"pLabel",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=j))||_)),l._RF.pop()}}}));

System.register("chunks:///UIBoxOpen.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./AdsMgr.js","./UIMain.js","./DataManager.js","./Tools.js"],(function(e,t){var n,i,o,s,a,r,c,d,h,l,g,u,p,y,m,C,v,f,I,B,w,N,x,O,b,T,A,k,R,E,U,_;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){n=e.inherits,i=e.classCallCheck,o=e.possibleConstructorReturn,s=e.getPrototypeOf,a=e.createClass,r=e.asyncToGenerator},function(e){c=e.cclegacy,d=e._decorator,h=e.SpriteComponent,l=e.Texture2D,g=e.Size,u=e.ButtonComponent,p=e.LabelComponent,y=e.tween,m=e.Vec3,C=e.ProgressBarComponent,v=e.Color,f=e.Component,I=e.Prefab,B=e.instantiate},function(e){w=e.ITEMTYPE,N=e.BOX_INFO,x=e.EQUIP_INFO,O=e.PLAYER_INFO,b=e.SOUND_TYPE},function(e){T=e.default},function(e){A=e.UIMain},function(e){k=e.default},function(e){R=e.Tools}],execute:function(){c._RF.push({},"27097A2Ik1NApjugqKpeQ1l","UIBoxOpen",void 0),_=d.ccclass,d.property,e("UIBoxOpen",(E=_("UIBoxOpen"),E(U=function(e){function t(){var e,n;i(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=o(this,(e=s(t)).call.apply(e,[this].concat(r)))).closeCB=null,n.boxInfo=null,n.touchTimes=0,n.isAction=!1,n.rewards=[],n}var c;return n(t,e),a(t,[{key:"initUI",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;console.log("打开宝箱",e),this.boxInfo=e,this.closeCB=t;var n=this.node.getChildByName("Box"),i=n.getChildByName("BoxClose").getComponent(h),o=n.getChildByName("BoxOpen").getComponent(h);R.setImage(i,"icons/common/boxbig/box"+this.boxInfo.type+"_close",l,new g(508,463)),R.setImage(o,"icons/common/boxbig/box"+this.boxInfo.type+"_open",l,new g(508,463)),this.randomReward();var s=this.node.getChildByName("Touch").getComponent(u);R.addClickEvent(this.node,s,"onBtnBgClick","UIBoxOpen");var a=n.getChildByName("Count").getComponent(p);a.string=this.rewards.length.toString(),y(n).to(.05,{scale:new m(1.2,1.2,1.2)},{easing:"sineOut"}).to(.05,{scale:new m(1,1,1)},{easing:"sineIn"}).start(),k.instance.addAchieveCount(3,1,!0),k.instance.addTaskCount(17,1,!0),A.instance.bottomNode.active=!1,this.open()}},{key:"randomReward",value:function(){if(1==this.boxInfo.type){var e={type:w.GOLD,id:0,count:R.getRandomInt(N[this.boxInfo.type-1].minCount,N[this.boxInfo.type-1].maxCount)};this.rewards.push(e)}else if(2==this.boxInfo.type){var t={type:w.DIAMOND,id:0,count:R.getRandomInt(N[this.boxInfo.type-1].minCount,N[this.boxInfo.type-1].maxCount)};this.rewards.push(t)}else if(3==this.boxInfo.type||4==this.boxInfo.type)for(var n=k.instance.getRandomCardInfo(this.boxInfo.type),i=0;i<n.length;i++){var o={type:w.CARD,id:n[i].id,count:n[i].count};this.rewards.push(o)}else if(5==this.boxInfo.type){var s=R.getRandomInt(1,x.length),a={type:w.EQUIP,id:s,count:1};this.rewards.push(a)}else console.error("随机宝箱奖励时出错type",this.boxInfo.type);for(var r=0;r<this.rewards.length;r++)k.instance.sendReward(this.rewards[r].type,this.rewards[r].id,this.rewards[r].count)}},{key:"refreshUI",value:function(){var e=this,t=this.node.getChildByName("Box"),n=t.getChildByName("BoxClose"),i=t.getChildByName("BoxOpen"),o=t.getChildByName("Count").getComponent(p),s=this.node.getChildByName("TipOpen"),a=this.node.getChildByName("Info"),r=a.getChildByName("Icon").getComponent(h),c=a.getChildByName("Count").getComponent(p),d=a.getChildByName("Name").getComponent(p),l=a.getChildByName("Desc").getComponent(p),g=a.getChildByName("ProgressBar").getComponent(C),u=g.node.getChildByName("Label").getComponent(p),f=a.getChildByName("Lv").getComponent(p),I=a.getChildByName("AttIcon"),B=a.getChildByName("BloodIcon"),N=a.getChildByName("Lock"),b=this.node.getChildByName("BtnOK"),T=this.node.getChildByName("BtnVideo"),A=this.node.getChildByName("BtnGet"),E=this.node.getChildByName("BtnNo"),U=this.node.getChildByName("End"),_=this.node.getChildByName("BtnAgain"),D=R.clampf(this.rewards.length-this.touchTimes,0,99);o.string=""+Math.floor(D),i.active=!0,n.active=!1,a.active=!0,a.setPosition(0,290,0),a.setScale(.8,.8,.8),y(a).to(.1,{position:new m(0,344,0)},{easing:"sineIn"}).start(),y(a).to(.1,{scale:new m(1,1,1)},{easing:"sineIn"}).start(),y(t).to(.05,{scale:new m(1.2,1.2,1.2)},{easing:"sineOut"}).to(.05,{scale:new m(1,1,1)},{easing:"sineIn"}).start();var P=this.rewards[this.touchTimes-1];if(P)if(k.instance.setItemIcon(r,P.type,P.id),c.string="x"+P.count,d.string=k.instance.getItemName(P.type,P.id),P.type==w.GOLD)l.string="your gold:",l.color=v.WHITE,g.progress=0,f.string="",N.active=!1,I.active=!1,B.active=!1,u.string=""+k.instance.getItemCount(P.type,P.id);else if(P.type==w.DIAMOND)l.string="your diamond:",l.color=v.WHITE,g.progress=0,f.string="",N.active=!1,I.active=!1,B.active=!1,u.string=""+k.instance.getItemCount(P.type,P.id);else if(P.type==w.CARD){I.active=!1,B.active=!1;var M=k.instance.isUnlockPlayer(P.id),S=k.instance.getPlayerInfoById(P.id),j=O[P.id],G=S.cardCount,L=j.lvupCount,F=R.clampf(G/L,0,1);M?(G>=L?(l.string="Ready to upgrade.",l.color=v.GREEN,y(g).to(.5,{progress:F}).start(),f.string=""+(S.lv+1),N.active=!1):(l.string="your level:",l.color=v.WHITE,y(g).to(.5,{progress:F}).start(),f.string=""+(S.lv+1),N.active=!1),u.string=G+"/"+L):(l.string="lock",l.color=v.WHITE,g.progress=0,f.string="",N.active=!0,u.string=G+"/"+L)}else if(P.type==w.EQUIP){var H=x[P.id-1],V=O[H.ownerID];l.string=V.name+"Exclusive",l.color=v.WHITE,g.progress=0,f.string="",N.active=!1,u.string="+"+H.addValue[0]+"%",1==H.addType[0]?(I.active=!0,B.active=!1):(I.active=!1,B.active=!0)}if(this.canEnd())if(s.active=!1,1==this.rewards.length)this.rewards[0].type==w.GOLD||this.rewards[0].type==w.DIAMOND?(T.active=!0,this.scheduleOnce((function(){A.active=!0}),2)):b.active=!0;else{this.isAction=!0,a.active=!1,y(t).to(.2,{position:new m(0,189,0)},{easing:"sineIn"}).start();for(var W=this.rewards.length>4?4:this.rewards.length,Q=0;Q<4;Q++){var Y=this.rewards[Q],z=U.getChildByName("Reward"+(Q+1)),K=z.getChildByName("Icon").getComponent(h),q=z.getChildByName("Count").getComponent(p);Y?(z.active=!0,k.instance.setItemIcon(K,Y.type,Y.id),q.string="x"+Y.count):z.active=!1,z.setPosition(z.position.x+90*(4-W),z.position.y,z.position.z)}this.scheduleOnce((function(){U.active=!0,_.active=!0,e.scheduleOnce((function(){E.active=!0}),2)}),.1),this.scheduleOnce((function(){e.isAction=!1}),.2)}}},{key:"onBtnBgClick",value:function(){this.canEnd()||(R.playSound(b.BUTTON),this.open())}},{key:"onBtnVideoClick",value:function(){R.playSound(b.BUTTON);var e=function(){for(var e=0;e<this.rewards.length;e++)k.instance.sendReward(this.rewards[e].type,this.rewards[e].id,this.rewards[e].count);for(var t=0;t<this.rewards.length;t++)k.instance.sendReward(this.rewards[t].type,this.rewards[t].id,this.rewards[t].count);this.closeMine(),R.ShowTip("Get three times the reward"),R.reportAnalytics("观看视频_三倍领取_完成")}.bind(this);R.reportAnalytics("观看视频_三倍领取"),T.showVideoAd(e)}},{key:"onBtnAgainClick",value:function(){R.playSound(b.BUTTON);var e=function(){this.openAgain(),R.reportAnalytics("观看视频_宝箱再开_完成")}.bind(this);R.reportAnalytics("观看视频_宝箱再开"),T.showVideoAd(e)}},{key:"openAgain",value:(c=r(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.loadRes("prefabs/ui/UIBoxOpen",I);case 2:n=e.sent,i=B(n),A.instance.uiTopNode.addChild(i),i.getComponent(t).initUI(this.boxInfo,this.closeCB),this.node.removeFromParent(),this.node.destroy();case 9:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"onBtnCloseClick",value:function(){R.playSound(b.BUTTON),this.closeMine()}},{key:"open",value:function(){this.touchTimes++,this.refreshUI()}},{key:"canEnd",value:function(){return 1==this.rewards.length?this.touchTimes>=this.rewards.length:this.touchTimes>this.rewards.length}},{key:"closeMine",value:function(){this.isAction||(1==this.rewards.length&&A.instance.showMoneyAnim(m.ZERO,this.rewards[0].type,this.rewards[0].id,this.rewards[0].count),this.closeCB&&this.closeCB(),this.node.removeFromParent(),this.node.destroy(),A.instance.bottomNode.active=!0,10==k.instance.guideID&&A.instance.showGuide())}}]),t}(f))||U)),c._RF.pop()}}}));

System.register("chunks:///UIBox.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./AdsMgr.js","./UIMain.js","./DataManager.js","./Tools.js","./UIBoxOpen.js"],(function(e,t){var n,o,i,s,a,r,c,l,h,u,f,d,p,C,B,x,g,I,m,y,v,b,k,N,S,O,w,U,D,T;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){n=e.inherits,o=e.classCallCheck,i=e.possibleConstructorReturn,s=e.getPrototypeOf,a=e.createClass,r=e.asyncToGenerator},function(e){c=e.cclegacy,l=e._decorator,h=e.director,u=e.ScrollViewComponent,f=e.MaskComponent,d=e.ButtonComponent,p=e.LabelComponent,C=e.SpriteComponent,B=e.Component,x=e.Prefab,g=e.instantiate},function(e){I=e.BOX_EQUIP_PRICE,m=e.BOX_INFO,y=e.ITEMTYPE,v=e.BOX_OPEN_DIAMOND_COUNT,b=e.SOUND_TYPE},function(e){k=e.default},function(e){N=e.UIMain},function(e){S=e.default},function(e){O=e.Tools},function(e){w=e.UIBoxOpen}],execute:function(){c._RF.push({},"6f06aoOZP5JcZVNcHbpM+4/","UIBox",void 0),T=l.ccclass,l.property,e("UIBox",(U=T("UIBox"),U(D=function(e){function t(){var e,n;o(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=i(this,(e=s(t)).call.apply(e,[this].concat(r)))).cardCells=[],n.loadOK=!1,n.videoChange=!1,n._openBoxCan=!0,n}var c,l,B,U;return n(t,e),a(t,[{key:"onLoad",value:function(){h.getScene().on("refreshBox",this.refreshBox,this),h.getScene().on("onBoxScrollToBottom",this.onBoxScrollToBottom,this),h.getScene().on("onOpenCardBox",this.onOpenCardBox,this),this.scr=this.node.getChildByName("ScrollView").getComponent(u),this.scr.node.height=cc.winSize.height,this.scr.view.height=cc.winSize.height,this.scr.content.setPosition(0,cc.winSize.height/2,0),this.scr.view.getComponent(f).inverted=!1,this.equipCell=this.scr.content.getChildByName("Cell1");var e=this.equipCell.getChildByName("Button").getComponent(d);O.addClickEvent(this.node,e,"onBtnBuyEquipBoxClick","UIBox"),e.node.getChildByName("Count").getComponent(p).string=""+I;for(var t=2;t<=4;t++){var n=this.scr.content.getChildByName("Cell"+t);this.cardCells.push(n)}for(var o=0;o<this.cardCells.length;o++)for(var i=this.cardCells[o].getChildByName("BoxNode"),s=1;s<=8;s++){var a=i.getChildByName("Box"+s);if(a){var r=a.getComponent(d);O.addClickEvent(this.node,r,"onBoxClick","UIBox",o+","+s)}}this.refreshEquipCellShow(),this.refreshCardCells(!0),this.schedule(this.updateRefreshSec,1),this.loadOK=!0}},{key:"onBoxScrollToBottom",value:function(){this.scr&&this.scr.scrollToBottom(.1)}},{key:"onOpenCardBox",value:function(){this.openBox("2,1")}},{key:"refreshBox",value:function(){this&&this.loadOK&&(this.refreshEquipCellShow(),this.refreshCardCells(!0))}},{key:"refreshEquipCellShow",value:function(){var e=S.instance.getBoxInfosByIDs([5]);this.equipCell.active=e.length>0,this.equipCell.active?(this.scr.content.height=1982,this.cardCells[0].setPosition(4,-570,0),this.cardCells[1].setPosition(4,-946,0),this.cardCells[2].setPosition(4,-1464,0)):(this.scr.content.height=1757,this.cardCells[0].setPosition(4,-314,0),this.cardCells[1].setPosition(4,-689,0),this.cardCells[2].setPosition(4,-1207,0)),this.equipCell.getChildByName("Count").getComponent(p).string=""+e.length}},{key:"refreshCardCells",value:function(e){for(var t=0;t<this.cardCells.length;t++){var n=this.cardCells[t],o=null;0==t?o=S.instance.getBoxInfosByIDs([1]):1==t?o=S.instance.getBoxInfosByIDs([2]):2==t&&(o=S.instance.getBoxInfosByIDs([3,4])),this.initBoxesInfo(n,o,e)}}},{key:"initBoxesInfo",value:function(e,t,n){for(var o=e.getChildByName("BoxNode"),i=1;i<=8;i++){var s=o.getChildByName("Box"+i),a=t[i-1];if(s&&(s.active=null!=a),!a)return;var r=m[a.type-1];if(s){var c=(new Date).valueOf(),l=1e3*r.openSec,h=Math.floor(l-(c-a.time)),u=O.clampf(h/1e3,0,l),f=s.getChildByName("BtnOpen"),d=s.getChildByName("BtnDiamond"),B=s.getChildByName("BtnVideo"),x=s.getChildByName("Count").getComponent(p),g=s.getChildByName("Time").getComponent(p),I=d.getChildByName("Count").getComponent(p),b=s.getChildByName("reddot");if(n){var k=s.getChildByName("Icon").getComponent(C);S.instance.setItemIcon(k,y.BOX,r.id)}x.node.active=r.id<3,g.node.active=u>0,x.string=r.minCount+"~"+r.maxCount,g.string=O.timestampToTime(u),f.active=h<=0,h>0?B?(B.active=this.videoChange,d.active=!B.active):d.active=!0:(B&&(B.active=!1),d.active=!1),I.string=Math.ceil(v*u).toString(),b.active=f.active}}}},{key:"updateRefreshSec",value:function(){this.refreshCardCells(!1)}},{key:"onBtnBuyEquipBoxClick",value:(U=r(regeneratorRuntime.mark((function e(){var t,n,o,i,s,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O.playSound(b.BUTTON),!((t=S.instance.getBoxInfosByIDs([5])).length>0)){e.next=35;break}if(n=t[0],!(S.instance.diamond>=I)){e.next=34;break}S.instance.diamond-=I,o=-1,i=0;case 8:if(!(i<S.instance.boxInfo.length)){e.next=15;break}if(S.instance.boxInfo[i].id!=n.id){e.next=12;break}return o=i,e.abrupt("break",15);case 12:i++,e.next=8;break;case 15:if(!(o>-1)){e.next=31;break}return S.instance.boxInfo.splice(o,1),localStorage.setItem("boxInfo",JSON.stringify(S.instance.boxInfo)),this.refreshEquipCellShow(),this.refreshCardCells(!0),s=function(){this.hideUI(!1)}.bind(this),e.next=23,O.loadRes("prefabs/ui/UIBoxOpen",x);case 23:a=e.sent,r=g(a),N.instance.uiTopNode.addChild(r),r.getComponent(w).initUI(n,s),this.hideUI(!0),e.next=32;break;case 31:console.error("删除装备宝箱信息时未找到宝箱信息",S.instance.boxInfo,n);case 32:e.next=35;break;case 34:N.instance.showBuzu(y.DIAMOND);case 35:case"end":return e.stop()}}),e,this)}))),function(){return U.apply(this,arguments)})},{key:"onBtnChangeClick",value:function(){this.videoChange=!this.videoChange,this.refreshCardCells(!1)}},{key:"onBoxClick",value:function(e,t){O.playSound(b.BUTTON),e.currentTarget.getChildByName("BtnOpen").active?this.openBox(t):this.buyBox(t)}},{key:"openBox",value:(B=r(regeneratorRuntime.mark((function e(t){var n,o,i,s,a,r,c,l,h,u,f,d,p,C;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._openBoxCan){e.next=3;break}return O.ShowTip("Chest open..."),e.abrupt("return");case 3:if(this._openBoxCan=!1,n=O.splitToNumber(t,","),o=n[0],i=n[1],this.cardCells[o].getChildByName("Box"+i),s=null,a=null,0==o?s=S.instance.getBoxInfosByIDs([1]):1==o?s=S.instance.getBoxInfosByIDs([2]):2==o&&(s=S.instance.getBoxInfosByIDs([3,4])),a=s[i-1],r=m[a.type-1],c=(new Date).valueOf(),l=1e3*r.openSec,h=Math.floor(l-(c-a.time)),!(O.clampf(h/1e3,0,l)<=0)){e.next=45;break}u=-1,f=0;case 21:if(!(f<S.instance.boxInfo.length)){e.next=28;break}if(S.instance.boxInfo[f].id!=a.id){e.next=25;break}return u=f,e.abrupt("break",28);case 25:f++,e.next=21;break;case 28:if(!(u>-1)){e.next=44;break}return S.instance.boxInfo.splice(u,1),localStorage.setItem("boxInfo",JSON.stringify(S.instance.boxInfo)),this.refreshEquipCellShow(),this.refreshCardCells(!0),d=function(){this.hideUI(!1)}.bind(this),e.next=36,O.loadRes("prefabs/ui/UIBoxOpen",x);case 36:p=e.sent,C=g(p),N.instance.uiTopNode.addChild(C),C.getComponent(w).initUI(a,d),this.hideUI(!0),e.next=45;break;case 44:console.error("删除宝箱信息时未找到宝箱信息",S.instance.boxInfo,a);case 45:this._openBoxCan=!0;case 46:case"end":return e.stop()}}),e,this)}))),function(e){return B.apply(this,arguments)})},{key:"buyBox",value:(l=r(regeneratorRuntime.mark((function e(t){var n,o,i,s,a,r,c,l,h,u,f,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=O.splitToNumber(t,","),o=n[0],i=n[1],s=null,0==o?s=S.instance.getBoxInfosByIDs([1]):1==o?s=S.instance.getBoxInfosByIDs([2]):2==o&&(s=S.instance.getBoxInfosByIDs([3,4])),a=s[i-1],r=m[a.type-1],c=(new Date).valueOf(),l=1e3*r.openSec,h=Math.floor(l-(c-a.time)),(u=O.clampf(h/1e3,0,l))>0&&(this.videoChange?(f=function(){this.buyBoxSuccess(t),O.reportAnalytics("观看视频_提前开宝箱_完成")}.bind(this),O.reportAnalytics("观看视频_提前开宝箱"),k.showVideoAd(f)):(d=Math.ceil(v*u),S.instance.diamond>=d?(S.instance.diamond-=d,this.buyBoxSuccess(t)):N.instance.showBuzu(y.DIAMOND)));case 13:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"buyBoxSuccess",value:(c=r(regeneratorRuntime.mark((function e(t){var n,o,i,s,a,r,c,l,h,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=O.splitToNumber(t,","),o=n[0],i=n[1],s=null,a=null,0==o?s=S.instance.getBoxInfosByIDs([1]):1==o?s=S.instance.getBoxInfosByIDs([2]):2==o&&(s=S.instance.getBoxInfosByIDs([3,4])),a=s[i-1],r=-1,c=0;case 9:if(!(c<S.instance.boxInfo.length)){e.next=16;break}if(S.instance.boxInfo[c].id!=a.id){e.next=13;break}return r=c,e.abrupt("break",16);case 13:c++,e.next=9;break;case 16:return r>-1?(S.instance.boxInfo.splice(r,1),localStorage.setItem("boxInfo",JSON.stringify(S.instance.boxInfo)),this.refreshEquipCellShow(),this.refreshCardCells(!0)):console.error("删除宝箱信息时未找到宝箱信息",S.instance.boxInfo,a),l=function(){this.hideUI(!1)}.bind(this),e.next=20,O.loadRes("prefabs/ui/UIBoxOpen",x);case 20:h=e.sent,u=g(h),N.instance.uiTopNode.addChild(u),u.getComponent(w).initUI(a,l),this.hideUI(!0);case 26:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"hideUI",value:function(e){this.node.active=!e}}]),t}(B))||D)),c._RF.pop()}}}));

System.register("chunks:///UIGameOver.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./AdsMgr.js","./DataManager.js","./Tools.js","./TTManager.js","./GameManager.js"],(function(e,t){var n,a,i,o,s,c,r,l,g,d,u,h,f,S,m,v,I,C,y,B,p,k,D,T,N,b,O;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){n=e.inherits,a=e.classCallCheck,i=e.possibleConstructorReturn,o=e.getPrototypeOf,s=e.createClass},function(e){c=e.cclegacy,r=e._decorator,l=e.director,g=e.ButtonComponent,d=e.LabelComponent,u=e.SpriteComponent,h=e.Color,f=e.Component},function(e){S=e.STAGE_MODE,m=e.STAGE_LV,v=e.ITEMTYPE,I=e.STAGE_TASK_INFO,C=e.SOUND_TYPE,y=e.STAGE_INFO,B=e.TASK_REWARD},function(e){p=e.default},function(e){k=e.default},function(e){D=e.Tools},function(e){e.default},function(e){T=e.GameManager}],execute:function(){c._RF.push({},"48f1f3Lz8tN5Y8BUW6QEO3F","UIGameOver",void 0),O=r.ccclass,r.property,e("UIGameOver",(N=O("UIGameOver"),N(b=function(e){function t(){var e,n;a(this,t);for(var s=arguments.length,c=new Array(s),r=0;r<s;r++)c[r]=arguments[r];return(n=i(this,(e=o(t)).call.apply(e,[this].concat(c)))).taskCells=[],n.gold=0,n}return n(t,e),s(t,[{key:"start",value:function(){if(D.showBanner(!0),k.instance.isNewPlayer){var e=Math.floor(k.instance.subStageID);D.reportAnalytics("通关",{stageID:e})}var t=this.node.getChildByName("BG");t.width=l.getWinSize().width,t.height=l.getWinSize().height;var n=this.node.getChildByName("Reward"),a=this.node.getChildByName("Win"),i=this.node.getChildByName("Lose"),o=a.getChildByName("BtnVideo").getComponent(g),s=a.getChildByName("BtnTTVideo").getComponent(g),c=a.getChildByName("BtnTTShareVideo").getComponent(g),r=a.getChildByName("BtnOk").getComponent(g),h=i.getChildByName("BtnReplay").getComponent(g),f=i.getChildByName("BtnHome").getComponent(g);D.addClickEvent(this.node,o,"onBtnDoubleClick","UIGameOver"),D.addClickEvent(this.node,s,"onBtnDoubleClick","UIGameOver"),D.addClickEvent(this.node,r,"onBtnHomeClick","UIGameOver"),D.addClickEvent(this.node,h,"onBtnLvPlayerClick","UIGameOver"),D.addClickEvent(this.node,f,"onBtnHomeClick","UIGameOver"),D.addClickEvent(this.node,c,"onBtnTTShareVideoClick","UIGameOver"),c.node.active="undefined"!=typeof tt,s.node.active="undefined"!=typeof tt,o.node.active="undefined"==typeof tt,T.instance.stageinfo.mode==S.PURSUE?(k.instance.isTalkByPursueStage=1,localStorage.setItem("isTalkByPursueStage","1")):T.instance.stageinfo.mode==S.REWARD&&(k.instance.isTalkByRewardStage=1,localStorage.setItem("isTalkByRewardStage","1"));for(var B=this.node.getChildByName("Task"),p=1;p<=5;p++){var N=B.getChildByName("Task"+p);this.taskCells.push(N)}this.gold=T.instance.eatGold;var b=m[k.instance.curStageLv];this.gold=Math.floor(b.goldRate*this.gold);var O=[];O.push({type:v.GOLD,id:0,count:this.gold});for(var E=[],G=0;G<T.instance.eatBox;G++){var w=D.getRandomInt(1,5);E.push({type:v.BOX,id:w,count:1})}for(var R=0;R<E.length;R++){var _=this.getBoxInfoByID(O,E[R].id);_?_.count++:O.push(E[R])}for(var A=!1,M=0;M<k.instance.boxInfo.length;M++)3!=k.instance.boxInfo[M].id&&4!=k.instance.boxInfo[M].id||(A=!0);A||k.instance.sendReward(v.BOX,3,1);for(var U=0;U<O.length;U++)T.instance.isWin?k.instance.sendReward(O[U].type,O[U].id,O[U].count):O[U].type!=v.BOX&&k.instance.sendReward(O[U].type,O[U].id,O[U].count);for(var P=I[T.instance.curSubStageID],L=0;L<3;L++){var W=P.type[L],j=Math.floor(P.count[L]);if(0==T.instance.curStageTaskInfo.stars[L])if(1==W){var H=Math.floor(T.instance.gameTime);T.instance.curStageTaskInfo.stars[L]=H<=j?1:0}else if(2==W){var x=Math.floor(T.instance.playerDeadCount);T.instance.curStageTaskInfo.stars[L]=x<=0?1:0}else if(3==W){var V=Math.floor(T.instance.yingjiuPlayerCount);T.instance.curStageTaskInfo.stars[L]=V>=j?1:0}else if(4==W){var F=Math.floor(T.instance.killCount);T.instance.curStageTaskInfo.stars[L]=F>=j?1:0}else if(5==W){var J=Math.floor(T.instance.skillUseCount);T.instance.curStageTaskInfo.stars[L]=J>=j?1:0}}localStorage.setItem("stageInfo",JSON.stringify(k.instance.stageInfo)),localStorage.setItem("hardStageInfo",JSON.stringify(k.instance.hardStageInfo)),localStorage.setItem("emStageInfo",JSON.stringify(k.instance.emStageInfo));var X=n.getChildByName("Desc").getComponent(d),z=n.getChildByName("RewardDesc").getComponent(d),Y=n.getChildByName("Cells");X.string="Hard:   "+b.name,z.string=b.desc,0==k.instance.curStageLv&&X.node.setPosition(0,X.node.position.y,0);for(var K=62.5,Q=0;Q<4;Q++){var q=Y.getChildByName("Cell"+Q),Z=q.getChildByName("Icon").getComponent(u),$=q.getChildByName("Desc").getComponent(d),ee=q.getChildByName("Cover"),te=O[Q];te?(q.active=!0,k.instance.setItemIcon(Z,te.type,te.id),$.string=""+te.count,K-=62.5):q.active=!1,T.instance.isWin?ee.active=!1:ee.active=te&&te.type==v.BOX}if(Y.setPosition(K,0,0),a.active=T.instance.isWin,i.active=!T.instance.isWin,T.instance.isWin){D.playSound(C.WIN);(!(k.instance.chooseSubStageID>-1)||k.instance.chooseSubStageID==k.instance.getSubStageID()+1)&&(console.log("关卡增长+1"),0==k.instance.curStageLv?k.instance.subStageID<y.length-1&&(18==k.instance.subStageID?k.instance.addAchieveCount(4):38==k.instance.subStageID&&k.instance.addAchieveCount(4),k.instance.subStageID+=1,localStorage.setItem("subStageID",k.instance.subStageID.toString())):1==k.instance.curStageLv?k.instance.hardSubStageID<y.length-1&&(k.instance.hardSubStageID+=1,localStorage.setItem("hardSubStageID",k.instance.hardSubStageID.toString())):2==k.instance.curStageLv&&k.instance.emSubStageID<y.length-1&&(k.instance.emSubStageID+=1,localStorage.setItem("emSubStageID",k.instance.emSubStageID.toString())))}else D.playSound(C.LOSE);localStorage.setItem("taskInfo",JSON.stringify(k.instance.taskInfo)),localStorage.setItem("achieveInfo",JSON.stringify(k.instance.achieveInfo)),localStorage.setItem("guideID",k.instance.guideID.toString()),this.initTaskInfo()}},{key:"getBoxInfoByID",value:function(e,t){for(var n=0;n<e.length;n++)if(e[n].id==t)return e[n];return null}},{key:"initTaskInfo",value:function(){for(var e=0;e<this.taskCells.length;e++){var t=this.taskCells[e],n=t.getChildByName("Desc").getComponent(d),a=t.getChildByName("Count").getComponent(d),i=t.getChildByName("Done"),o=k.instance.taskInfo[e],s=B[o.id];n.string=s.desc+s.limit+s.timesDesc,a.string="["+o.count+"/"+s.limit+"]",i.active=o.count>=s.limit,a.node.active=o.count<s.limit,n.color=o.count>=s.limit?new h(0,255,0,255):new h(255,255,255,255)}}},{key:"onBtnDoubleClick",value:function(){var e=function(){k.instance.gold+=this.gold,this.onBtnHomeClick(),D.ShowTip("Double reward"),D.reportAnalytics("观看视频_结算双倍_完成")}.bind(this);p.showVideoAd(e)}},{key:"onBtnTTShareVideoClick",value:function(){}},{key:"onBtnLvPlayerClick",value:function(){k.instance.jumpPlayerPage=!0,this.onBtnHomeClick()}},{key:"onBtnHomeClick",value:function(){D.playSound(C.BUTTON),l.loadScene("Main"),p.showInterAd()}}]),t}(f))||b)),c._RF.pop()}}}));

System.register("chunks:///UIPlayerInfo.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./AdsMgr.js","./UIMain.js","./DataManager.js","./Tools.js"],(function(e,t){var n,i,o,a,s,l,r,h,d,c,y,p,g,u,C,m,v,f,I,B,N,D,k,T,P,S,w,E,L,A,R,U,b,_,x,O,V,M,H,F;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){n=e.inherits,i=e.classCallCheck,o=e.possibleConstructorReturn,a=e.getPrototypeOf,s=e.createClass,l=e.asyncToGenerator},function(e){r=e.cclegacy,h=e._decorator,d=e.Vec3,c=e.LabelComponent,y=e.SpriteComponent,p=e.Color,g=e.Texture2D,u=e.director,C=e.RenderTexture,m=e.SpriteFrame,v=e.Vec2,f=e.ButtonComponent,I=e.Component,B=e.ScrollViewComponent,N=e.MaskComponent,D=e.Prefab,k=e.instantiate,T=e.SkeletalAnimationComponent,P=e.ProgressBarComponent},function(e){S=e.PLAYER_DATA,w=e.ITEMTYPE,E=e.PLAYER_INFO,L=e.EQUIP_ATT_TYPE_DESC,A=e.SOUND_TYPE,R=e.PLAYER_ATT_TYPE,U=e.PLAYER_PROPERTY,b=e.EQUIP_ADD_TYPE},function(e){_=e.default},function(e){x=e.UIMain},function(e){O=e.default},function(e){V=e.Tools}],execute:function(){r._RF.push({},"e0595S42ANC9LjEQcUVo7FZ","UIPlayerInfo",void 0),F=h.ccclass,h.property,e("UIPlayerInfo",(M=F("UIPlayerInfo"),M(H=function(e){function t(){var e,n;i(this,t);for(var s=arguments.length,l=new Array(s),r=0;r<s;r++)l[r]=arguments[r];return(n=o(this,(e=a(t)).call.apply(e,[this].concat(l)))).playerID=-1,n.cells=[],n.closeEvent=null,n.out=new d,n.attType=0,n.videoBtnShowTimes=0,n.videoBtnShowLimit=5,n._isCanAutoMovePlayer=!0,n.refreshCellByData=function(e,t,n,i){var o=e.getChildByName("High"),a=e.getChildByName("Icon1"),s=e.getChildByName("Icon2"),l=e.getChildByName("IconHigh1"),r=e.getChildByName("IconHigh2"),h=e.getChildByName("Lv").getComponent(c),d=e.getChildByName("Name").getComponent(c),u=e.getChildByName("Value1").getComponent(c),C=e.getChildByName("Value2").getComponent(c),m=e.getChildByName("Weapon").getComponent(y);if(h.string="Lv"+(n+1),o.active=i>=n,u.color=i>=n?p.WHITE:new p(183,174,185,255),C.color=i>=n?p.WHITE:new p(183,174,185,255),t.unlockWeapon){m.node.active=!0,a.active=!1,s.active=!1,l.active=!1,r.active=!1,u.node.active=!1,C.node.active=!1,d.string="new weapon";var v=Math.floor(this.playerID+1);V.setImage(m,"icons/weapon/Player"+v+"_gun"+t.unlockWeapon,g),m.node.width=m.node.height=120}else m.node.active=!1,l.active=i>=n,r.active=i>=n,a.active=!l.active,s.active=!r.active,u.string="+"+t.blood,C.string="+"+t.att},n}var r,h,I,M;return n(t,e),s(t,[{key:"initUI",value:(M=l(regeneratorRuntime.mark((function e(t,n){var i,o,a,s,l,r,h,p,g,C,m,v,I,P;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V.showBanner(!1),u.getScene().on("onUpPlayer",this.onUpPlayer,this),this.closeEvent=n,this.playerID=t,this.attType=t+1,i=E[this.playerID],this.node.getChildByName("BG").height=cc.winSize.height,o=this.node.getChildByName("Center"),a=o.getChildByName("Name").getComponent(c),this.infoNode=o.getChildByName("TopInfo"),s=this.infoNode.getChildByName("BG").getComponent(f),this.scr=o.getChildByName("ScrollView").getComponent(B),l=o.getChildByName("ButtonLvUp").getComponent(f),r=l.node.getChildByName("Label").getComponent(c),h=o.getChildByName("ButtonClose").getComponent(f),this.renderImage=o.getChildByName("RenderImage").getComponent(y),this.btnVideo=o.getChildByName("ButtonVideo").getComponent(f),p=this.node.getChildByName("Skill3Desc").getChildByName("Icon").getComponent(y),this.resetBtnVideoShowTimes(),this.touch=o.getChildByName("Touch"),this.touch.on(cc.SystemEventType.TOUCH_MOVE,this.onMovePlayer,this),this.touch.on(cc.SystemEventType.TOUCH_END,this.onMoveEndPlayer,this),r.string=""+i.lvupGold,this.scr.view.getComponent(N).inverted=!1,a.string=i.name,this.refreshPlayerIcon(!0),this.initEquipIcon(),this.initSkillDesc(),this.initScrollview(),g=this.node.getChildByName("PlayerDesc").getComponent(f),C=this.node.getChildByName("Skill1Desc").getComponent(f),m=this.node.getChildByName("Skill2Desc").getComponent(f),v=this.node.getChildByName("Skill3Desc").getComponent(f),V.addClickEvent(this.node,g,"closeDescNode","UIPlayerInfo"),V.addClickEvent(this.node,C,"closeDescNode","UIPlayerInfo"),V.addClickEvent(this.node,m,"closeDescNode","UIPlayerInfo"),V.addClickEvent(this.node,v,"closeDescNode","UIPlayerInfo"),this.initRenderImage(),e.next=42,V.loadRes("prefabs/player"+(this.playerID+1),D);case 42:I=e.sent,this.player=k(I),x.instance.playerShowNode.addChild(this.player),this.body=this.player.getChildByName("body"),this.player.position=d.ZERO,this.body.getComponent(T).play("idle"),O.instance.setItemIcon(p,w.SKILL,this.playerID+1),0==this.playerID?this.player.scale=new d(.75,.75,.75):1==this.playerID?this.player.scale=new d(.7,.7,.7):2==this.playerID?this.player.scale=new d(.7,.7,.7):3==this.playerID?this.player.scale=new d(.65,.65,.65):4==this.playerID?this.player.scale=new d(.75,.75,.75):5==this.playerID&&(this.player.scale=new d(.7,.7,.7)),this.attType==R.TOUDAN?(this.leftHand=this.body.getChildByName("Bip001 L Hand Socket").getChildByName("L_shoukong"),this.rightHand=this.body.getChildByName("Bip001 R Hand Socket").getChildByName("R_shoukong")):((P=this.body.getChildByName("Bip002 R Hand Socket"))||(P=this.body.getChildByName("Bip001 R Hand Socket")),this.rightHand=P.getChildByName("shoukong")),this.initWeapon(),V.addClickEvent(this.node,l,"onBtnLvUpClick","UIPlayerInfo"),V.addClickEvent(this.node,h,"onBtnCloseClick","UIPlayerInfo"),V.addClickEvent(this.node,s,"onLookPlayerInfo","UIPlayerInfo"),V.addClickEvent(this.node,this.btnVideo,"onBtnVideoLvUpClick","UIPlayerInfo");case 57:case"end":return e.stop()}}),e,this)}))),function(e,t){return M.apply(this,arguments)})},{key:"onMovePlayer",value:function(e){this._isCanAutoMovePlayer=!1;var t=e.touch.getLocationX()-e.touch.getPreviousLocation().x;this.out.x=0,this.out.y=this.player.eulerAngles.y+t,this.out.z=0,this.player.eulerAngles=this.out}},{key:"onMoveEndPlayer",value:function(){this._isCanAutoMovePlayer=!0}},{key:"update",value:function(e){this._isCanAutoMovePlayer&&this.player&&(this.out.x=0,this.out.y=this.player.eulerAngles.y-10*e,this.out.z=0,this.player.eulerAngles=this.out)}},{key:"onUpPlayer",value:function(){this.onBtnLvUpClick()}},{key:"onDestroy",value:function(){u.getScene().off("onUpPlayer",this.onUpPlayer,this)}},{key:"initWeapon",value:(I=l(regeneratorRuntime.mark((function e(){var t,n,i,o,a,s,l,r,h,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=Math.floor(this.attType-1),n=O.instance.getPlayerInfoById(t),i=S[t],o=-1,a=0;a<=n.lv;a++)i[a].unlockWeapon&&(o=i[a].unlockWeapon);if(console.log("玩家",t,"解锁武器id",o),this.attType!=R.TOUDAN){e.next=22;break}return e.next=9,V.loadRes("prefabs/boomSmall",D);case 9:s=e.sent,l=k(s),this.leftHand.addChild(l),l.position=d.ZERO,l.eulerAngles=d.ZERO,l.scale=d.ONE,r=k(s),this.rightHand.addChild(r),r.position=d.ZERO,r.eulerAngles=d.ZERO,r.scale=d.ONE,e.next=30;break;case 22:return e.next=24,V.loadRes("prefabs/weapon/player"+t+"_weapon"+o,D);case 24:h=e.sent,c=k(h),this.rightHand.addChild(c),c.position=d.ZERO,c.eulerAngles=d.ZERO,c.scale=d.ONE;case 30:case"end":return e.stop()}}),e,this)}))),function(){return I.apply(this,arguments)})},{key:"refreshPlayerIcon",value:(h=l(regeneratorRuntime.mark((function e(){var t,n,i,o,a,s,l,r,h,d,p,g,u,C,v,f,I,B,N,D,k=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=k.length>0&&void 0!==k[0]&&k[0],n=this.infoNode.getChildByName("Icon").getComponent(y),i=this.infoNode.getChildByName("ProgressBar").getComponent(P),o=i.node.getChildByName("Label").getComponent(c),a=this.infoNode.getChildByName("Lv").getComponent(c),s=this.infoNode.getChildByName("Quality").getComponent(y),l=this.node.getChildByName("PlayerDesc").getChildByName("Desc").getComponent(c),r=this.infoNode.getChildByName("AttLabel").getComponent(c),h=this.infoNode.getChildByName("AttAddLabel").getComponent(c),d=this.infoNode.getChildByName("BloodLabel").getComponent(c),p=this.infoNode.getChildByName("BloodAddLabel").getComponent(c),g=E[this.playerID],u=O.instance.getPlayerInfoById(this.playerID),a.string=u?(u.lv+1).toString():"1",l.string=g.desc,O.instance.lv<g.unlockLv?(o.string=u.cardCount+"/"+g.lvupCount,a.string="",i.progress=0):u?(o.string=u.cardCount+"/"+g.lvupCount,i.progress=V.clampf(u.cardCount/g.lvupCount,0,1)):(o.string="0/"+g.lvupCount,i.progress=0),!t){e.next=21;break}return e.next=19,V.loadRes("textures/ui/quality"+g.quality,m);case 19:s.spriteFrame=e.sent,O.instance.setItemIcon(n,w.CARD,this.playerID);case 21:C=U[this.playerID],v=O.instance.getLvAddValueByID(C.id,0),f=1+O.instance.getAllAddValueByID(C.id,b.att)/100,I=O.instance.getLvAddValueByID(C.id,1),B=1+O.instance.getAllAddValueByID(C.id,b.blood)/100,N=(C.att+v)*f,D=(C.blood+I)*B,r.string=Math.floor(N).toString(),d.string=Math.floor(D).toString(),h.string="[+"+Math.floor(100*f)+"%]",p.string="[+"+Math.floor(100*B)+"%]";case 32:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"initRenderImage",value:function(){this.renderTex=new C;var e=this.renderImage.spriteFrame,t=new m;t.reset({originalSize:e.getOriginalSize(),rect:e.getRect(),offset:e.getOffset(),isRotate:e.isRotated(),borderTop:e.insetTop,borderLeft:e.insetLeft,borderBottom:e.insetBottom,borderRight:e.insetRight}),this.renderTex=new C,this.renderTex.reset({width:750,height:660,colorFormat:C.PixelFormat.RGBA8888,depthStencilFormat:C.DepthStencilFormat.DEPTH_24_STENCIL_8}),x.instance.playerCamera.targetTexture=this.renderTex,t.texture=this.renderTex,this.renderImage.spriteFrame=t}},{key:"initScrollview",value:(r=l(regeneratorRuntime.mark((function e(){var t,n,i,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.loadRes("prefabs/ui/PlayerInfoCell",D);case 2:t=e.sent,n=O.instance.getPlayerInfoById(this.playerID),i=S[this.playerID],o=0;case 6:if(!(o<i.length)){e.next=18;break}if(!(this&&this.node&&this.node.parent)){e.next=15;break}return a=k(t),this.scr.content.addChild(a),a.setPosition(0,120*-o,0),this.cells.push(a),this.refreshCellByData(a,i[o],o,n.lv),e.next=15,V.waitForSec(.05);case 15:o++,e.next=6;break;case 18:this&&this.node&&this.node.parent&&(this.scr.content.height=666+120*(i.length-5.5));case 19:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"refreshCells",value:function(){for(var e=O.instance.getPlayerInfoById(this.playerID),t=S[this.playerID],n=0;n<this.cells.length;n++)this.refreshCellByData(this.cells[n],t[n],n,e.lv);this.scr.scrollTo(new v(0,1-e.lv/45),.1)}},{key:"initEquipIcon",value:function(){for(var e=O.instance.getPlayerInfoById(this.playerID),t=O.instance.getEquipInfoByOwnerId(this.playerID),n=0;n<3;n++){var i=this.infoNode.getChildByName("Skill"+(n+1)),o=i.getChildByName("Label").getComponent(c),a=i.getChildByName("BG").getComponent(f),s=i.getChildByName("Icon").getComponent(y),l=i.getChildByName("Sprite");s.node.active=!0,0==e.weaponLv[n]?(l.active=!1,o.node.active=!1,s.color=new p(255,255,255,100)):(l.active=!0,s.color=new p(255,255,255,255),o.string="Lv"+e.weaponLv[n]),O.instance.setItemIcon(s,w.EQUIP,t[n].id),V.addClickEvent(this.node,a,"onLookSkillInfo","UIPlayerInfo",""+n)}}},{key:"initSkillDesc",value:function(){for(var e=E[this.playerID],t=O.instance.getEquipInfoByOwnerId(this.playerID),n=1;n<=3;n++){var i=t[n-1],o=O.instance.getPlayerInfoById(this.playerID).weaponLv[n-1],a=this.node.getChildByName("Skill"+n+"Desc"),s=a.getChildByName("Title").getComponent(c);if(3==n){var l=a.getChildByName("Desc").getComponent(c),r=a.getChildByName("Desc1").getComponent(c),h=a.getChildByName("Desc2").getComponent(c),d=a.getChildByName("Desc3").getComponent(c);l.string=e.skillDesc;for(var y=[],p=0;p<i.addType.length;p++){var g=i.addType[p];y.indexOf(g)<0&&y.push(g)}if(1==y.length){var u=y[0],C=O.instance.getAllAddValueByID(this.playerID,u,2);h.string=u<7?L[u]+" +"+C+"%":L[u]+" "+C}else if(2==y.length){var m=y[0],v=y[1],f=O.instance.getAllAddValueByID(this.playerID,m,2),I=O.instance.getAllAddValueByID(this.playerID,v,2);r.string=m<7?L[m]+" +"+f+"%":L[m]+" "+f,d.string=v<7?L[v]+" +"+I+"%":L[v]+" "+I}}s.string=i.name;for(var B=1;B<=10;B++){var N=a.getChildByName("Cell"+B),D=N.getChildByName("Lv").getComponent(c),k=N.getChildByName("Value").getComponent(c),T=N.getChildByName("High");D.string="Lv"+B,T.active=o>=B,i.addType[B-1]<7?k.string="+"+i.addValue[B-1]+"%":k.string="+"+i.addValue[B-1];for(var P=1;P<=9;P++){var S=N.getChildByName("Icon"+P);S&&(S.active=i.addType[B-1]==P)}}}}},{key:"onLookPlayerInfo",value:function(){V.playSound(A.BUTTON),this.node.getChildByName("PlayerDesc").active=!0,this.cheatCardCount()}},{key:"onLookSkillInfo",value:function(e,t){V.playSound(A.BUTTON);var n=parseInt(t);this.node.getChildByName("Skill"+(n+1)+"Desc").active=!0}},{key:"onBtnVideoLvUpClick",value:function(){V.playSound(A.BUTTON);var e=function(){var e=O.instance.getPlayerInfoById(this.playerID);e.lv<S[this.playerID].length-1&&(e.lv++,localStorage.setItem("playerInfo",JSON.stringify(O.instance.playerInfo)),V.ShowTip("update successfully"),this.refreshCells(),this.refreshPlayerIcon(),O.instance.addAchieveCount(this.playerID+13,1,!0),O.instance.addTaskCount(this.playerID+3,1,!0),V.playSound(A.LVUP),this.resetBtnVideoShowTimes()),V.reportAnalytics("观看视频_角色升级_完成")}.bind(this);_.showVideoAd(e)}},{key:"onBtnLvUpClick",value:function(){V.playSound(A.BUTTON);var e=O.instance.getPlayerInfoById(this.playerID),t=E[e.id];e.lv>=S[this.playerID].length-1?V.ShowTip("Max Level"):O.instance.gold>=t.lvupGold?e.cardCount>=t.lvupCount?(e.cardCount-=t.lvupCount,O.instance.gold-=t.lvupGold,e.lv++,localStorage.setItem("playerInfo",JSON.stringify(O.instance.playerInfo)),V.ShowTip("update successfully"),this.refreshCells(),this.refreshPlayerIcon(),O.instance.addAchieveCount(this.playerID+13,1,!0),O.instance.addTaskCount(this.playerID+3,1,!0),V.playSound(A.LVUP),O.instance.isWhiteUser()&&e.lv<S[this.playerID].length-1&&(this.videoBtnShowTimes++,this.videoBtnShowTimes>=this.videoBtnShowLimit&&(this.resetBtnVideoShowTimes(),this.btnVideo.node.active=!0))):O.instance.guideID<14?V.ShowTip("Card is not enough"):x.instance.showBuzu(w.CARD,this.onBtnCloseClick.bind(this)):O.instance.guideID<14?V.ShowTip("Coin is not enough"):x.instance.showBuzu(w.GOLD,this.onBtnCloseClick.bind(this))}},{key:"closeDescNode",value:function(e){e.currentTarget.active=!1}},{key:"onBtnCloseClick",value:function(){V.playSound(A.BUTTON),this.closeEvent&&this.closeEvent(),this.player&&(this.player.removeFromParent(),this.player.destroy()),this.node.removeFromParent(),this.node.destroy(),V.showBanner(!1)}},{key:"resetBtnVideoShowTimes",value:function(){this.videoBtnShowTimes=0,this.videoBtnShowLimit=V.getRandomInt(2,3),this.btnVideo.node.active=!1}},{key:"cheatCardCount",value:function(){}}]),t}(I))||H)),r._RF.pop()}}}));

System.register("chunks:///UIJiaoSe.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./UIMain.js","./DataManager.js","./Tools.js","./UIPlayerInfo.js"],(function(e,t){var n,o,r,i,a,s,l,c,u,h,p,d,C,g,f,y,v,m,k,I,B,S,P,U,N,w,x;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){n=e.inherits,o=e.classCallCheck,r=e.possibleConstructorReturn,i=e.getPrototypeOf,a=e.createClass,s=e.asyncToGenerator},function(e){l=e.cclegacy,c=e._decorator,u=e.director,h=e.Component,p=e.ButtonComponent,d=e.SpriteComponent,C=e.ProgressBarComponent,g=e.LabelComponent,f=e.SpriteFrame,y=e.Texture2D,v=e.Prefab,m=e.instantiate},function(e){k=e.SOUND_TYPE,I=e.PLAYER_INFO},function(e){B=e.UIMain},function(e){S=e.default},function(e){P=e.Tools},function(e){U=e.UIPlayerInfo}],execute:function(){l._RF.push({},"9c18df6YoZJqLGDoH8tsBBk","UIJiaoSe",void 0),x=c.ccclass,c.property,e("UIJiaoSe",(N=x("UIJiaoSe"),N(w=function(e){function t(){var e,n;o(this,t);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return(n=r(this,(e=i(t)).call.apply(e,[this].concat(s)))).loadOK=!1,n}var l,c;return n(t,e),a(t,[{key:"onLoad",value:function(){u.getScene().on("refreshJiaoSe",this.refreshJiaoSe,this),u.getScene().on("onGoInPlayerInfo",this.onGoInPlayerInfo,this),this.top=this.node.getChildByName("Top"),this.top.setPosition(0,cc.winSize.height/2,0),this.refreshCells(!0),this.loadOK=!0}},{key:"refreshJiaoSe",value:function(){this&&this.loadOK&&this.refreshCells(!1)}},{key:"onGoInPlayerInfo",value:function(){this.onBtnCellClick(null,"0")}},{key:"refreshCells",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=1;t<=12;t++){var n=this.top.getChildByName("Cell"+t);this.initCell(n,t-1,e)}}},{key:"initCell",value:(c=s(regeneratorRuntime.mark((function e(t,n){var o,r,i,a,s,l,c,u,h,v,m,k,B,U,N=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=N.length>2&&void 0!==N[2]&&N[2],r=I[n],i=S.instance.getPlayerInfoById(n),a=t.getChildByName("BG").getComponent(p),s=t.getChildByName("Icon").getComponent(d),l=t.getChildByName("ProgressBar").getComponent(C),c=l.node.getChildByName("Label").getComponent(g),u=t.getChildByName("Lv").getComponent(g),h=t.getChildByName("Lock"),v=h.getChildByName("Label").getComponent(g),m=t.getChildByName("Quality").getComponent(d),k=t.getChildByName("reddot"),i.cardCount>=r.lvupCount&&S.instance.isUnlockPlayer(r.id)?k.active=!0:k.active=!1,u.string=i?(i.lv+1).toString():"1",v.string=(r.unlockLv+1).toString(),h.active=!S.instance.isUnlockPlayer(n),h.active?(c.string=i.cardCount+"/"+r.lvupCount,u.string="",l.progress=0):i?(c.string=i.cardCount+"/"+r.lvupCount,l.progress=P.clampf(i.cardCount/r.lvupCount,0,1)):(c.string="0/"+r.lvupCount,l.progress=0),e.next=19,P.loadRes("textures/ui/quality"+r.quality,f);case 19:return m.spriteFrame=e.sent,e.next=22,P.loadRes("icons/player/playericon"+(n+1),y);case 22:B=e.sent,(U=new f).texture=B,s.spriteFrame=U,s.node.width=s.node.height=200,o&&P.addClickEvent(this.node,a,"onBtnCellClick","UIJiaoSe",n.toString());case 28:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"onBtnCellClick",value:(l=s(regeneratorRuntime.mark((function e(t,n){var o,r,i,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P.playSound(k.BUTTON),o=parseInt(n),!S.instance.isUnlockPlayer(o)){e.next=13;break}return r=function(){this.refreshCells()}.bind(this),e.next=6,P.loadRes("prefabs/ui/UIPlayerInfo",v);case 6:i=e.sent,a=m(i),B.instance.uiTopNode.addChild(a),a.getComponent(U).initUI(o,r),e.next=15;break;case 13:s=I[o],o<6?P.ShowTip("Level "+Math.floor(s.unlockLv+1)+" unlock"):P.ShowTip("Please look forward to");case 15:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})}]),t}(h))||w)),l._RF.pop()}}}));

System.register("chunks:///UIKongTou.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./AdsMgr.js","./UIMain.js","./DataManager.js","./Tools.js"],(function(e,t){var i,n,o,r,s,a,c,d,u,l,h,p,f,y,g,w,v,b,T,m,I,_,M,U,C,S,k,B,P,R,j;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inherits,o=e.classCallCheck,r=e.possibleConstructorReturn,s=e.getPrototypeOf,a=e.initializerDefineProperty,c=e.assertThisInitialized,d=e.createClass},function(e){u=e.cclegacy,l=e._decorator,h=e.SpriteComponent,p=e.LabelComponent,f=e.director,y=e.Texture2D,g=e.Component},function(e){w=e.ITEMTYPE,v=e.EQUIP_INFO,b=e.SOUND_TYPE},function(e){T=e.default},function(e){m=e.UIMain},function(e){I=e.default},function(e){_=e.Tools}],execute:function(){u._RF.push({},"e7fcc4qMuhBeLdZeaM6Unim","UIKongTou",void 0),R=l.ccclass,j=l.property,e("UIKongTou",(M=R("UIKongTou"),U=j(h),C=j(p),M((B=i((k=function(e){function t(){var e,i;o(this,t);for(var n=arguments.length,d=new Array(n),u=0;u<n;u++)d[u]=arguments[u];return i=r(this,(e=s(t)).call.apply(e,[this].concat(d))),a(i,"icon",B,c(i)),a(i,"countLabel",P,c(i)),i.reward=null,i}return n(t,e),d(t,[{key:"onLoad",value:function(){var e=this.node.getChildByName("BG");e.width=f.getWinSize().width,e.height=f.getWinSize().height,Math.random()>.5?(this.reward={type:w.CARD,id:_.getRandomInt(0,5),count:2},this.countLabel.string="Hero card +"+this.reward.count,_.setImage(this.icon,"icons/player/playericon"+(this.reward.id+1),y)):(this.reward={type:w.EQUIP,id:_.getRandomInt(1,v.length),count:1},this.countLabel.string="Eqiup card +"+this.reward.count,_.setImage(this.icon,"icons/equip/equip"+this.reward.id,y))}},{key:"onBtnVideoClick",value:function(){_.playSound(b.BUTTON);var e=function(){I.instance.sendReward(this.reward.type,this.reward.id,this.reward.count),_.ShowTip("Get the airdrop bonus"),m.instance.btnKongTou.node.active=!1,this.destroyMine()}.bind(this);T.showVideoAd(e)}},{key:"onBtnNoClick",value:function(){if(_.playSound(b.BUTTON),I.instance.isWhiteUser()){var e=function(){I.instance.sendReward(this.reward.type,this.reward.id,this.reward.count),_.ShowTip("Get the airdrop bonus"),m.instance.btnKongTou.node.active=!1,this.destroyMine()}.bind(this);(function(){this.destroyMine()}).bind(this);T.showVideoAd(e)}else this.destroyMine()}},{key:"destroyMine",value:function(){this.node.removeFromParent(),this.node.destroy()}}]),t}(g)).prototype,"icon",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=i(k.prototype,"countLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=k))||S)),u._RF.pop()}}}));

System.register("chunks:///UILvReward.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./UIMain.js","./DataManager.js","./Tools.js"],(function(e,t){var n,i,s,r,o,a,l,c,h,d,p,v,g,u,C,m,f,w,y,B,I,N,R,T,L,D,b,k;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){n=e.inherits,i=e.classCallCheck,s=e.possibleConstructorReturn,r=e.getPrototypeOf,o=e.createClass,a=e.asyncToGenerator},function(e){l=e.cclegacy,c=e._decorator,h=e.Vec3,d=e.LabelComponent,p=e.SpriteComponent,v=e.UITransformComponent,g=e.Component,u=e.ScrollViewComponent,C=e.MaskComponent,m=e.ButtonComponent,f=e.Prefab,w=e.tween,y=e.instantiate},function(e){B=e.ITEMTYPE,I=e.SOUND_TYPE,N=e.LV_REWARD},function(e){R=e.UIMain},function(e){T=e.default},function(e){L=e.Tools}],execute:function(){l._RF.push({},"57e61JdR65EZq3K3K4oJAlM","UILvReward",void 0),k=c.ccclass,c.property,e("UILvReward",(D=k("UILvReward"),D(b=function(e){function t(){var e,n;i(this,t);for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return(n=s(this,(e=r(t)).call.apply(e,[this].concat(a)))).cells=[],n}var l,c;return n(t,e),o(t,[{key:"start",value:(c=a(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this.node.getChildByName("Top")).setPosition(0,cc.winSize.height/2,0),this.scr=t.getChildByName("ScrollView").getComponent(u),this.scr.view.getComponent(C).inverted=!1,this.progressBg=this.scr.content.getChildByName("ProgressBG"),this.progress=this.progressBg.getChildByName("Sprite"),this.lvNode=t.getChildByName("Lv"),this.lvBg=this.scr.content.getChildByName("LvBg"),n=this.lvNode.getChildByName("LvLabel").getComponent(d),this.btnClose=this.lvNode.getChildByName("BtnClose").getComponent(m),n.string="Lv  "+(T.instance.lv+1),L.addClickEvent(this.node,this.btnClose,"onBtnClose","UILvReward"),e.next=15,L.loadRes("prefabs/ui/LvCell",f);case 15:this.cellPrefab=e.sent,this.initUI();case 17:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"initUI",value:(l=a(regeneratorRuntime.mark((function e(){var t,n,i,s,r,o,a,l,c,h,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=0,n=200*(4*N.length-4)+1300,i=cc.winSize.width/cc.winSize.height-.5622,this.scr.content.height=n+3e3*i,w(this.lvBg).to(2,{height:n+3e3*i-200}).start(),this.progressBg.height=n+3e3*i-240,s=N[T.instance.lv].exp,r=T.instance.exp/s,o=800*r,a=80+4*T.instance.lv*200+o,a=L.clampf(a,0,this.progressBg.height-10),this.progress.height=a,l=0;l<3;l++)for(c=0;c<4;c++)this&&this.node&&this.node.parent&&(h=y(this.cellPrefab),d=h.getComponent(m),this.scr.content.addChild(h),h.setPosition(40,-100-200*t,0),L.addClickEvent(this.node,d,"onBtnCellClick","UILvReward"),t++,h.name=l+","+c,this.cells.push(h),this.refreshCellInfo(h));this.schedule(this.updateCellsPos);case 14:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"updateCellsPos",value:function(){for(var e=0;e<this.cells.length;e++){if(this.cells[e].position.y+this.scr.getScrollOffset().y>100){var t=this.cells.splice(e,1)[0];t.position=new h(40,t.position.y-2400,0);var n=this.cells[this.cells.length-1],i=L.splitToNumber(n.name,","),s=i[0],r=i[1];return 3==r?(s++,r=0):r++,t.name=s+","+r,this.cells.push(t),void this.refreshCellInfo(t)}if(this.cells[e].position.y+this.scr.getScrollOffset().y<-2300){var o=this.cells.splice(e,1)[0];o.position=new h(40,o.position.y+2400,0);var a=this.cells[0],l=L.splitToNumber(a.name,","),c=l[0],d=l[1];return 0==d?(c--,d=3):d--,o.name=c+","+d,this.cells.unshift(o),void this.refreshCellInfo(o)}}}},{key:"refreshCellInfo",value:function(e){var t=e.name,n=L.splitToNumber(t,","),i=n[0],s=n[1],r=N[i];if(r){e.active=!0;var o=e.getChildByName("LvLabel").getComponent(d),a=e.getChildByName("Progress").getComponent(d),l=e.getChildByName("Icon").getComponent(p),c=e.getChildByName("Desc").getComponent(d),h=e.getChildByName("Can"),v=e.getChildByName("Done");o.node.active=0==s,a.node.active=0!=s,T.instance.isGetLvRewardDone(i,s)?(v.active=!0,h.active=!1):T.instance.canGetLvReward(i,s)?(v.active=!1,h.active=!0):(v.active=!1,h.active=!1),o.string="Lv"+(r.lv+1),a.string=25*s+"%",T.instance.setItemIcon(l,r.rewardType[s],r.rewardID[s]),r.rewardType[s]==B.GOLD||r.rewardType[s]==B.DIAMOND?c.string="Get "+r.rewardCount[s]+T.instance.getItemName(r.rewardType[s],r.rewardID[s]):c.string="Get "+T.instance.getItemName(r.rewardType[s],r.rewardID[s])}else e.active=!1}},{key:"onBtnCellClick",value:function(e){var t=e.currentTarget,n=t.getChildByName("Can"),i=t.getChildByName("Done"),s=L.splitToNumber(t.name,","),r=s[0],o=s[1];if(T.instance.isGetLvRewardDone(r,o));else if(T.instance.canGetLvReward(r,o)){var a=N[r],l=a.rewardType[o]==B.CARD;if(T.instance.sendReward(a.rewardType[o],a.rewardID[o],a.rewardCount[o]),R.instance.showReward(a.rewardType[o],a.rewardID[o],a.rewardCount[o],l),T.instance.setLvRewardDone(r,o),e){var c=e.currentTarget.getComponent(v).convertToWorldSpaceAR(h.ZERO);c.x-=cc.winSize.width/2,c.y-=cc.winSize.height/2,R.instance.showMoneyAnim(c,a.rewardType[o],a.rewardID[o],a.rewardCount[o])}n.active=!1,i.active=!0}}},{key:"onBtnClose",value:function(){L.playSound(I.BUTTON),this.closeEvent&&this.closeEvent(),this.node.active=!1}}]),t}(g))||b)),l._RF.pop()}}}));

System.register("chunks:///UIPause.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./DataManager.js","./Tools.js","./GameManager.js"],(function(e,t){var n,o,i,a,s,c,l,r,u,h,d,m,C,g,f,v,B,p,y,k;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){n=e.inherits,o=e.classCallCheck,i=e.possibleConstructorReturn,a=e.getPrototypeOf,s=e.createClass},function(e){c=e.cclegacy,l=e._decorator,r=e.ButtonComponent,u=e.LabelComponent,h=e.Color,d=e.director,m=e.Component},function(e){C=e.TASK_REWARD,g=e.SOUND_TYPE},function(e){f=e.default},function(e){v=e.Tools},function(e){B=e.GameManager}],execute:function(){c._RF.push({},"60c867jMCZBKp6GwRVBOozc","UIPause",void 0),k=l.ccclass,l.property,e("UIPause",(p=k("UIPause"),p(y=function(e){function t(){var e,n;o(this,t);for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];return(n=i(this,(e=a(t)).call.apply(e,[this].concat(c)))).taskCells=[],n}return n(t,e),s(t,[{key:"start",value:function(){var e=this.node.getChildByName("BG");e.width=cc.winSize.width,e.height=cc.winSize.height;for(var t=this.node.getChildByName("BG2"),n=1;n<=5;n++){var o=t.getChildByName("Task"+n);this.taskCells.push(o)}var i=this.node.getChildByName("BtnHome").getComponent(r),a=this.node.getChildByName("BtnResume").getComponent(r);v.addClickEvent(this.node,i,"onBtnHomeClick","UIPause"),v.addClickEvent(this.node,a,"onBtnResumeClick","UIPause"),this.initTaskInfo(),v.showBanner(!0)}},{key:"initTaskInfo",value:function(){for(var e=0;e<this.taskCells.length;e++){var t=this.taskCells[e],n=t.getChildByName("Desc").getComponent(u),o=t.getChildByName("Count").getComponent(u),i=t.getChildByName("Done"),a=f.instance.taskInfo[e],s=C[a.id];n.string=s.desc+s.limit+s.timesDesc,o.string="["+a.count+"/"+s.limit+"]",i.active=a.count>=s.limit,o.node.active=a.count<s.limit,n.color=a.count>=s.limit?new h(0,255,0,255):new h(255,255,255,255)}}},{key:"onBtnHomeClick",value:function(){v.playSound(g.BUTTON),localStorage.setItem("taskInfo",JSON.stringify(f.instance.taskInfo)),localStorage.setItem("achieveInfo",JSON.stringify(f.instance.achieveInfo)),v.showBanner(!1),d.loadScene("Main")}},{key:"onBtnResumeClick",value:function(){v.playSound(g.BUTTON),B.instance.isPauseGame=!1,this.node.removeFromParent(),this.node.destroy(),v.showBanner(!1)}}]),t}(m))||y)),c._RF.pop()}}}));

System.register("chunks:///UIReborn.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./AdsMgr.js","./DataManager.js","./Tools.js","./GameManager.js"],(function(e,t){var i,n,s,o,a,r,c,l,h,d,u,m,C,f,g,p,k,v,y,T,B;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){i=e.inherits,n=e.classCallCheck,s=e.possibleConstructorReturn,o=e.getPrototypeOf,a=e.createClass},function(e){r=e.cclegacy,c=e._decorator,l=e.director,h=e.ButtonComponent,d=e.LabelComponent,u=e.Color,m=e.Component},function(e){C=e.TASK_REWARD,f=e.SOUND_TYPE},function(e){g=e.default},function(e){p=e.default},function(e){k=e.Tools},function(e){v=e.GameManager}],execute:function(){r._RF.push({},"a3435rQWvFMfrulx0lk9xyR","UIReborn",void 0),B=c.ccclass,c.property,e("UIReborn",(y=B("UIReborn"),y(T=function(e){function t(){var e,i;n(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(i=s(this,(e=o(t)).call.apply(e,[this].concat(r)))).taskCells=[],i.pauseTime=!1,i.tikTime=8,i.isDead=!1,i.isRebornSuccess=!1,i}return i(t,e),a(t,[{key:"start",value:function(){var e=this.node.getChildByName("BG");e.width=l.getWinSize().width,e.height=l.getWinSize().height;for(var t=this.node.getChildByName("Task"),i=1;i<=5;i++){var n=t.getChildByName("Task"+i);this.taskCells.push(n)}this.initTaskInfo();var s=this.node.getChildByName("BtnReborn").getComponent(h);this.timeLabel=s.node.getChildByName("Time").getComponent(d);var o=this.node.getChildByName("BtnCancel").getComponent(h);k.addClickEvent(this.node,s,"onBtnRebornClick","UIReborn"),k.addClickEvent(this.node,o,"onBtnCancelClick","UIReborn"),this.schedule(this.updateTime,1),this.scheduleOnce((function(){o&&(o.node.active=!0)}),2),k.showBanner(!0)}},{key:"initTaskInfo",value:function(){for(var e=0;e<this.taskCells.length;e++){var t=this.taskCells[e],i=t.getChildByName("Desc").getComponent(d),n=t.getChildByName("Count").getComponent(d),s=t.getChildByName("Done"),o=p.instance.taskInfo[e],a=C[o.id];i.string=a.desc+a.limit+a.timesDesc,n.string="["+o.count+"/"+a.limit+"]",s.active=o.count>=a.limit,n.node.active=o.count<a.limit,i.color=o.count>=a.limit?new u(0,255,0,255):new u(255,255,255,255)}}},{key:"updateTime",value:function(){this.pauseTime||(this.tikTime=k.clampf(this.tikTime-1,0,100),this.timeLabel.string=Math.floor(this.tikTime).toString(),!this.isDead&&this.tikTime<=0&&this.dead())}},{key:"onBtnRebornClick",value:function(){k.playSound(f.BUTTON),this.pauseTime=!0;var e=function(){this.isRebornSuccess=!0,this.dead(),k.reportAnalytics("观看视频_复活_完成")}.bind(this);(function(){this.pauseTime=!1}).bind(this);g.showVideoAd(e)}},{key:"onBtnCancelClick",value:function(){k.playSound(f.BUTTON),this.isRebornSuccess=!1,this.dead(),g.showInterAd()}},{key:"dead",value:function(){this.isDead||(this.isDead=!0,this.node.removeFromParent(),this.node.destroy(),k.showBanner(!1),v.instance.reborn(this.isRebornSuccess))}}]),t}(m))||T)),r._RF.pop()}}}));

System.register("chunks:///UIShop.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./AdsMgr.js","./UIMain.js","./DataManager.js","./Tools.js"],(function(e,t){var n,i,o,a,s,c,r,l,h,d,p,m,C,g,u,y,v,f,B,S,T,w,N,I,R,D,k,O,_;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){n=e.inherits,i=e.classCallCheck,o=e.possibleConstructorReturn,a=e.getPrototypeOf,s=e.createClass},function(e){c=e.cclegacy,r=e._decorator,l=e.director,h=e.ScrollViewComponent,d=e.MaskComponent,p=e.ButtonComponent,m=e.LabelComponent,C=e.SpriteComponent,g=e.UITransformComponent,u=e.Vec3,y=e.Component},function(e){v=e.SHOP_FREE_TIME_LIMIT,f=e.SOUND_TYPE,B=e.SHOP_FREE_REWARD,S=e.ITEMTYPE,T=e.SHOP_DAY_TIME,w=e.SHOP_GOLD_PRICE},function(e){N=e.default},function(e){I=e.UIMain},function(e){R=e.default},function(e){D=e.Tools}],execute:function(){c._RF.push({},"d2637YcrqBG37P7Ezmy6YWM","UIShop",void 0),_=r.ccclass,r.property,e("UIShop",(k=_("UIShop"),k(O=function(e){function t(){var e,n;i(this,t);for(var s=arguments.length,c=new Array(s),r=0;r<s;r++)c[r]=arguments[r];return(n=o(this,(e=a(t)).call.apply(e,[this].concat(c)))).dayCells=[],n.loadOK=!1,n}return n(t,e),s(t,[{key:"start",value:function(){l.getScene().on("refreshShop",this.refreshShop,this),this.scr=this.node.getChildByName("ScrollView").getComponent(h),this.scr.node.height=cc.winSize.height,this.scr.view.height=cc.winSize.height,this.scr.content.setPosition(0,cc.winSize.height/2,0),this.scr.view.getComponent(d).inverted=!1;for(var e=this.scr.content.getChildByName("Cell2").getChildByName("BoxNode"),t=1;t<=4;t++){var n=e.getChildByName("Box"+t),i=n.getComponent(p);D.addClickEvent(this.node,i,"onBtnDayRewardClick","UIShop",""+t),this.dayCells.push(n)}this.initGoldShop(),this.initFreeCell(!0),this.updateDayReward(!0),this.schedule(this.updateDayReward,1),this.loadOK=!0}},{key:"refreshShop",value:function(){this&&this.loadOK&&this.initFreeCell(!1)}},{key:"initFreeCell",value:function(e){for(var t=this.scr.content.getChildByName("Cell1"),n=t.getChildByName("Button").getComponent(p),i=n.node.getChildByName("reddot"),o=1;o<=3;o++){var a=t.getChildByName("Count"+o).getComponent(m),s=B[o-1];a.string=s.count.toString()}this.freeTimesLabel=t.getChildByName("Times").getComponent(m),this.refreshFreeTimesLabel(),e&&D.addClickEvent(this.node,n,"onBtnVideoClick","UIShop"),i.active=R.instance.shopFreeBoxGetTimes<v}},{key:"refreshFreeTimesLabel",value:function(){this.freeTimesLabel.string=Math.floor(v-R.instance.shopFreeBoxGetTimes).toString()}},{key:"updateDayReward",value:function(e){for(var t=0;t<this.dayCells.length;t++){var n=R.instance.shopDayReward[t],i=this.dayCells[t].getChildByName("Icon").getComponent(C),o=this.dayCells[t].getChildByName("Count").getComponent(m),a=this.dayCells[t].getChildByName("Time").getComponent(m),s=this.dayCells[t].getChildByName("High").getComponent(C),c=this.dayCells[t].getChildByName("Done"),r=this.dayCells[t].getChildByName("reddot");e&&R.instance.setItemIcon(i,n.type,n.id),o.string=""+n.count;var l=(new Date).valueOf(),h=1e3*T[t],d=Math.floor(h-(l-R.instance.gameInTime)),p=D.clampf(d/1e3,0,h);a.string=D.timestampToTime(p),a.node.active=p>0,c.active=1==n.isDone,1==n.isDone?(s.node.active=!1,r.active=!1):p<=0?(s.node.active=!0,r.active=!0):(s.node.active=!1,r.active=!1)}}},{key:"initGoldShop",value:function(){for(var e=this.scr.content.getChildByName("Cell3").getChildByName("BoxNode"),t=1;t<=4;t++){var n=w[t-1],i=e.getChildByName("Box"+t),o=i.getChildByName("BtnDiamond").getComponent(p);D.addClickEvent(this.node,o,"onBtnBuyGoldClick","UIShop",""+t);var a=i.getChildByName("Icon").getComponent(C),s=i.getChildByName("Count").getComponent(m),c=o.node.getChildByName("Count").getComponent(m);R.instance.setItemIcon(a,n.type,n.id),s.string=n.count.toString(),c.string=n.price.toString()}}},{key:"onBtnVideoClick",value:function(){if(D.playSound(f.BUTTON),R.instance.shopFreeBoxGetTimes<v){var e=function(){for(var e=[],t=this.scr.content.getChildByName("Cell1"),n=1;n<=3;n++){var i=t.getChildByName("Count"+n).getComponent(g).convertToWorldSpaceAR(u.ZERO);i.x-=cc.winSize.width/2,i.y-=cc.winSize.height/2,e.push(i)}for(var o=0;o<B.length;o++){var a=B[o];R.instance.sendReward(a.type,a.id,a.count),I.instance.showMoneyAnim(e[o],a.type,a.id,a.count)}R.instance.shopFreeBoxGetTimes++,localStorage.setItem("shopFreeBoxGetTimes",R.instance.shopFreeBoxGetTimes.toString()),this.refreshFreeTimesLabel(),D.ShowTip("Get a reward"),D.reportAnalytics("观看视频_免费礼包_完成")}.bind(this);N.showVideoAd(e)}else D.ShowTip("Unable to collect again")}},{key:"onBtnDayRewardClick",value:function(e,t){D.playSound(f.BUTTON);var n=parseInt(t)-1,i=R.instance.shopDayReward[n],o=(new Date).valueOf(),a=1e3*T[n],s=Math.floor(a-(o-R.instance.gameInTime)),c=D.clampf(s/1e3,0,a);if(1==i.isDone)D.ShowTip("All awards have been claimed");else if(c<=0&&(R.instance.sendReward(i.type,i.id,i.count),D.ShowTip("Receive successfully"),i.isDone=1,localStorage.setItem("shopDayReward",JSON.stringify(R.instance.shopDayReward)),this.updateDayReward(!1),R.instance.addTaskCount(18,1,!0),e)){var r=e.currentTarget.getComponent(g).convertToWorldSpaceAR(u.ZERO);r.x-=cc.winSize.width/2,r.y-=cc.winSize.height/2,I.instance.showMoneyAnim(r,i.type,i.id,i.count)}}},{key:"onBtnBuyGoldClick",value:function(e,t){D.playSound(f.BUTTON);var n=parseInt(t)-1,i=w[n];if(R.instance.diamond>=i.price){if(R.instance.diamond-=i.price,R.instance.gold+=i.count,e){var o=e.currentTarget.getComponent(g).convertToWorldSpaceAR(u.ZERO);o.x-=cc.winSize.width/2,o.y-=cc.winSize.height/2,I.instance.showMoneyAnim(o,S.GOLD,0,i.count)}}else D.ShowTip("Not enough diamond")}}]),t}(y))||O)),c._RF.pop()}}}));

System.register("chunks:///UISign.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./AdsMgr.js","./UIReward.js","./UIMain.js","./DataManager.js","./Tools.js"],(function(e,t){var n,i,a,o,s,c,r,l,d,h,g,u,v,f,C,y,p,m,B,I,w,b,k,S;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){n=e.inherits,i=e.classCallCheck,a=e.possibleConstructorReturn,o=e.getPrototypeOf,s=e.createClass,c=e.asyncToGenerator},function(e){r=e.cclegacy,l=e._decorator,d=e.ButtonComponent,h=e.LabelComponent,g=e.SpriteComponent,u=e.Component,v=e.Prefab,f=e.instantiate},function(e){C=e.SOUND_TYPE,y=e.SIGN_INFO},function(e){p=e.default},function(e){m=e.UIReward},function(e){B=e.UIMain},function(e){I=e.default},function(e){w=e.Tools}],execute:function(){r._RF.push({},"07e10+27KBKOaLsfI/YphdS","UISign",void 0),S=l.ccclass,l.property,e("UISign",(b=S("UISign"),b(k=function(e){function t(){var e,n;i(this,t);for(var s=arguments.length,c=new Array(s),r=0;r<s;r++)c[r]=arguments[r];return(n=a(this,(e=o(t)).call.apply(e,[this].concat(c)))).cells=[],n}var r;return n(t,e),s(t,[{key:"start",value:function(){var e=this.node.getChildByName("Center"),t=e.getChildByName("BtnClose").getComponent(d);this.btnGet=e.getChildByName("BtnGet").getComponent(d),this.btnVideo=e.getChildByName("BtnVideo").getComponent(d),this.doneLabel=e.getChildByName("Done").getComponent(h),w.addClickEvent(this.node,t,"onBtnCloseClick","UISign"),w.addClickEvent(this.node,this.btnGet,"onBtnGetClick","UISign"),w.addClickEvent(this.node,this.btnVideo,"onBtnVideoClick","UISign");for(var n=0;n<7;n++){var i=e.getChildByName("Cell"+n);this.cells.push(i)}this.refreshCell(!0),w.showBanner(!0)}},{key:"refreshCell",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(new Date).getDate(),i=I.instance.signDay,a=I.instance.signGetInfo;n==i||a.length>=7?(this.btnGet.node.active=!1,this.btnVideo.node.active=!1,this.doneLabel.node.active=!0,this.doneLabel.string=a.length>=7?"All awards have been claimed":"Received today"):(t?this.scheduleOnce((function(){e.btnGet.node.active=!0}),2):this.btnGet.node.active=!0,this.btnVideo.node.active=!0,this.doneLabel.node.active=!1);for(var o=0;o<this.cells.length;o++){var s=this.cells[o];this.initCellByInfo(s,o)}}},{key:"initCellByInfo",value:function(e,t){var n=(new Date).getDate(),i=I.instance.signDay,a=I.instance.signGetInfo,o=y[t],s=e.getChildByName("BG2"),c=e.getChildByName("BG3"),r=e.getChildByName("Icon").getComponent(g),l=e.getChildByName("Count").getComponent(h),d=e.getChildByName("Done");I.instance.setItemIcon(r,o.reward[0].type,o.reward[0].id),l.string="x"+o.reward[0].count,t<a.length?(s.active=!1,c.active=!0,d.active=!0):t==a.length?(s.active=n!=i,d.active=!1,c.active=!1):(s.active=!1,c.active=!1,d.active=!1)}},{key:"onBtnCloseClick",value:function(){this.destroyMine()}},{key:"onBtnVideoClick",value:function(){w.playSound(C.BUTTON);var e=function(){this.getReward(!0),w.reportAnalytics("观看视频_签到_完成")}.bind(this);p.showVideoAd(e)}},{key:"onBtnGetClick",value:function(){w.playSound(C.BUTTON),this.getReward(!1)}},{key:"getReward",value:(r=c(regeneratorRuntime.mark((function e(t){var n,i,a,o,s,c,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(new Date).getDate(),i=I.instance.signDay,a=I.instance.signGetInfo,!(n!=i&&a.length<7)){e.next=22;break}return o=y[a.length].reward[0],t&&(o.count=o.count+o.count),I.instance.sendReward(o.type,o.id,o.count),s={day:n,index:a.length},I.instance.signDay=n,localStorage.setItem("signDay",n.toString()),I.instance.signGetInfo.push(s),localStorage.setItem("signGetInfo",JSON.stringify(I.instance.signGetInfo)),this.refreshCell(),e.next=15,w.loadRes("prefabs/ui/UIReward",v);case 15:c=e.sent,r=f(c),B.instance.uiTopNode.addChild(r),r.getComponent(m).init(o.type,o.id,o.count),e.next=23;break;case 22:a.length>=7?w.ShowTip("All awards have been claimed"):w.ShowTip("Received today");case 23:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"destroyMine",value:function(){this.node.removeFromParent(),this.node.destroy(),w.showBanner(!1)}}]),t}(u))||k)),r._RF.pop()}}}));

System.register("chunks:///UIXianShi.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./UIReward.js","./UIMain.js","./DataManager.js","./Tools.js"],(function(e,n){var t,i,r,s,o,a,c,u,d,h,l,p,f,g,v,y,m,w,R,P,_,I,C,b,k,T,D,S,U,j,B;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0}),{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inherits,r=e.classCallCheck,s=e.possibleConstructorReturn,o=e.getPrototypeOf,a=e.initializerDefineProperty,c=e.assertThisInitialized,u=e.createClass,d=e.asyncToGenerator},function(e){h=e.cclegacy,l=e._decorator,p=e.ProgressBarComponent,f=e.Node,g=e.director,v=e.Component,y=e.Prefab,m=e.instantiate},function(e){w=e.XIANSHI_REWARDS},function(e){R=e.UIReward},function(e){P=e.UIMain},function(e){_=e.default},function(e){I=e.Tools}],execute:function(){h._RF.push({},"6adf26LphdDTpydFsJlQEn+","UIXianShi",void 0),j=l.ccclass,B=l.property,e("UIXianShi",(C=j("UIXianShi"),b=B(p),k=B(f),C((S=t((D=function(e){function n(){var e,t;r(this,n);for(var i=arguments.length,u=new Array(i),d=0;d<i;d++)u[d]=arguments[d];return t=s(this,(e=o(n)).call.apply(e,[this].concat(u))),a(t,"progress",S,c(t)),a(t,"hand",U,c(t)),t.curProgress=0,t.isDone=!1,t.handTimer=0,t}var t;return i(n,e),u(n,[{key:"start",value:function(){var e=this.node.getChildByName("BG");e.width=g.getWinSize().width,e.height=g.getWinSize().height}},{key:"update",value:function(e){this.isDone||(this.curProgress=I.clampf(this.curProgress-e/2,0,1),this.progress.progress=this.curProgress,this.curProgress>=.8&&this.done(),this.handTimer+=3*e,this.hand.setPosition(163-10*Math.sin(this.handTimer),10*Math.sin(this.handTimer)-62,0))}},{key:"onBtnClick",value:function(){this.hand.active=!1,this.curProgress=I.clampf(this.curProgress+.2,0,1)}},{key:"done",value:function(){this.isDone=!0,this.progress.progress=1,I.showBanner(!0),this.scheduleOnce(this.destroyMine,1)}},{key:"sendReward",value:(t=d(regeneratorRuntime.mark((function e(){var n,t,i,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=I.getRandomInt(0,w.length-1),t=w[n],_.instance.sendReward(t.type,t.id,t.count),e.next=5,I.loadRes("prefabs/ui/UIReward",y);case 5:i=e.sent,r=m(i),P.instance.uiTopNode.addChild(r),r.getComponent(R).init(t.type,t.id,t.count);case 10:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"destroyMine",value:function(){this.sendReward(),I.showBanner(!1),this.node.removeFromParent(),this.node.destroy()}}]),n}(v)).prototype,"progress",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(D.prototype,"hand",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=D))||T)),h._RF.pop()}}}));

System.register("chunks:///UIShengYa.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Config.js","./AdsMgr.js","./UIMain.js","./DataManager.js","./Tools.js","./UILvReward.js"],(function(e,t){var n,i,a,s,o,r,c,h,l,d,v,g,u,m,f,p,C,k,y,T,w,B,I,N,S,R,A,x,L,b,P,E,D,U,G,Y;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){n=e.inherits,i=e.classCallCheck,a=e.possibleConstructorReturn,s=e.getPrototypeOf,o=e.createClass,r=e.asyncToGenerator},function(e){c=e.cclegacy,h=e._decorator,l=e.ButtonComponent,d=e.UITransformComponent,v=e.Vec3,g=e.tween,u=e.instantiate,m=e.Component,f=e.director,p=e.ScrollViewComponent,C=e.MaskComponent,k=e.SpriteComponent,y=e.LabelComponent,T=e.Prefab,w=e.ProgressBarComponent,B=e.Vec2,I=e.SpriteFrame},function(e){N=e.SOUND_TYPE,S=e.ITEMTYPE,R=e.LV_REWARD,A=e.CHENGJIU_REWARD,x=e.TASK_REWARD},function(e){L=e.default},function(e){b=e.UIMain},function(e){P=e.default},function(e){E=e.Tools},function(e){D=e.UILvReward}],execute:function(){c._RF.push({},"a9a04YUzF5GULXiN9dnYQSp","UIShengYa",void 0),Y=h.ccclass,h.property,e("UIShengYa",(U=Y("UIShengYa"),U(G=function(e){function t(){var e,n;i(this,t);for(var o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return(n=a(this,(e=s(t)).call.apply(e,[this].concat(r)))).lvlights=[],n.curExpPercent=0,n.toExpPercent=0,n.achieveCells=[],n.taskCells=[],n.loadOK=!1,n.curPageIndex=0,n}var c,h,m,U,G;return n(t,e),o(t,[{key:"start",value:(G=r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.getScene().on("hidePopPanel",this.hidePopPanel,this),f.getScene().on("refreshShengya",this.refreshShengya,this),f.getScene().on("onGetAchieve",this.onGetAchieve,this),f.getScene().on("onGetLvReward",this.onGetLvReward,this),this.scr=this.node.getChildByName("ScrollView").getComponent(p),this.scr.node.height=cc.winSize.height,this.scr.view.height=cc.winSize.height,this.scr.content.setPosition(0,cc.winSize.height/2,0),this.scr.view.getComponent(C).inverted=!1,this.btnAchieve=this.scr.content.getChildByName("Button1").getComponent(l),this.iconAchieve=this.btnAchieve.node.getChildByName("Icon").getComponent(k),this.reddotAchieve=this.btnAchieve.node.getChildByName("reddot").getComponent(k),this.btnTask=this.scr.content.getChildByName("Button2").getComponent(l),this.iconTask=this.btnTask.node.getChildByName("Icon").getComponent(k),this.reddotTask=this.btnTask.node.getChildByName("reddot").getComponent(k),this.achieveBg=this.scr.content.getChildByName("ChengJiuBg"),this.taskBg=this.scr.content.getChildByName("TaskBg"),this.btnTaskRefresh=this.taskBg.getChildByName("BtnRefresh").getComponent(l),this.taskLeftTimesLabel=this.btnTaskRefresh.node.getChildByName("Label").getComponent(y),this.taskTimeLabel=this.taskBg.getChildByName("LeftTime").getComponent(y),E.addClickEvent(this.node,this.btnAchieve,"onBtnAchievementClick","UIShengYa"),E.addClickEvent(this.node,this.btnTask,"onBtnTaskClick","UIShengYa"),E.addClickEvent(this.node,this.btnTaskRefresh,"onBtnTaskRefreshClick","UIShengYa"),e.next=26,E.loadRes("prefabs/ui/TaskCell",T);case 26:this.cellPrefab=e.sent,this.refreshLvNode(!0),this.initAchieveCells(),this.initTaskCells(),this.refreshAchieveCells(),this.updateTaskTime(),this.schedule(this.updateTaskTime,1),this.loadOK=!0;case 34:case"end":return e.stop()}}),e,this)}))),function(){return G.apply(this,arguments)})},{key:"refreshShengya",value:function(){this&&this.loadOK&&(this.refreshLvNode(!1),this.onBtnAchievementClick(),this.updateTaskTime(),this.hidePopPanel())}},{key:"refreshLvNode",value:(U=r(regeneratorRuntime.mark((function e(){var t,n,i,a,s,o,r,c,h,d,v,g,u,m,f,p,C,T,B,I=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=I.length>0&&void 0!==I[0]&&I[0],n=this.getCurLv(),i=n+1,a=this.scr.content.getChildByName("Lv"),s=a.getChildByName("LvName").getComponent(l),o=a.getChildByName("LvLabel").getComponent(y),r=a.getChildByName("BtnOpen").getComponent(l),this.expProgress=a.getChildByName("ProgressBar").getComponent(w),c=this.expProgress.node.getChildByName("Lv_cur").getComponent(y),h=this.expProgress.node.getChildByName("Lv_to").getComponent(y),d=0;d<5;d++)g=R[v=4==d?i:n],u=this.expProgress.node.getChildByName("Reward"+(d+1)).getComponent(l),m=u.node.getChildByName("Icon").getComponent(k),f=u.node.getChildByName("Light"),p=u.node.getChildByName("Done"),C=u.node.getChildByName("Done1"),T=u.node.getChildByName("Not"),B=u.node.getChildByName("reddot"),p.active=P.instance.isGetLvRewardDone(v,4==d?0:d),C.active=p.active,T.active=!P.instance.canGetLvReward(n,d),t&&(this.lvlights.push(f),E.addClickEvent(this.node,u,"btnGetLvRewardClick","UIShengYa",""+(d+1))),i>R.length-1&&(g=R[v-1]),4==d?P.instance.setItemIcon(m,g.rewardType[0],g.rewardID[0]):P.instance.setItemIcon(m,g.rewardType[d],g.rewardID[d]),f.active=P.instance.canGetLvReward(v,4==d?0:d)&&!p.active,B.active=f.active;t&&(E.addClickEvent(this.node,s,"cheatAddExp","UIShengYa"),E.addClickEvent(this.node,r,"onBtnLvOpenClick","UIShengYa")),o.string="Lv  "+(P.instance.lv+1),c.string="Lv"+(n+1),i>R.length-1?h.string="LvMax":h.string="Lv"+(i+1),this.refreshExp();case 16:case"end":return e.stop()}}),e,this)}))),function(){return U.apply(this,arguments)})},{key:"update",value:function(e){if(!(e>2)){for(var t=0;t<this.lvlights.length;t++)this.lvlights[t].setRotationFromEuler(0,0,this.lvlights[t].eulerAngles.z+1);this.expProgress&&(this.curExpPercent<this.toExpPercent?(this.curExpPercent=E.clampf(this.curExpPercent+e,0,this.toExpPercent),this.expProgress.progress=this.curExpPercent):(this.curExpPercent=this.toExpPercent,this.expProgress.progress=this.curExpPercent))}}},{key:"updateTaskTime",value:function(){this.taskLeftTimesLabel.string=Math.floor(3-P.instance.taskRefreshTimes).toString();var e=(new Date).valueOf(),t=new Date(new Date((new Date).toLocaleDateString()).getTime()+864e5-1).valueOf();this.taskTimeLabel.string=E.timestampToTime((t-e)/1e3)}},{key:"onBtnTaskRefreshClick",value:function(){if(E.playSound(N.BUTTON),P.instance.taskRefreshTimes>=3)E.ShowTip("The refresh times are used up");else{var e=function(){P.instance.taskRefreshTimes++,localStorage.setItem("taskRefreshTimes",P.instance.taskRefreshTimes.toString()),P.instance.refreshTaskInfo(!0),this.refreshTaskCells(),this.updateTaskTime(),E.reportAnalytics("观看视频_任务刷新_完成")}.bind(this);L.showVideoAd(e)}}},{key:"btnGetLvRewardClick",value:function(e,t){E.playSound(N.BUTTON);var n=parseInt(t),i=this.getCurLv(),a=0;5==n?(i++,a=0):a=n-1;this.expProgress.node.getChildByName("Reward"+n).getComponent(l);if(P.instance.isGetLvRewardDone(i,a))E.ShowTip("All awards have been claimed");else if(P.instance.canGetLvReward(i,a)){var s=R[i],o=s.rewardType[a]==S.CARD;if(P.instance.sendReward(s.rewardType[a],s.rewardID[a],s.rewardCount[a]),b.instance.showReward(s.rewardType[a],s.rewardID[a],s.rewardCount[a],o),P.instance.setLvRewardDone(i,a),this.refreshLvNode(),e){var r=e.currentTarget.getComponent(d).convertToWorldSpaceAR(v.ZERO);r.x-=cc.winSize.width/2,r.y-=cc.winSize.height/2,b.instance.showMoneyAnim(r,s.rewardType[a],s.rewardID[a],s.rewardCount[a])}}else console.log("还不可以领取该奖励")}},{key:"refreshExp",value:function(){if(this.expProgress){var e=this.getCurLv();if(P.instance.lv>e)this.toExpPercent=1;else{var t=R[P.instance.lv].exp,n=E.clampf(P.instance.exp/t,0,1);this.toExpPercent=.06+.88*n}}}},{key:"onBtnLvOpenClick",value:(m=r(regeneratorRuntime.mark((function e(){var t,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E.playSound(N.BUTTON),e.next=3,E.loadRes("prefabs/ui/UILvReward",T);case 3:t=e.sent,n=u(t),this.node.parent.addChild(n),this.node.active=!1,i=function(){this.node.active=!0,this.refreshLvNode()}.bind(this),n.getComponent(D).closeEvent=i,this.scr.scrollTo(new B(0,1),0);case 11:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"onBtnAchievementClick",value:function(){this.curPageIndex=0,E.playSound(N.BUTTON),g(this.btnAchieve.node).to(.2,{width:455,height:95}).start(),g(this.btnTask.node).to(.2,{width:240,height:79}).start(),g(this.iconAchieve.node).to(.2,{position:new v(222,44,0)}).start(),g(this.iconTask.node).to(.2,{position:new v(-120,34,0)}).start(),g(this.iconAchieve.node).to(.2,{scale:new v(1,1,1)}).start(),g(this.iconTask.node).to(.2,{scale:new v(.8,.8,1)}).start(),g(this.reddotAchieve.node).to(.2,{position:new v(434,74,1)}).start(),g(this.reddotTask.node).to(.2,{position:new v(-17,60,1)}).start(),g(this.reddotAchieve.node).to(.2,{scale:new v(1,1,1)}).start(),g(this.reddotTask.node).to(.2,{scale:new v(.8,.8,1)}).start(),this.refreshAchieveCells()}},{key:"onBtnTaskClick",value:function(){this.curPageIndex=1,E.playSound(N.BUTTON),g(this.btnAchieve.node).to(.2,{width:240,height:79}).start(),g(this.btnTask.node).to(.2,{width:455,height:95}).start(),g(this.iconAchieve.node).to(.2,{position:new v(120,34,0)}).start(),g(this.iconTask.node).to(.2,{position:new v(-222,44,0)}).start(),g(this.iconAchieve.node).to(.2,{scale:new v(.8,.8,1)}).start(),g(this.iconTask.node).to(.2,{scale:new v(1,1,1)}).start(),g(this.reddotAchieve.node).to(.2,{position:new v(220,60,1)}).start(),g(this.reddotTask.node).to(.2,{position:new v(-17,74,1)}).start(),g(this.reddotAchieve.node).to(.2,{scale:new v(.8,.8,1)}).start(),g(this.reddotTask.node).to(.2,{scale:new v(1,1,1)}).start(),this.refreshTaskCells()}},{key:"sortAchievementInfo",value:function(){for(var e=[],t=[],n=[],i=0;i<P.instance.achieveInfo.length;i++){var a=P.instance.achieveInfo[i],s=A[a.id];s.limit[a.getTimes]&&a.count>=s.limit[a.getTimes]?e.push(a):a.getTimes>=s.rewardCount.length?n.push(a):t.push(a)}for(var o=-1,r=0;r<t.length;r++)if(0==t[r].id){o=r;break}if(o>-1){var c=t.splice(o,1)[0];t.unshift(c)}P.instance.achieveInfo=e.concat(t).concat(n)}},{key:"sortTaskInfo",value:function(){for(var e=[],t=[],n=[],i=0;i<P.instance.taskInfo.length;i++){var a=P.instance.taskInfo[i],s=x[a.id];a.count>=s.limit&&!a.isDone?e.push(a):a.isDone?n.push(a):t.push(a)}for(var o=-1,r=0;r<t.length;r++)if(0==t[r].id){o=r;break}if(o>-1){var c=t.splice(o,1)[0];t.unshift(c)}P.instance.taskInfo=e.concat(t).concat(n)}},{key:"initTaskCells",value:function(){for(var e=0;e<P.instance.taskInfo.length;e++){var t=u(this.cellPrefab);this.taskBg.addChild(t);var n=t.getChildByName("Icon").getComponent(l),i=t.getChildByName("BtnGet").getComponent(l),a=t.getChildByName("BtnJump").getComponent(l),s=t.getChildByName("BtnVideo").getComponent(l);E.addClickEvent(this.node,i,"onBtnGetClick","UIShengYa"),E.addClickEvent(this.node,a,"onBtnJumpClick","UIShengYa"),E.addClickEvent(this.node,s,"onBtnVideoClick","UIShengYa"),E.addClickEvent(this.node,n,"cheatTask","UIShengYa"),this.taskCells.push(t)}}},{key:"initAchieveCells",value:function(){for(var e=0;e<P.instance.achieveInfo.length;e++){var t=u(this.cellPrefab);this.achieveBg.addChild(t);var n=t.getChildByName("Icon").getComponent(l),i=t.getChildByName("BtnGet").getComponent(l),a=t.getChildByName("BtnJump").getComponent(l),s=t.getChildByName("BtnVideo").getComponent(l);E.addClickEvent(this.node,i,"onBtnGetClick","UIShengYa"),E.addClickEvent(this.node,a,"onBtnJumpClick","UIShengYa"),E.addClickEvent(this.node,s,"onBtnVideoClick","UIShengYa"),E.addClickEvent(this.node,n,"cheatAchieve","UIShengYa"),this.achieveCells.push(t)}}},{key:"refreshAchieveCells",value:function(){this.sortAchievementInfo(),this.taskBg.active=!1,this.achieveBg.active=!0;for(var e=160*(P.instance.achieveInfo.length-4),t=0;t<P.instance.achieveInfo.length;t++){var n=P.instance.achieveInfo[t],i=A[n.id],a=this.achieveCells[t];a.name="1,"+n.id,a.setPosition(-750,-108-160*t,0),g(a).delay(.05*t).to(.1,{position:new v(0,-108-160*t,0)}).start(),this.refreshAchieveCell(a,n,i)}this.achieveBg.height=709+e;var s=cc.winSize.width/cc.winSize.height-.5622;this.scr.content.height=cc.winSize.height+e+160+3e3*s,this.reddotAchieve.node.active=!1;for(var o=0;o<P.instance.achieveInfo.length;o++){var r=P.instance.achieveInfo[o];if(r){var c=A[r.id];if(c.limit[r.getTimes]&&r.count>=c.limit[r.getTimes]){this.reddotAchieve.node.active=!0;break}}}}},{key:"refreshAchieveCell",value:(h=r(regeneratorRuntime.mark((function e(t,n,i){var a,s,o,r,c,h,d,v,g,u,m,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.getChildByName("Desc").getComponent(y),s=t.getChildByName("Exp").getComponent(y),o=t.getChildByName("Progress").getComponent(y),r=t.getChildByName("TipNo"),c=t.getChildByName("TipOk"),h=t.getChildByName("BtnGet").getComponent(l),d=t.getChildByName("BtnVideo"),v=t.getChildByName("BtnJump"),g=t.getChildByName("Reward2Icon"),u=t.getChildByName("Reward2").getComponent(y),m=n.getTimes<i.rewardCount.length?n.getTimes:i.rewardCount.length-1,f=i.rewardCount[m],p=i.limit[m],g.active=!1,u.node.active=!1,a.string=i.desc+i.limit[m]+i.timesDesc,s.string=f.toString(),o.string="["+n.count+"/"+p+"]",r.active=!1,v.active=n.count<p,c.active=n.count>=p,h.node.active=n.count>=p&&n.getTimes<i.rewardCount.length,o.node.active=!h.node.active,0==n.id&&v.active?(v.active=!1,d.active=!0):d.active=!1,!(n.getTimes>=i.rewardCount.length)){e.next=28;break}return e.next=27,E.loadRes("textures/ui/sy_cell2",I);case 27:t.getComponent(k).spriteFrame=e.sent;case 28:case"end":return e.stop()}}),e)}))),function(e,t,n){return h.apply(this,arguments)})},{key:"refreshTaskCells",value:function(){this.sortTaskInfo(),this.taskBg.active=!0,this.achieveBg.active=!1;for(var e=P.instance.taskInfo.length,t=160*(e-4)+80,n=0;n<e;n++){var i=P.instance.taskInfo[n],a=x[i.id],s=this.taskCells[n];s.name="2,"+i.id,s.setPosition(-750,-188-160*n,0),g(s).delay(.05*n).to(.1,{position:new v(0,-188-160*n,0)}).start(),this.refreshTaskCell(s,i,a)}this.taskBg.height=709+t;var o=cc.winSize.width/cc.winSize.height-.5622;this.scr.content.height=cc.winSize.height+t+160+3e3*o,this.reddotTask.node.active=!1;for(var r=0;r<P.instance.taskInfo.length;r++){var c=P.instance.taskInfo[r];if(c){var h=x[c.id];if(c.count>=h.limit&&!c.isDone){this.reddotTask.node.active=!0;break}}}}},{key:"refreshTaskCell",value:(c=r(regeneratorRuntime.mark((function e(t,n,i){var a,s,o,r,c,h,d,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.getChildByName("Desc").getComponent(y),s=t.getChildByName("Exp").getComponent(y),o=t.getChildByName("Progress").getComponent(y),r=t.getChildByName("TipNo"),c=t.getChildByName("TipOk"),h=t.getChildByName("BtnJump"),d=t.getChildByName("BtnGet").getComponent(l),v=t.getChildByName("BtnVideo"),t.getChildByName("Reward2").getComponent(y).string=i.rewardCount[1].toString(),a.string=i.desc+i.limit+i.timesDesc,s.string=i.rewardCount[0].toString(),o.string="["+n.count+"/"+i.limit+"]",r.active=!1,h.active=n.count<i.limit,c.active=n.count>=i.limit,d.node.active=n.count>=i.limit&&0==n.isDone,o.node.active=!d.node.active,0==n.id&&h.active?(h.active=!1,v.active=!0):v.active=!1,!n.isDone){e.next=25;break}return e.next=22,E.loadRes("textures/ui/sy_cell2",I);case 22:t.getComponent(k).spriteFrame=e.sent,e.next=28;break;case 25:return e.next=27,E.loadRes("textures/ui/sy_cell1",I);case 27:t.getComponent(k).spriteFrame=e.sent;case 28:case"end":return e.stop()}}),e)}))),function(e,t,n){return c.apply(this,arguments)})},{key:"onGetLvReward",value:function(){this.btnGetLvRewardClick(null,5)}},{key:"onGetAchieve",value:function(){var e=this.achieveCells[0];this.getTask(e)}},{key:"onBtnGetClick",value:function(e){E.playSound(N.BUTTON);var t=e.currentTarget.parent;this.getTask(t)}},{key:"onBtnVideoClick",value:function(){var e=function(){1==this.curPageIndex?(P.instance.addTaskCount(0,1,!0),this.refreshTaskCells()):(P.instance.addAchieveCount(0,1,!0),this.refreshAchieveCells()),E.reportAnalytics("观看视频_生涯直接观看_完成")}.bind(this);L.showVideoAd(e)}},{key:"onBtnJumpClick",value:function(e){E.playSound(N.BUTTON);var t=e.currentTarget.parent;this.jumpTask(t)}},{key:"jumpTask",value:function(e){var t=E.splitToNumber(e.name,","),n=t[0],i=t[1];if(1==n){for(var a=null,s=0;s<P.instance.achieveInfo.length;s++)if(P.instance.achieveInfo[s].id==i){a=P.instance.achieveInfo[s];break}if(a){var o=A[a.id];b.instance.onBtnBottomClick(null,""+o.jump)}}else{for(var r=null,c=0;c<P.instance.taskInfo.length;c++)if(P.instance.taskInfo[c].id==i){r=P.instance.taskInfo[c];break}if(r){var h=x[r.id];b.instance.onBtnBottomClick(null,""+h.jump)}}}},{key:"getTask",value:function(e){var t=E.splitToNumber(e.name,","),n=t[0],i=t[1];if(1==n){for(var a=null,s=0;s<P.instance.achieveInfo.length;s++)if(P.instance.achieveInfo[s].id==i){a=P.instance.achieveInfo[s];break}if(a){var o=A[a.id];o.limit[a.getTimes]&&a.count>=o.limit[a.getTimes]?(P.instance.addAchieveCount(20,1,!0),P.instance.sendReward(o.rewardType,o.rewardID,o.rewardCount[a.getTimes]),a.getTimes++,localStorage.setItem("achieveInfo",JSON.stringify(P.instance.achieveInfo)),this.refreshAchieveCells(),this.refreshLvNode()):console.error("触摸过快")}}else{for(var r=null,c=0;c<P.instance.taskInfo.length;c++)if(P.instance.taskInfo[c].id==i){r=P.instance.taskInfo[c];break}if(r){var h=x[r.id];r.count>=h.limit&&!r.isDone?(P.instance.sendReward(h.rewardType[0],h.rewardID[0],h.rewardCount[0]),P.instance.sendReward(h.rewardType[1],h.rewardID[1],h.rewardCount[1]),r.isDone=1,localStorage.setItem("taskInfo",JSON.stringify(P.instance.taskInfo)),P.instance.addAchieveCount(19,1,!0),P.instance.addTaskCount(19,1,!0),this.refreshTaskCells(),this.refreshLvNode()):console.error("触摸过快")}}}},{key:"getCurLv",value:function(){for(var e=0,t=0;t<R.length;t++){var n=R[t];if(P.instance.lv>=n.lv){for(var i=!0,a=0;a<4;a++)P.instance.isGetLvRewardDone(n.lv,a)||(i=!1);if(!i)break;e++}}return P.instance.lv<e?P.instance.lv:e}},{key:"onDestroy",value:function(){cc.systemEvent.off(cc.SystemEventType.KEY_UP,this.cheat,this)}},{key:"hidePopPanel",value:function(){}},{key:"cheat",value:function(e){e.rawEvent.key}},{key:"cheatAddExp",value:function(){}},{key:"cheatAchieve",value:function(e){}},{key:"cheatTask",value:function(e){}}]),t}(m))||G)),c._RF.pop()}}}));

System.register("chunks:///_virtual/prerequisite-imports:main",["../CameraFollow.js","../UITip.js","../Config.js","../UIGuideCover.js","../AdsMgr.js","../UIReward.js","../UIUnlockPlayer.js","../UITest.js","../UIEmpty.js","../UIMain.js","../DataManager.js","../Tools.js","../Bullet.js","../Gold.js","../BossBlood.js","../Enemy.js","../GameControl.js","../PlayerBullet.js","../Boom.js","../WuRenJi.js","../DaoDan.js","../UIPlayerBlood.js","../SuperBoom.js","../SuperDaoDan.js","../Player.js","../DaoDanBoss.js","../CallBall.js","../Boss.js","../UIGameStar.js","../UIGuideTalk.js","../EnemyRebornPursue.js","../TTManager.js","../GameManager.js","../AirDrop.js","../Box.js","../JoyStick.js","../Loading.js","../Logo.js","../UIBoxOpen.js","../UIBox.js","../UIGameOver.js","../UIPlayerInfo.js","../UIJiaoSe.js","../UIKongTou.js","../UILvReward.js","../UIPause.js","../UIReborn.js","../UIShop.js","../UISign.js","../UIXianShi.js","../UIShengYa.js"],(function(n,o){return{setters:[function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){}],execute:function(){}}}));

(function(r) {
  r('project:///assets/scripts/CameraFollow.js', 'chunks:///CameraFollow.js');
  r('project:///assets/scripts/UITip.js', 'chunks:///UITip.js');
  r('project:///assets/scripts/Config.js', 'chunks:///Config.js');
  r('project:///assets/scripts/UIGuideCover.js', 'chunks:///UIGuideCover.js');
  r('project:///assets/scripts/AdsMgr.js', 'chunks:///AdsMgr.js');
  r('project:///assets/scripts/UIReward.js', 'chunks:///UIReward.js');
  r('project:///assets/scripts/UIUnlockPlayer.js', 'chunks:///UIUnlockPlayer.js');
  r('project:///assets/scripts/UITest.js', 'chunks:///UITest.js');
  r('project:///assets/scripts/UIEmpty.js', 'chunks:///UIEmpty.js');
  r('project:///assets/scripts/UIMain.js', 'chunks:///UIMain.js');
  r('project:///assets/scripts/DataManager.js', 'chunks:///DataManager.js');
  r('project:///assets/scripts/Tools.js', 'chunks:///Tools.js');
  r('project:///assets/scripts/Bullet.js', 'chunks:///Bullet.js');
  r('project:///assets/scripts/Gold.js', 'chunks:///Gold.js');
  r('project:///assets/scripts/BossBlood.js', 'chunks:///BossBlood.js');
  r('project:///assets/scripts/Enemy.js', 'chunks:///Enemy.js');
  r('project:///assets/scripts/GameControl.js', 'chunks:///GameControl.js');
  r('project:///assets/scripts/PlayerBullet.js', 'chunks:///PlayerBullet.js');
  r('project:///assets/scripts/Boom.js', 'chunks:///Boom.js');
  r('project:///assets/scripts/WuRenJi.js', 'chunks:///WuRenJi.js');
  r('project:///assets/scripts/DaoDan.js', 'chunks:///DaoDan.js');
  r('project:///assets/scripts/UIPlayerBlood.js', 'chunks:///UIPlayerBlood.js');
  r('project:///assets/scripts/SuperBoom.js', 'chunks:///SuperBoom.js');
  r('project:///assets/scripts/SuperDaoDan.js', 'chunks:///SuperDaoDan.js');
  r('project:///assets/scripts/Player.js', 'chunks:///Player.js');
  r('project:///assets/scripts/DaoDanBoss.js', 'chunks:///DaoDanBoss.js');
  r('project:///assets/scripts/CallBall.js', 'chunks:///CallBall.js');
  r('project:///assets/scripts/Boss.js', 'chunks:///Boss.js');
  r('project:///assets/scripts/UIGameStar.js', 'chunks:///UIGameStar.js');
  r('project:///assets/scripts/UIGuideTalk.js', 'chunks:///UIGuideTalk.js');
  r('project:///assets/scripts/EnemyRebornPursue.js', 'chunks:///EnemyRebornPursue.js');
  r('project:///assets/scripts/TTManager.js', 'chunks:///TTManager.js');
  r('project:///assets/scripts/GameManager.js', 'chunks:///GameManager.js');
  r('project:///assets/scripts/AirDrop.js', 'chunks:///AirDrop.js');
  r('project:///assets/scripts/Box.js', 'chunks:///Box.js');
  r('project:///assets/scripts/JoyStick.js', 'chunks:///JoyStick.js');
  r('project:///assets/scripts/Loading.js', 'chunks:///Loading.js');
  r('project:///assets/scripts/Logo.js', 'chunks:///Logo.js');
  r('project:///assets/scripts/UIBoxOpen.js', 'chunks:///UIBoxOpen.js');
  r('project:///assets/scripts/UIBox.js', 'chunks:///UIBox.js');
  r('project:///assets/scripts/UIGameOver.js', 'chunks:///UIGameOver.js');
  r('project:///assets/scripts/UIPlayerInfo.js', 'chunks:///UIPlayerInfo.js');
  r('project:///assets/scripts/UIJiaoSe.js', 'chunks:///UIJiaoSe.js');
  r('project:///assets/scripts/UIKongTou.js', 'chunks:///UIKongTou.js');
  r('project:///assets/scripts/UILvReward.js', 'chunks:///UILvReward.js');
  r('project:///assets/scripts/UIPause.js', 'chunks:///UIPause.js');
  r('project:///assets/scripts/UIReborn.js', 'chunks:///UIReborn.js');
  r('project:///assets/scripts/UIShop.js', 'chunks:///UIShop.js');
  r('project:///assets/scripts/UISign.js', 'chunks:///UISign.js');
  r('project:///assets/scripts/UIXianShi.js', 'chunks:///UIXianShi.js');
  r('project:///assets/scripts/UIShengYa.js', 'chunks:///UIShengYa.js');
  r('virtual:///prerequisite-imports:main', 'chunks:///_virtual/prerequisite-imports:main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    var _m;
    return {
        setters: [function(m) { _m = m; }],
        execute: function () { _export(_m); }
    };
    });
});